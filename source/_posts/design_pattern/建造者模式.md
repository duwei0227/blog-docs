
---
title: è®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼
published: true
layout: post
date: 2025-12-02 08:40:00
permalink: /design_pattern/builder_pattern.html
categories: [è®¾è®¡æ¨¡å¼]

---


## æ¦‚å¿µ

å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å…¶è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚



è§£å†³å¤æ‚å¯¹è±¡åˆ›å»ºçš„é—®é¢˜çš„æ–¹å¼ï¼š

- å°†å¤æ‚å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹åˆ†è§£ä¸ºå¤šä¸ªç®€å•çš„æ­¥éª¤
- é€šè¿‡ä¸€ä¸ªæŒ‡å¯¼è€…ï¼ˆDirectorï¼‰æ¥æ§åˆ¶æ„å»ºè¿‡ç¨‹
- ä¸åŒçš„å»ºé€ è€…å¯ä»¥å®ç°ç›¸åŒçš„æ„å»ºæ­¥éª¤ï¼Œä½†äº§ç”Ÿä¸åŒçš„äº§å“



åŒä¸€ä¸ªäº§å“ï¼Œæ„å»ºè¿‡ç¨‹å¤æ‚ï¼Œå¯ä»¥ç”±å¤šä¸ªç‹¬ç«‹çš„æ­¥éª¤ç»„æˆï¼Œä¸”æ­¥éª¤çš„ç»„åˆé¡ºåºï¼Œç»„åˆæ•°é‡çš„ä¸åŒäº§ç”Ÿäº†åŒç±»äº§å“çš„ä¸åŒå‹å·ã€‚



### âœ… é€‚ç”¨åœºæ™¯

1. **åˆ›å»ºå¤æ‚å¯¹è±¡**ï¼šå¯¹è±¡æœ‰å¾ˆå¤šç»„æˆéƒ¨åˆ†ï¼Œåˆ›å»ºè¿‡ç¨‹å¤æ‚ï¼Œä¸”å„ä¸ªéƒ¨åˆ†å¯èƒ½éœ€è¦ä¸åŒçš„åˆ›å»ºé€»è¾‘
2. **åˆ›å»ºè¿‡ç¨‹éœ€è¦å¤šä¸ªæ­¥éª¤**ï¼šå¯¹è±¡çš„åˆ›å»ºéœ€è¦å¤šä¸ªæ­¥éª¤ï¼Œä¸”è¿™äº›æ­¥éª¤çš„é¡ºåºå¾ˆé‡è¦
3. **éœ€è¦åˆ›å»ºä¸åŒçš„å¯¹è±¡è¡¨ç¤º**ï¼šä½¿ç”¨ç›¸åŒçš„åˆ›å»ºè¿‡ç¨‹ï¼Œä½†éœ€è¦ç”Ÿæˆä¸åŒçš„äº§å“å˜ä½“
4. **é¿å…é‡å çš„æ„é€ å‡½æ•°ï¼ˆtelescoping constructorï¼‰**ï¼šå½“æ„é€ å‡½æ•°å‚æ•°è¿‡å¤šæ—¶ï¼Œä½¿ç”¨å»ºé€ è€…æ¨¡å¼å¯ä»¥æé«˜ä»£ç å¯è¯»æ€§



### ğŸ¯ å…¸å‹ä¾‹å­ï¼š

- ç”µè„‘é…ç½®ï¼ˆCPUã€å†…å­˜ã€ç¡¬ç›˜ã€æ˜¾å¡ç­‰çš„ä¸åŒç»„åˆï¼‰
- æ±‰å ¡å¥—é¤ï¼ˆé¢åŒ…ã€è‚‰é¥¼ã€è”¬èœã€é…±æ–™çš„ä¸åŒç»„åˆï¼‰
- æˆ¿å±‹å»ºé€ ï¼ˆåœ°åŸºã€å¢™ä½“ã€å±‹é¡¶ã€è£…ä¿®çš„ä¸åŒé£æ ¼ï¼‰
- æ–‡æ¡£ç”Ÿæˆå™¨ï¼ˆæ ‡é¢˜ã€æ­£æ–‡ã€é¡µçœ‰ã€é¡µè„šçš„ä¸åŒæ ¼å¼ï¼‰



## ç±»å›¾

![image-20251127085745314](https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20251127085745314.png)

**ç±»å›¾è¯´æ˜ï¼š** 
- **`Client`ï¼ˆå®¢æˆ·ç«¯ï¼‰**ï¼šä½¿ç”¨æŒ‡å¯¼è€…å’Œå»ºé€ è€…æ¥åˆ›å»ºäº§å“
- **`Director`ï¼ˆæŒ‡å¯¼è€…ï¼‰**ï¼šçŸ¥é“æ„å»ºè¿‡ç¨‹çš„æ­¥éª¤ï¼Œæ§åˆ¶æ„å»ºé¡ºåºï¼Œä¸»è¦ç”¨äºæœ€ç»ˆäº§å“çš„æ„å»ºï¼Œå¹¶æ ¹æ®ä¸åŒçš„æ„å»ºè¿‡ç¨‹è¿”å›ä¸åŒçš„Product
- **`Builder`ï¼ˆæŠ½è±¡å»ºé€ è€…ï¼‰**ï¼šå®šä¹‰æ„å»ºäº§å“çš„å„ä¸ªæ­¥éª¤
- **`ConcreteBuilder`ï¼ˆå…·ä½“å»ºé€ è€…ï¼‰**ï¼šå®ç°æ„å»ºæ­¥éª¤ï¼Œè´Ÿè´£ç»„è£…äº§å“çš„å„ä¸ªéƒ¨åˆ†
- **`Product`ï¼ˆäº§å“ï¼‰**ï¼šæœ€ç»ˆè¦åˆ›å»ºçš„å¤æ‚å¯¹è±¡



## ç¤ºä¾‹

### 1ã€å®šä¹‰äº§å“

```java
package cn.probiecoder.builder;

// äº§å“ç±» - ç”µè„‘
public class Computer {
    private String cpu;
    private String memory;
    private String storage;
    private String graphicsCard;
    private String display;
    
    public void setCpu(String cpu) {
        this.cpu = cpu;
    }
    
    public void setMemory(String memory) {
        this.memory = memory;
    }
    
    public void setStorage(String storage) {
        this.storage = storage;
    }
    
    public void setGraphicsCard(String graphicsCard) {
        this.graphicsCard = graphicsCard;
    }
    
    public void setDisplay(String display) {
        this.display = display;
    }
    
    @Override
    public String toString() {
        return "Computeré…ç½®:\n" +
               "  CPU: " + cpu + "\n" +
               "  å†…å­˜: " + memory + "\n" +
               "  å­˜å‚¨: " + storage + "\n" +
               "  æ˜¾å¡: " + graphicsCard + "\n" +
               "  æ˜¾ç¤ºå™¨: " + display;
    }
}

```



### 2ã€å®šä¹‰Builder

```java
package cn.probiecoder.builder;

// æŠ½è±¡å»ºé€ è€…
public abstract class ComputerBuilder {
    protected Computer computer;
    
    public ComputerBuilder() {
        this.computer = new Computer();
    }
    
    public abstract void buildCpu();
    public abstract void buildMemory();
    public abstract void buildStorage();
    public abstract void buildGraphicsCard();
    public abstract void buildDisplay();
    
    public Computer getResult() {
        return computer;
    }
}

package cn.probiecoder.builder;

// æ¸¸æˆç”µè„‘å»ºé€ è€…
public class GamingComputerBuilder extends ComputerBuilder {
    @Override
    public void buildCpu() {
        computer.setCpu("Intel i9-13900K");
    }
    
    @Override
    public void buildMemory() {
        computer.setMemory("32GB DDR5");
    }
    
    @Override
    public void buildStorage() {
        computer.setStorage("2TB NVMe SSD");
    }
    
    @Override
    public void buildGraphicsCard() {
        computer.setGraphicsCard("NVIDIA RTX 4090");
    }
    
    @Override
    public void buildDisplay() {
        computer.setDisplay("32å¯¸ 4K 144Hz");
    }
}


package cn.probiecoder.builder;


// åŠå…¬ç”µè„‘å»ºé€ è€…
public class OfficeComputerBuilder extends ComputerBuilder {
    @Override
    public void buildCpu() {
        computer.setCpu("Intel i5-12400");
    }
    
    @Override
    public void buildMemory() {
        computer.setMemory("16GB DDR4");
    }
    
    @Override
    public void buildStorage() {
        computer.setStorage("512GB SSD");
    }
    
    @Override
    public void buildGraphicsCard() {
        computer.setGraphicsCard("é›†æˆæ˜¾å¡");
    }
    
    @Override
    public void buildDisplay() {
        computer.setDisplay("24å¯¸ 1080P");
    }
}
```



### 3ã€å®šä¹‰Director

```java
package cn.probiecoder.builder;

// æŒ‡å¯¼è€…
public class ComputerDirector {
    private ComputerBuilder builder;
    
    public void setBuilder(ComputerBuilder builder) {
        this.builder = builder;
    }

    public ComputerDirector() {
    }

    public ComputerDirector(ComputerBuilder builder) {
        this.builder = builder;
    }
    
    // æ ‡å‡†æ„å»ºè¿‡ç¨‹
    public Computer constructStandardComputer() {
        builder.buildCpu();
        builder.buildMemory();
        builder.buildStorage();
        builder.buildGraphicsCard();
        builder.buildDisplay();
        return builder.getResult();
    }
    
    // ç®€åŒ–æ„å»ºè¿‡ç¨‹ï¼ˆä¸å¸¦æ˜¾ç¤ºå™¨ï¼‰
    public Computer constructComputerWithoutDisplay() {
        builder.buildCpu();
        builder.buildMemory();
        builder.buildStorage();
        builder.buildGraphicsCard();
        // ä¸æ„å»ºæ˜¾ç¤ºå™¨
        return builder.getResult();
    }
}
```



### 4ã€è°ƒç”¨æ–¹Client

```java
package cn.probiecoder.builder;

// å®¢æˆ·ç«¯
public class Client {
    public static void main(String[] args) {
        // åˆ›å»ºæŒ‡å¯¼è€…
        ComputerDirector director = new ComputerDirector();
        
        // æ„å»ºæ¸¸æˆç”µè„‘
        ComputerBuilder gamingBuilder = new GamingComputerBuilder();
        director.setBuilder(gamingBuilder);
        
        Computer gamingComputer = director.constructStandardComputer();
        System.out.println("=== æ¸¸æˆç”µè„‘ ===");
        System.out.println(gamingComputer);
        System.out.println();
        
        // æ„å»ºåŠå…¬ç”µè„‘
        ComputerBuilder officeBuilder = new OfficeComputerBuilder();
        director.setBuilder(officeBuilder);
        Computer officeComputer = director.constructStandardComputer();
        System.out.println("=== åŠå…¬ç”µè„‘ ===");
        System.out.println(officeComputer);
        
        System.out.println();
        
        // æ„å»ºä¸å¸¦æ˜¾ç¤ºå™¨çš„åŠå…¬ç”µè„‘
        ComputerBuilder officeBuilder2 = new OfficeComputerBuilder();
        director.setBuilder(officeBuilder2);
        Computer officeComputer2 = director.constructComputerWithoutDisplay();
        System.out.println("=== ä¸å¸¦æ˜¾ç¤ºå™¨çš„åŠå…¬ç”µè„‘ ===");
        System.out.println(officeComputer2);
    }
}
```



