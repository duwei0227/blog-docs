<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>上下文管理器with的使用</title>
    <link href="/python/with.html"/>
    <url>/python/with.html</url>
    
    <content type="html"><![CDATA[<p>在介绍《文件操作》的时候，我们有使用<code>with</code>进行文件IO的管理，在这里我们专门介绍<code>with</code>是什么，如何定义自己的上下文。</p><p>在 Python 开发中，<code>with</code> 语句被称为<strong>上下文管理器（Context Manager）</strong>。它的核心作用是简化资源管理（如文件、数据库连接、锁等），确保无论代码执行过程中是否发生异常，资源都能被正确释放，从而避免内存泄漏或文件句柄未关闭等常见问题。</p><h2 id="1-为什么需要-with？"><a href="#1-为什么需要-with？" class="headerlink" title="1. 为什么需要 with？"></a>1. 为什么需要 <code>with</code>？</h2><p>在不使用<code>with</code>的情况，为了确保资源的正确释放，我们通常使用 <code>try...finally</code> 来确保安全。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;data.txt&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>)<br><span class="hljs-keyword">try</span>:<br>    f.write(<span class="hljs-string">&quot;Hello&quot;</span>)<br><span class="hljs-keyword">finally</span>:<br>    f.close()  <span class="hljs-comment"># 无论是否报错，必须执行关闭操作</span><br></code></pre></td></tr></table></figure><p>在使用<code>with</code>语法后，只需要简单的2行就可以实现相同的功能：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;data.txt&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>) <span class="hljs-keyword">as</span> f:<br>    f.write(<span class="hljs-string">&quot;Hello&quot;</span>)<br><span class="hljs-comment"># 离开缩进块后，f.close() 会被自动调用</span><br></code></pre></td></tr></table></figure><p>所以为什么需要呢？</p><ul><li>简化代码语法，一次定义到处使用，不需要每个地方都增加<code>try...finally</code>进行资源的释放</li><li>避免<code>finally</code>子句的遗忘，导致资源未正确释放</li></ul><h2 id="2-常用内置场景"><a href="#2-常用内置场景" class="headerlink" title="2. 常用内置场景"></a>2. 常用内置场景</h2><h3 id="2-1-文件操作"><a href="#2-1-文件操作" class="headerlink" title="2.1 文件操作"></a>2.1 文件操作</h3><p>这是最常见的用法，自动处理文件关闭。</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cos">with <span class="hljs-keyword">open</span>(<span class="hljs-string">&quot;data.txt&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>) <span class="hljs-keyword">as</span> f:<br>    content = f.<span class="hljs-keyword">read</span>()<br>    <span class="hljs-keyword">print</span>(content) <br></code></pre></td></tr></table></figure><h3 id="2-2-线程锁（Threading-Lock）"><a href="#2-2-线程锁（Threading-Lock）" class="headerlink" title="2.2 线程锁（Threading Lock）"></a>2.2 线程锁（Threading Lock）</h3><p>自动处理锁的获取（acquire）和释放（release）。</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-built_in">import</span> threading<br><br><span class="hljs-attr">lock</span> <span class="hljs-operator">=</span> threading.Lock()<br><span class="hljs-keyword">with</span> <span class="hljs-params">lock:</span><br>    <span class="hljs-comment"># 临界区代码</span><br>    pass <br></code></pre></td></tr></table></figure><h3 id="2-3-数据库连接"><a href="#2-3-数据库连接" class="headerlink" title="2.3 数据库连接"></a>2.3 数据库连接</h3><p>许多数据库库（如 <code>sqlite3</code>）支持 <code>with</code> 自动提交事务或回滚。</p><figure class="highlight capnproto"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs capnproto"><span class="hljs-keyword">import</span> sqlite3<br><br><span class="hljs-keyword">with</span> sqlite3.connect(<span class="hljs-string">&quot;db.sqlite&quot;</span>) <span class="hljs-keyword">as</span> conn:<br>    conn.execute(<span class="hljs-string">&quot;INSERT INTO users VALUES (&#x27;Alice&#x27;)&quot;</span>)<br>    <span class="hljs-comment"># 如果块内报错，事务会自动回滚；否则自动提交</span><br></code></pre></td></tr></table></figure><h2 id="3-with-的底层原理"><a href="#3-with-的底层原理" class="headerlink" title="3. with 的底层原理"></a>3. <code>with</code> 的底层原理</h2><p><code>with</code> 语句依赖于<strong>上下文管理器协议</strong>，即对象必须实现以下两个特殊方法：</p><ol><li><strong><code>__enter__(self)</code></strong>:<ul><li>在进入 <code>with</code> 块前执行，完成资源的初始化准备。</li><li>其返回值将赋值给 <code>as</code> 后面的变量。</li></ul></li><li><strong><code>__exit__(self, exc_type, exc_val, exc_tb)</code></strong>:<ul><li>在离开 <code>with</code> 块（或块内抛出异常）时执行，确保资源能够正确释放。</li><li>参数包含异常类型、异常值和追踪信息。如果返回 <code>True</code>，异常会被“压制”（不再向上传播）。</li></ul></li></ol><h2 id="4-自定义上下文管理器"><a href="#4-自定义上下文管理器" class="headerlink" title="4. 自定义上下文管理器"></a>4. 自定义上下文管理器</h2><h3 id="4-1-基于类的实现"><a href="#4-1-基于类的实现" class="headerlink" title="4.1 基于类的实现"></a>4.1 基于类的实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyTimer</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__enter__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;计时开始...&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__exit__</span>(<span class="hljs-params">self, exc_type, exc_val, exc_tb</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;计时结束，清理资源。&quot;</span>)<br>        <span class="hljs-keyword">if</span> exc_type:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;异常类型：<span class="hljs-subst">&#123;exc_type&#125;</span> 异常值: <span class="hljs-subst">&#123;exc_val&#125;</span> 异常追踪: <span class="hljs-subst">&#123;exc_tb&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span> <span class="hljs-comment"># 不压制异常</span><br><br><span class="hljs-keyword">with</span> MyTimer():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;执行业务逻辑，未抛出异常...&quot;</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\n--------------------------\n&#x27;</span>)<br><br><span class="hljs-keyword">with</span> MyTimer():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;执行业务逻辑，抛出异常...&quot;</span>)<br>    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;模拟异常&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">计时开始...<br>执行业务逻辑，未抛出异常...<br>计时结束，清理资源。<br><br>--------------------------<br><br>计时开始...<br>执行业务逻辑，抛出异常...<br>计时结束，清理资源。<br>异常类型：&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;ValueError&#x27;</span>&gt; 异常值: 模拟异常 异常追踪: &lt;traceback <span class="hljs-built_in">object</span> at <span class="hljs-number">0x7f886ebab140</span>&gt;<br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/home/duwei/workspace/python/base-python/test.py&quot;</span>, line <span class="hljs-number">19</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;模拟异常&quot;</span>)<br>ValueError: 模拟异常<br></code></pre></td></tr></table></figure><p><strong>with抑制异常的抛出：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyTimer</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__enter__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;计时开始...&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__exit__</span>(<span class="hljs-params">self, exc_type, exc_val, exc_tb</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;计时结束，清理资源。&quot;</span>)<br>        <span class="hljs-keyword">if</span> exc_type:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;异常类型：<span class="hljs-subst">&#123;exc_type&#125;</span> 异常值: <span class="hljs-subst">&#123;exc_val&#125;</span> 异常追踪: <span class="hljs-subst">&#123;exc_tb&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span> <span class="hljs-comment"># 压制异常</span><br><br><br><span class="hljs-keyword">with</span> MyTimer():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;异常信息不会抛出...&quot;</span>)<br>    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;这是一个测试异常&quot;</span>)<br></code></pre></td></tr></table></figure><p>当 <code>__exit__</code>返回<code>True</code>时，即使执行<code>with</code>发生异常也不会抛出异常中断程序执行。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">计时开始...<br>异常信息不会抛出...<br>计时结束，清理资源。<br>异常类型：&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;ValueError&#x27;</span>&gt; 异常值: 这是一个测试异常 异常追踪: &lt;traceback <span class="hljs-built_in">object</span> at <span class="hljs-number">0x7f6a6bca7180</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="4-2-基于装饰器的实现"><a href="#4-2-基于装饰器的实现" class="headerlink" title="4.2 基于装饰器的实现"></a>4.2 基于装饰器的实现</h3><p>利用 <code>contextlib</code> 模块，可以使用生成器更简单地定义上下文管理器：</p><p><strong>使用<code>contextlib</code>模块时，一定要结合<code>try...finally</code>，确保资源即使在发生异常的情况下也能够正确释放</strong></p><p><strong>基本语法示例：</strong></p><p><em>如果有使用 <code>except Exception</code>捕获所有基类异常，<code>with</code>中发生的异常会被抑制并不会向上层抛出</em></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> contextmanager<br><br><span class="hljs-meta">@contextmanager</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_with</span>():<br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;类似于进入 __enter__&#x27;</span>)<br>        <span class="hljs-keyword">yield</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;类似于进入 __exit__&#x27;</span>)<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;异常类型：<span class="hljs-subst">&#123;<span class="hljs-built_in">type</span>(e)&#125;</span> 异常值: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;清理资源。&quot;</span>)<br><br><span class="hljs-keyword">with</span> simple_with():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;简单with语法&quot;</span>)<br>    <br><span class="hljs-comment"># 输出</span><br>类似于进入 __enter__<br>简单<span class="hljs-keyword">with</span>语法<br>类似于进入 __exit__<br>清理资源。<br></code></pre></td></tr></table></figure><p><strong>无<code>try...finally</code>语句示例：</strong></p><p>如果在<code>with</code>语句内发生异常，资源的释放没有放在<code>finally</code>子句中，<code>yield</code>后边的代码不会执行，资源无法得到正确释放</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> contextmanager<br><br><span class="hljs-meta">@contextmanager</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_with</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;类似于进入 __enter__&#x27;</span>)<br>    <span class="hljs-keyword">yield</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;类似于进入 __exit__&#x27;</span>)<br><br><span class="hljs-keyword">with</span> simple_with():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;简单with语法&quot;</span>)<br>    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;这是一个异常&quot;</span>)<br></code></pre></td></tr></table></figure><p>输出，从输出结果不难看出，<code>yield</code>后边的语句并没有执行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">类似于进入 __enter__<br>简单<span class="hljs-keyword">with</span>语法<br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/home/duwei/workspace/python/base-python/test.py&quot;</span>, line <span class="hljs-number">11</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;这是一个异常&quot;</span>)<br>ValueError: 这是一个异常<br></code></pre></td></tr></table></figure><p><strong>异常被捕获示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> contextmanager<br><br><span class="hljs-meta">@contextmanager</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_with</span>():<br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;类似于进入 __enter__&#x27;</span>)<br>        <span class="hljs-keyword">yield</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;类似于进入 __exit__&#x27;</span>)<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;异常类型：<span class="hljs-subst">&#123;<span class="hljs-built_in">type</span>(e)&#125;</span> 异常值: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;清理资源。&quot;</span>)<br><br><span class="hljs-keyword">with</span> simple_with():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;简单with语法&quot;</span>)<br>    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;这是一个测试异常&quot;</span>)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">类似于进入 __enter__<br>简单<span class="hljs-keyword">with</span>语法<br>异常类型：&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;ValueError&#x27;</span>&gt; 异常值: 这是一个测试异常<br>清理资源。<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Typora配置GitHub图床</title>
    <link href="/other/picbed.html"/>
    <url>/other/picbed.html</url>
    
    <content type="html"><![CDATA[<p><code>Linux</code>环境下<code>Typora</code>通过<code>PicGo-Core</code>上传图片到<code>GitHub</code>配置：</p><p><code>config.json</code>配置如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;picBed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;current&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;github&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;github&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;repo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;duwei0227/picbed&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 仓库名，格式是 username/reponame</span><br>            <span class="hljs-attr">&quot;token&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;g&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// github token</span><br>            <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 自定义存储路径，比如 img/</span><br>            <span class="hljs-attr">&quot;customUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 自定义域名，注意要加 http://或者 https://</span><br>            <span class="hljs-attr">&quot;branch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;main&quot;</span> <span class="hljs-comment">// 分支名，默认是 main</span><br>        <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgoPlugins&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><code>token</code>生成：<br>1、访问 <a href="https://github.com/settings/tokens">https://github.com/settings/tokens</a></p><p>2、点击 <code>New personal access token (classic)</code></p><p>3、选择<code>token</code>实效时间，勾选<code>repo</code></p><p>4、<code>Generate token</code></p><p>5、复制生成的<code>token</code>信息（<strong>重新访问页面时，token信息无法再次查看，需要自行保存</strong>）</p><p><strong>注意事项</strong></p><ul><li><code>branch</code>需要指定，默认提交会提示分支不存在</li></ul>]]></content>
    
    
    <categories>
      
      <category>其他</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PicBed</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>文件操作</title>
    <link href="/python/file.html"/>
    <url>/python/file.html</url>
    
    <content type="html"><![CDATA[<h2 id="一、文件的读取和写入"><a href="#一、文件的读取和写入" class="headerlink" title="一、文件的读取和写入"></a>一、文件的读取和写入</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 推荐做法 使用 with 时不需要显示 close</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>() <span class="hljs-keyword">as</span> f:<br>    <span class="hljs-comment"># 文件的读写</span><br>    <br>    <br><span class="hljs-comment"># 手工 close</span><br>f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;xx.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>) <span class="hljs-comment"># 文件打开时报错不会占用资源连接</span><br><span class="hljs-keyword">try</span>:<br>    <span class="hljs-comment"># 读取文件</span><br><span class="hljs-keyword">finally</span>:<br>    f.close()   <span class="hljs-comment"># 在 finally 语句块中，确保即使 open 发生异常也能正确释放</span><br></code></pre></td></tr></table></figure><p>内置函数<code>open</code>会尝试打开文件并返回对应的文件对象，如果该文件无法打开，则会引发 <code>OSError</code>（具体的异常子类根据具体原因返回，例如文件不存在抛出 <code>FileNotFoundError</code>）。</p><p><strong>主要参数详细说明：</strong></p><ol><li><p><strong><code>file</code> (必须)</strong>:</p><ul><li>表示将要打开的文件的路径（绝对路径或者相对当前工作目录的路径）</li></ul></li><li><p><strong><code>mode</code> (可选)</strong>:</p><ul><li>指定打开文件的模式。详见下表“文件打开模式”。默认为 <code>&#39;r&#39;</code>。</li></ul><table><thead><tr><th>模式</th><th>描述</th><th>注意事项</th></tr></thead><tbody><tr><td><code>&#39;r&#39;</code></td><td><strong>只读</strong> (默认)</td><td>如果文件不存在会报错 <code>FileNotFoundError</code></td></tr><tr><td><code>&#39;w&#39;</code></td><td><strong>写入</strong></td><td>如果文件存在，会<strong>清空</strong>原内容；不存在则创建</td></tr><tr><td><code>&#39;x&#39;</code></td><td><strong>排他性创建</strong></td><td>如果文件已存在，则报错（防止覆盖重要数据）</td></tr><tr><td><code>&#39;a&#39;</code></td><td><strong>追加</strong></td><td>指针在文件末尾，不会清空原内容；不存在则创建</td></tr><tr><td><code>&#39;+&#39;</code></td><td><strong>打开用于更新（读取与写入）</strong></td><td>指针在文件开头</td></tr><tr><td><code>&#39;b&#39;</code></td><td><strong>二进制模式</strong></td><td>用于非文本文件 (如图片、音频)，可与上述模式组合 (如 <code>&#39;rb&#39;</code>, <code>&#39;wb&#39;</code>)</td></tr><tr><td><code>&#39;t&#39;</code></td><td><strong>文本模式</strong></td><td>默认模式，通常省略不写</td></tr></tbody></table><p><em><code>&#39;w+&#39;</code> 和 <code>&#39;w+b&#39;</code> 模式将打开文件并清空内容。而 <code>&#39;r+&#39;</code> 和 <code>&#39;r+b&#39;</code> 模式将打开文件但不清空内容。</em></p></li><li><p><strong><code>encoding</code> (可选)</strong>:</p><ul><li>仅文本模式使用。用于解码或编码文件的字符编码（如 <code>&#39;utf-8&#39;</code>, <code>&#39;gbk&#39;</code>）。建议始终显式指定。</li></ul></li></ol><p><strong>在使用<code>open</code>读写文件时，一定要使用<code>close</code>释放文件资源，或者使用<code>with</code>语句处理</strong></p><p>不主动<code>close</code>可能发生的情况：</p><ul><li><strong>数据丢失（缓存未刷新）：</strong> Python 的文件操作通常是有缓冲的（Buffering）。当你调用 <code>f.write()</code> 时，数据可能还留在内存缓冲区中，并没有真正写入磁盘。如果你没有调用 <code>f.close()</code> 或 <code>f.flush()</code>，且进程异常崩溃或强制终止，缓冲区中的数据可能会丢失。</li><li><strong>文件锁定（Windows 尤为明显）：</strong> 在 Windows 系统上，打开的文件通常会被锁定。如果你的程序是一个长期运行的服务（比如 Web 后台），而不主动关闭文件，其他程序将无法删除或修改该文件</li></ul><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path<br><br><span class="hljs-comment"># 检测文件是否存在</span><br>base_path = Path(<span class="hljs-string">&#x27;test.txt&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;before write some , is test.txt exists?&#x27;</span>, base_path.exists())<br><br><span class="hljs-comment"># 文件的写入</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;test.txt&#x27;</span>, mode = <span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>    f.write(<span class="hljs-string">&#x27;hello world\n&#x27;</span>)<br>    f.writelines([<span class="hljs-string">&#x27;hello python\n&#x27;</span>, <span class="hljs-string">&#x27;hello you&#x27;</span>])  <span class="hljs-comment"># \n 控制写入以后换行</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;after write some , is test.txt exists?&#x27;</span>, base_path.exists())<br><br><br><span class="hljs-comment"># 文件的读取</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;test.txt&#x27;</span>, mode = <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f.readlines():<br>        <span class="hljs-built_in">print</span>(line)<br>        <br><span class="hljs-comment"># 输出</span><br>before write some , <span class="hljs-keyword">is</span> test.txt exists? <span class="hljs-literal">False</span><br>after write some , <span class="hljs-keyword">is</span> test.txt exists? <span class="hljs-literal">True</span><br>hello world<br><br>hello python<br><br>hello you<br><br><br><span class="hljs-comment"># test.txt文件内容</span><br>hello world<br>hello python<br>hello you<br></code></pre></td></tr></table></figure><h2 id="二、文件路径"><a href="#二、文件路径" class="headerlink" title="二、文件路径"></a>二、文件路径</h2><p>我们在进行文件的读取和写入时，需要指定文件的路径，简单文件操作，直接传入一个固定的字符串即可；但是，如果我们想要对路径做更多更复杂的事情时，就需要借助其他模块，此处介绍两个内置模块<code>os.path</code>和<code>pathlib</code>。</p><h3 id="1-os-path"><a href="#1-os-path" class="headerlink" title="1. os.path"></a>1. os.path</h3><p>此模块实现了一些有用的路径名称相关函数，下面介绍一些模块常用的API。</p><h4 id="1-1-路径拼接与拆分"><a href="#1-1-路径拼接与拆分" class="headerlink" title="1.1 路径拼接与拆分"></a>1.1 路径拼接与拆分</h4><p>处理路径时，永远不要手动拼接字符串（如使用 <code>+</code> 或 <code>/</code>），而应使用专用函数。 </p><p><em>手工拼接路径，可能会由于Windows和Linux对于路径的规则不一致而引起失败</em></p><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td><code>os.path.join(path)</code></td><td>路径拼接,根据当前操作系统自动插入正确的路径分隔符（<code>\</code> 或 <code>/</code>）</td></tr><tr><td><code>os.path.split(path)</code></td><td>将路径拆分为“目录”和“文件名”两部分，返回一个元组</td></tr><tr><td><code>os.path.splitext(path)</code></td><td>将路径文件名拆分为文件名和文件后缀，返回一个元组</td></tr></tbody></table><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os.path<br><br>p = os.path.join(<span class="hljs-string">&quot;folder&quot;</span>, <span class="hljs-string">&quot;subfolder&quot;</span>, <span class="hljs-string">&quot;file.txt&quot;</span>)<br><span class="hljs-built_in">print</span>(p) <span class="hljs-comment"># Output: folder/subfolder/file.txt (on Unix-like systems) or folder\subfolder\file.txt (on Windows)</span><br><br>dirs, file_name = os.path.split(p)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Directory:&quot;</span>, dirs)        <span class="hljs-comment"># Output: folder/subfolder</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;File Name:&quot;</span>, file_name)  <span class="hljs-comment"># Output: file.txt</span><br><br>file_suffix = os.path.splitext(file_name)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;File Name without Suffix:&quot;</span>, file_suffix[<span class="hljs-number">0</span>])  <span class="hljs-comment"># Output: file</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;File Suffix:&quot;</span>, file_suffix[<span class="hljs-number">1</span>])                <span class="hljs-comment"># Output: .txt</span><br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">folder/subfolder/file.txt<br>Directory: folder/subfolder<br>File Name: file.txt<br>File Name without Suffix: file<br>File Suffix: .txt<br></code></pre></td></tr></table></figure><h4 id="1-2-路径属性获取"><a href="#1-2-路径属性获取" class="headerlink" title="1.2 路径属性获取"></a>1.2 路径属性获取</h4><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td><code>os.path.basename(path)</code></td><td>返回文件名</td></tr><tr><td><code>os.path.dirname(path)</code></td><td>返回目录路径</td></tr><tr><td><code>os.path.getsize(path)</code></td><td>返回文件大小（字节）</td></tr><tr><td><code>os.path.getmtime(path)</code></td><td>返回 <em>path</em> 的最后修改时间。返回值是一个浮点数，为纪元秒数。如果文件不存在或不可访问，抛出 <code>OSError</code>异常</td></tr><tr><td><code>os.path.getatime(path)</code></td><td>返回 <em>path</em> 的最后访问时间。返回值是一个浮点数，为纪元秒数。如果文件不存在或不可访问，抛出 <code>OSError</code>异常</td></tr><tr><td><code>os.path.getctime(path)</code></td><td>返回 <em>path</em> 在系统中的 ctime，在有些系统（比如 Unix）上，它是元数据的最后修改时间，其他系统（比如 Windows）上，它是 <em>path</em> 的创建时间。返回值是一个数，为纪元秒数。如果文件不存在或不可访问，抛出 <code>OSError</code>异常</td></tr></tbody></table><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os.path<br><br>p = os.path.join(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-string">&quot;usr&quot;</span>, <span class="hljs-string">&quot;lib&quot;</span>, <span class="hljs-string">&quot;os-release&quot;</span>) <span class="hljs-comment"># 在 Linux 系统下，如果不加最前边的 / 会认为时一个相对路径</span><br><span class="hljs-built_in">print</span>(p)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;basename:&#x27;</span>, os.path.basename(p)) <span class="hljs-comment"># Output: os-release</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;dirname:&#x27;</span>, os.path.dirname(p))  <span class="hljs-comment"># Output: /usr/lib</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;getsize:&#x27;</span>, os.path.getsize(p))   <span class="hljs-comment"># Output: Size of the file in bytes (if it exists)</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;getmtime:&#x27;</span>, os.path.getmtime(p))  <span class="hljs-comment"># Output: Last modification time (if it exists)</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;getctime:&#x27;</span>, os.path.getctime(p))  <span class="hljs-comment"># Output: Creation time (if it exists)</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;getatime:&#x27;</span>, os.path.getatime(p))  <span class="hljs-comment"># Output: Last access time (if it exists)</span><br><br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs py">/usr/lib/os-release<br>basename: os-release<br>dirname: /usr/lib<br>getsize: <span class="hljs-number">400</span><br>getmtime: <span class="hljs-number">1754058071.0</span><br>getctime: <span class="hljs-number">1763369905.772618</span><br>getatime: <span class="hljs-number">1768869259.340991</span><br></code></pre></td></tr></table></figure><h4 id="1-3-存在性与类型检查"><a href="#1-3-存在性与类型检查" class="headerlink" title="1.3 存在性与类型检查"></a>1.3 存在性与类型检查</h4><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td><code>os.path.exists(path)</code></td><td>路径是否存在（文件或文件夹均可）</td></tr><tr><td><code>os.path.isfile(path)</code></td><td>是否为存在的文件</td></tr><tr><td><code>os.path.isdir(path)</code></td><td>是否为存在的目录</td></tr><tr><td><code>os.path.isabs(path)</code></td><td>是否为绝对路径</td></tr><tr><td><code>os.path.islink(path)</code></td><td>是否为符号链接</td></tr></tbody></table><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os.path<br><br><span class="hljs-comment"># 存在性与类型检查</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;exists:&#x27;</span>, os.path.exists(<span class="hljs-string">&#x27;test.py&#x27;</span>))  <span class="hljs-comment"># 检查文件或目录是否存在</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;isfile:&#x27;</span>, os.path.isfile(<span class="hljs-string">&#x27;test.py&#x27;</span>))  <span class="hljs-comment"># 检查是否为文件 true</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;isdir:&#x27;</span>, os.path.isdir(<span class="hljs-string">&#x27;test.py&#x27;</span>))    <span class="hljs-comment"># 检查是否为目录 false</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;isdir:&#x27;</span>, os.path.isdir(<span class="hljs-string">&#x27;/&#x27;</span>))    <span class="hljs-comment"># 检查是否为目录 true</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;isabs:&#x27;</span>, os.path.isabs(<span class="hljs-string">&#x27;test.py&#x27;</span>))    <span class="hljs-comment"># 检查是否为绝对路径 false</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;isabs:&#x27;</span>, os.path.isabs(<span class="hljs-string">&#x27;/usr/bin&#x27;</span>))    <span class="hljs-comment"># 检查是否为绝对路径 true</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;islink:&#x27;</span>, os.path.islink(<span class="hljs-string">&#x27;test.py&#x27;</span>))  <span class="hljs-comment"># 检查是否为符号链接</span><br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">exists: <span class="hljs-literal">True</span><br>isfile: <span class="hljs-literal">True</span><br>isdir: <span class="hljs-literal">False</span><br>isdir: <span class="hljs-literal">True</span><br>isabs: <span class="hljs-literal">False</span><br>isabs: <span class="hljs-literal">True</span><br>islink: <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><h4 id="1-4-路径规范化"><a href="#1-4-路径规范化" class="headerlink" title="1.4 路径规范化"></a>1.4 路径规范化</h4><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td><code>os.path.abspath(path)</code></td><td>将相对路径转换为绝对路径</td></tr><tr><td><code>os.path.normpath(path)</code></td><td>清理路径中冗余的分隔符和相对引用（如 <code>A/B/../C</code> 变为 <code>A/C</code>）</td></tr><tr><td><code>os.path.realpath(path)</code></td><td>返回真实路径，并解析所有的符号链接（Symbolic Links）</td></tr></tbody></table><ul><li><code>.</code>：指当前目录</li><li><code>..</code>：当前目录的父目录</li></ul><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os.path<br><br><span class="hljs-comment"># 路径规范化</span><br>path = <span class="hljs-string">&quot;folder/../folder2/file.txt&quot;</span><br>normalized_path = os.path.normpath(path)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Normalized Path: <span class="hljs-subst">&#123;normalized_path&#125;</span>&quot;</span>) <span class="hljs-comment"># 输出: folder2/file.txt</span><br><span class="hljs-comment"># 获取绝对路径</span><br>absolute_path = os.path.abspath(<span class="hljs-string">&quot;file.txt&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Absolute Path: <span class="hljs-subst">&#123;absolute_path&#125;</span>&quot;</span>) <span class="hljs-comment"># 输出: /当前工作目录/file.txt</span><br><br><span class="hljs-comment"># realpath</span><br>real_path = os.path.realpath(<span class="hljs-string">&quot;file.txt&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Real Path: <span class="hljs-subst">&#123;real_path&#125;</span>&quot;</span>) <span class="hljs-comment"># 输出: /当前工作目录/file.txt</span><br></code></pre></td></tr></table></figure><h4 id="1-5-跨平台"><a href="#1-5-跨平台" class="headerlink" title="1.5 跨平台"></a>1.5 跨平台</h4><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td><code>os.path.sep</code></td><td>当前系统的路径分隔符（Windows 是 <code>\</code>，Linux 是 <code>/</code>）</td></tr><tr><td><code>os.path.pathsep</code></td><td>环境变量分隔符（Windows 是 <code>;</code>，Linux 是 <code>:</code>）</td></tr></tbody></table><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os.path<br><br><span class="hljs-comment"># 跨平台</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;sep&#x27;</span>, os.path.sep)  <span class="hljs-comment"># 路径分隔符 Linux &#x27;/&#x27;; Windows &#x27;\&#x27;</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;pathsep&#x27;</span>, os.path.pathsep)  <span class="hljs-comment"># 环境变量路径分隔符 Linux &#x27;:&#x27;; Windows &#x27;;&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="2-pathlib"><a href="#2-pathlib" class="headerlink" title="2. pathlib"></a>2. pathlib</h3><p><code>pathlib</code> 是 Python 3.4+ 引入的标准库，旨在提供一种面向对象的方式来处理文件系统路径。它不仅涵盖了 <code>os.path</code> 的所有功能，还整合了 <code>os</code> 模块中关于文件操作（如创建目录、重命名等）的常用方法。</p><p><strong>为什么选择 pathlib？</strong></p><ul><li><strong>面向对象</strong>: 路径不再是字符串，而是具有丰富属性和方法的对象。</li><li><strong>语法简洁</strong>: 使用 <code>/</code> 运算符拼接路径，替代了冗长的 <code>os.path.join()</code>。</li><li><strong>链式操作</strong>: 可以通过 <code>path.parent.parent</code> 这种方式轻松获取上级目录。</li><li><strong>内置操作</strong>: 无需调用 <code>open()</code> 即可完成简单的文件读写。</li></ul><p>为适用不同的操作系统，<code>pathlib</code>将路径类按照 <strong>纯路径</strong> 和 <strong>具体路径</strong> 划分，其中纯路径仅提供计算操作；而具体路径是从纯路径继承而来，在提供计算操作的基础上提供了对 I&#x2F;O 的操作。</p><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/pathlib-inheritance.png" alt="继承关系图"></p><h4 id="2-1-纯路径-Pure-Paths"><a href="#2-1-纯路径-Pure-Paths" class="headerlink" title="2.1 纯路径 (Pure Paths)"></a>2.1 纯路径 (Pure Paths)</h4><p>纯路径类（<code>PurePath</code>）只提供<strong>计算操作</strong>，不涉及实际的 I&#x2F;O 操作（不访问硬盘）。你可以在 Linux 系统上定义一个 Windows 格式的纯路径，这在处理路径字符串时非常有用。</p><ul><li><strong><code>PurePath</code></strong>: 通用基类。</li><li><strong><code>PureWindowsPath</code></strong>: 专门处理 Windows 风格路径（使用 <code>\</code>）。</li><li><strong><code>PurePosixPath</code></strong>: 专门处理 Unix&#x2F;Linux&#x2F;macOS 风格路径（使用 <code>/</code>）。</li></ul><h4 id="2-2-具体路径-Concrete-Paths"><a href="#2-2-具体路径-Concrete-Paths" class="headerlink" title="2.2 具体路径 (Concrete Paths)"></a>2.2 具体路径 (Concrete Paths)</h4><p>具体路径类（<code>Path</code>）继承自纯路径，除了计算功能外，还可以<strong>执行系统调用</strong>（如创建文件、检查是否存在、读取内容）。</p><ul><li><strong><code>Path</code></strong>: 最常用的类。在实例化时，它会自动根据你的操作系统生成 <code>WindowsPath</code> 或 <code>PosixPath</code>。</li><li><strong><code>WindowsPath</code></strong>: Windows 系统下的具体路径。</li><li><strong><code>PosixPath</code></strong>: Unix&#x2F;Linux&#x2F;macOS 系统下的具体路径。</li></ul><blockquote><p><strong>注意</strong>：你不能在 Linux 上实例化 <code>WindowsPath</code>（会报错<code>NotImplementedError: cannot instantiate &#39;WindowsPath&#39; on your system</code>），但你可以实例化 <code>PureWindowsPath</code></p></blockquote><p>上边巴拉巴拉一大堆，但是在日常使用中，基本上直接使用 <code>from pathlib import Path</code>就足够满足对路径的操作和操作系统的访问。</p><h4 id="2-3-主要API"><a href="#2-3-主要API" class="headerlink" title="2.3 主要API"></a>2.3 主要API</h4><h5 id="2-3-1-路径拆解与属性-与-os-path-对标"><a href="#2-3-1-路径拆解与属性-与-os-path-对标" class="headerlink" title="2.3.1 路径拆解与属性 (与 os.path 对标)"></a>2.3.1 路径拆解与属性 (与 os.path 对标)</h5><table><thead><tr><th>API (属性&#x2F;方法)</th><th>描述</th><th>对应 os.path</th></tr></thead><tbody><tr><td><code>p.name</code></td><td>获取完整文件名（带后缀）</td><td><code>os.path.basename()</code></td></tr><tr><td><code>p.stem</code></td><td>获取文件名（不带后缀）</td><td><code>os.path.splitext()[0]</code></td></tr><tr><td><code>p.suffix</code></td><td>获取文件后缀（如 <code>.py</code>）</td><td><code>os.path.splitext()[1]</code></td></tr><tr><td><code>p.suffixes</code></td><td>获取层级后缀列表（如 <code>[&#39;.tar&#39;, &#39;.gz&#39;]</code>）</td><td>-</td></tr><tr><td><code>p.parent</code></td><td>获取父目录路径对象</td><td><code>os.path.dirname()</code></td></tr><tr><td><code>p.parents</code></td><td>获取所有上级目录的序列（迭代器）,</td><td>-</td></tr><tr><td><code>p.anchor</code></td><td>获取路径的根部分或驱动器号</td><td>-</td></tr><tr><td><code>p.parts</code></td><td>将路径拆分为各级目录组成的元组</td><td>-</td></tr></tbody></table><p><strong>示例：</strong></p><p>演示路径：<code>/home/probie/workspace/python/base-python/test.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path<br><br><span class="hljs-comment"># 路径拆解与属性</span><br>p = Path(<span class="hljs-string">&#x27;/home/duwei/workspace/python/base-python/test.py&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;name: &#x27;</span>, p.name)  <span class="hljs-comment"># name:  test.py</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;stem: &#x27;</span>, p.stem) <span class="hljs-comment"># stem:  test</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;suffix: &#x27;</span>, p.suffix) <span class="hljs-comment"># suffix:  .py</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;suffixes: &#x27;</span>, p.suffixes) <span class="hljs-comment"># suffixes:  [&#x27;.py&#x27;]</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;parent: &#x27;</span>, p.parent)  <span class="hljs-comment"># parent:  /home/duwei/workspace/python/base-python</span><br><span class="hljs-keyword">for</span> parent <span class="hljs-keyword">in</span> p.parents:  <span class="hljs-comment"># parents: 逐层返回上层父级目录</span><br>    <span class="hljs-built_in">print</span>(parent)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;parents: &#x27;</span>, p.parents) <span class="hljs-comment"># parents: &lt;PosixPath.parents&gt;</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;anchor: &#x27;</span>, p.anchor) <span class="hljs-comment"># anchor:  /</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;parts: &#x27;</span>, p.parts)  <span class="hljs-comment"># parts:  (&#x27;/&#x27;, &#x27;home&#x27;, &#x27;duwei&#x27;, &#x27;workspace&#x27;, &#x27;python&#x27;, &#x27;base-python&#x27;, &#x27;test.py&#x27;)</span><br><br></code></pre></td></tr></table></figure><h5 id="2-3-2-路径转换与拼接"><a href="#2-3-2-路径转换与拼接" class="headerlink" title="2.3.2 路径转换与拼接"></a>2.3.2 路径转换与拼接</h5><table><thead><tr><th>API</th><th>描述</th><th>对应 os.path</th></tr></thead><tbody><tr><td><code>p1 / p2</code></td><td>使用 <code>/</code> 运算符拼接路径</td><td><code>os.path.join()</code></td></tr><tr><td><code>p.joinpath(*parts)</code></td><td>拼接多个路径部分</td><td><code>os.path.join()</code></td></tr><tr><td><code>p.absolute()</code></td><td>获取绝对路径</td><td><code>os.path.abspath()</code></td></tr><tr><td><code>p.resolve()</code></td><td>获取真实路径（解析符号链接和 <code>..</code>）</td><td><code>os.path.realpath()</code></td></tr></tbody></table><p><strong>特别说明：<code>/</code> 运算符 vs <code>joinpath()</code></strong></p><p>两者都用于拼接，但应用场景有所不同：</p><ol><li><p><strong><code>/</code> 运算符</strong>：</p><ul><li><strong>语法更直观</strong>，类似于命令行中的路径表示，使用起来相对简洁且符合我们对路径的层级认识</li><li>要求至少左侧的对象是一个 <code>Path</code> 对象</li><li>跨平台适用</li><li><strong>示例</strong>：<code>Path(&quot;/usr&quot;) / &quot;bin&quot; / &quot;python3&quot;</code></li></ul></li><li><p><strong><code>joinpath()</code> 方法</strong>：</p><ul><li><strong>更适合动态参数</strong>，因为它接受可变参数（<code>*args</code>）。如果你有一个包含多个路径部分的列表或元组，使用它会更方便。</li><li><strong>示例</strong>：<code>p.joinpath(*directories_list)</code></li></ul></li></ol><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path<br><br><span class="hljs-comment"># 路径转换与拼接</span><br>base_path = Path(<span class="hljs-string">&quot;/home/.././probie&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;base_path:&#x27;</span>, base_path) <span class="hljs-comment"># base_path: .</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;absolute():&#x27;</span>, base_path.absolute()) <br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;resolve():&#x27;</span>, base_path.resolve())<br><br>p1 = base_path / <span class="hljs-string">&quot;test.py&quot;</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;p1:&#x27;</span>, p1)<br><br>ps = [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>]<br>p2 = base_path.joinpath(*ps)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;p2:&#x27;</span>, p2)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">base_path: /home/../probie<br>absolute(): /home/../probie<br>resolve(): /probie<br>p1: /home/../probie/test.py<br>p2: /home/../probie/a/b/c<br></code></pre></td></tr></table></figure><h5 id="2-3-3-状态检查与查询"><a href="#2-3-3-状态检查与查询" class="headerlink" title="2.3.3 状态检查与查询"></a>2.3.3 状态检查与查询</h5><table><thead><tr><th>API</th><th>描述</th><th>对应模块</th></tr></thead><tbody><tr><td><code>p.exists()</code></td><td>检查路径是否存在</td><td><code>os.path.exists()</code></td></tr><tr><td><code>p.is_file()</code></td><td>是否为存在的文件</td><td><code>os.path.isfile()</code></td></tr><tr><td><code>p.is_dir()</code></td><td>是否为存在的目录</td><td><code>os.path.isdir()</code></td></tr><tr><td><code>p.is_symlink()</code></td><td>是否为符号链接（软链接）</td><td><code>os.path.islink()</code></td></tr><tr><td><code>p.is_absolute()</code></td><td>是否为绝对路径</td><td><code>os.path.isabs()</code></td></tr><tr><td><code>p.is_mount()</code></td><td>是否为挂载点（Unix&#x2F;Linux）</td><td><code>os.path.ismount()</code></td></tr><tr><td><code>p.stat()</code></td><td>获取文件状态（大小、修改时间等）</td><td><code>os.stat()</code></td></tr><tr><td><code>p.owner()</code></td><td>获取文件所有者用户名</td><td>-</td></tr><tr><td><code>p.group()</code></td><td>获取文件所属组名</td><td>-</td></tr></tbody></table><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path<br><br><span class="hljs-comment"># 状态检查与查询</span><br>p = Path(<span class="hljs-string">&#x27;/usr/lib/os-release&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;exists: &#x27;</span>, p.exists()) <br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;is_file: &#x27;</span>, p.is_file())<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;is_dir: &#x27;</span>, p.is_dir())<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;is_symlink: &#x27;</span>, p.is_symlink())<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;is_absolute: &#x27;</span>, p.is_absolute())<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;is_mount: &#x27;</span>, p.is_mount())<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;stat: &#x27;</span>, p.stat())<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;owner: &#x27;</span>, p.owner())<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;group: &#x27;</span>, p.group())<br><br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">exists:  <span class="hljs-literal">True</span><br>is_file:  <span class="hljs-literal">True</span><br>is_dir:  <span class="hljs-literal">False</span><br>is_symlink:  <span class="hljs-literal">False</span><br>is_absolute:  <span class="hljs-literal">True</span><br>is_mount:  <span class="hljs-literal">False</span><br>stat:  os.stat_result(st_mode=<span class="hljs-number">33188</span>, st_ino=<span class="hljs-number">526106</span>, st_dev=<span class="hljs-number">66313</span>, st_nlink=<span class="hljs-number">1</span>, st_uid=<span class="hljs-number">0</span>, st_gid=<span class="hljs-number">0</span>, st_size=<span class="hljs-number">400</span>, st_atime=<span class="hljs-number">1768955877</span>, st_mtime=<span class="hljs-number">1754058071</span>, st_ctime=<span class="hljs-number">1763369905</span>)<br>owner:  root<br>group:  root<br></code></pre></td></tr></table></figure><h5 id="2-3-4-文件系统操作"><a href="#2-3-4-文件系统操作" class="headerlink" title="2.3.4 文件系统操作"></a>2.3.4 文件系统操作</h5><table><thead><tr><th>API</th><th>描述</th></tr></thead><tbody><tr><td><code>p.mkdir(mode=0x777,parents=False, exist_ok=False)</code></td><td>创建目录,mode指定目录权限，parents找不到父级目录是否抛出异常，exist_ok在目录存在的情况下是否抛出异常</td></tr><tr><td><code>p.unlink()</code></td><td>删除文件</td></tr><tr><td><code>p.rmdir()</code></td><td>删除空目录</td></tr><tr><td><code>p.rename(target)</code></td><td>重命名文件或目录</td></tr><tr><td><code>p.touch()</code></td><td>创建空文件</td></tr></tbody></table><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path<br><br><span class="hljs-comment">#  文件系统操作 示例</span><br>base_path = Path.cwd()<br><span class="hljs-comment"># mkdir() 创建目录</span><br>target_path = base_path / <span class="hljs-string">&#x27;test&#x27;</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;before mkdir is test dir exists?&#x27;</span>, target_path.is_dir())<br>target_path.mkdir(mode=<span class="hljs-number">0x666</span>)<br><span class="hljs-comment"># 检测 test 目录是否存在</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;after mkdir is test dir exists?&#x27;</span>, target_path.is_dir())<br><span class="hljs-comment"># 获取 test 目录的权限信息</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;test dir mode:&#x27;</span>, target_path.stat().st_mode)<br><br><span class="hljs-comment"># 删除 test 目录</span><br>target_path.rmdir()<br><span class="hljs-comment"># 再次检测目录是否存在</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;after rmdir is test dir exists?&#x27;</span>, target_path.is_dir())<br><br><span class="hljs-comment"># touch() 创建文件</span><br>f_p = base_path / <span class="hljs-string">&#x27;test.txt&#x27;</span><br>f_p.touch()<br><span class="hljs-comment"># 检测文件是否存在</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;after touch is test.txt exists?&#x27;</span>, f_p.exists())<br><span class="hljs-comment"># rename() 重命名</span><br>target_path = base_path / <span class="hljs-string">&#x27;test2.txt&#x27;</span><br>f_p.rename(target_path)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;after rename is test2.txt exists?&#x27;</span>, target_path.exists())<br><span class="hljs-comment"># unlink() 删除文件</span><br>target_path.unlink()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;after unlink is test2.txt exists?&#x27;</span>, target_path.exists())<br><br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">before mkdir <span class="hljs-keyword">is</span> test <span class="hljs-built_in">dir</span> exists? <span class="hljs-literal">False</span><br>after mkdir <span class="hljs-keyword">is</span> test <span class="hljs-built_in">dir</span> exists? <span class="hljs-literal">True</span><br>test <span class="hljs-built_in">dir</span> mode: <span class="hljs-number">16996</span><br>after rmdir <span class="hljs-keyword">is</span> test <span class="hljs-built_in">dir</span> exists? <span class="hljs-literal">False</span><br>after touch <span class="hljs-keyword">is</span> test.txt exists? <span class="hljs-literal">True</span><br>after rename <span class="hljs-keyword">is</span> test2.txt exists? <span class="hljs-literal">True</span><br>after unlink <span class="hljs-keyword">is</span> test2.txt exists? <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><h5 id="2-3-5-路径修改"><a href="#2-3-5-路径修改" class="headerlink" title="2.3.5 路径修改"></a>2.3.5 路径修改</h5><table><thead><tr><th>API</th><th>描述</th></tr></thead><tbody><tr><td><code>p.with_name(name)</code></td><td>替换文件名和后缀</td></tr><tr><td><code>p.with_stem(stem)</code></td><td>替换文件名（保留原后缀）</td></tr><tr><td><code>p.with_suffix(suffix)</code></td><td>替换后缀名</td></tr><tr><td><code>p.with_segments(*parts)</code></td><td>使用给定的片段创建一个新的路径对象</td></tr></tbody></table><p><em>对Path对象的修改，即使路径不存在也不会发生错误，因为它不会和真实的操作系统交互</em></p><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path<br><br>original = Path(<span class="hljs-string">&#x27;/home/user/report.docx&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;原始文件: <span class="hljs-subst">&#123;original&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># 场景1：生成临时文件路径（改名）</span><br>temp_file = original.with_name(original.stem + <span class="hljs-string">&quot;_temp&quot;</span> + original.suffix)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;临时文件: <span class="hljs-subst">&#123;temp_file&#125;</span>&quot;</span>) <span class="hljs-comment"># /home/user/report_temp.docx</span><br><br><span class="hljs-comment"># 场景2：转换格式（改后缀）</span><br>pdf_version = original.with_suffix(<span class="hljs-string">&#x27;.pdf&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;PDF版本: <span class="hljs-subst">&#123;pdf_version&#125;</span>&quot;</span>) <span class="hljs-comment"># /home/user/report.pdf</span><br><br><span class="hljs-comment"># 场景3：只改文件名不改后缀 </span><br>new_stem = original.with_stem(<span class="hljs-string">&#x27;final_analysis&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;更名后: <span class="hljs-subst">&#123;new_stem&#125;</span>&quot;</span>)    <span class="hljs-comment"># /home/user/final_analysis.docx</span><br><br><span class="hljs-comment"># with_segments</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;创建性对象：&#x27;</span>, original.with_segments(*[<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-string">&#x27;tmp&#x27;</span>, <span class="hljs-string">&#x27;report.xlsx&#x27;</span>]))<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">原始文件: /home/user/report.docx<br>临时文件: /home/user/report_temp.docx<br>PDF版本: /home/user/report.pdf<br>更名后: /home/user/final_analysis.docx<br>创建性对象： /tmp/report.xlsx<br></code></pre></td></tr></table></figure><h5 id="2-3-6-移动和复制"><a href="#2-3-6-移动和复制" class="headerlink" title="2.3.6 移动和复制"></a>2.3.6 移动和复制</h5><blockquote><p>Python 3.14 版本添加</p></blockquote><table><thead><tr><th>API</th><th>描述</th></tr></thead><tbody><tr><td><code>Path.copy(target,  follow_symlinks=True, preserve_metadata=False)</code></td><td>将此文件或目录树拷贝到给定的 <em>target</em>，并返回一个指向 <em>target</em> 的新的 <code>Path</code> 实例。<br>如果源文件是一个文件，则如果目标文件是一个已存在的文件，则目标文件将被替换。如果源是一个符号链接，并且 <em>follow_symlinks</em> 为true（默认值），则复制该符号链接的目标。否则，将在目的地重新创建符号链接。<br>如果 <em>preserve_metadata</em> 为false（默认值），则只保证复制目录结构和文件数据。将 <em>preserve_metadata</em> 设置为true，以确保在支持的地方复制文件和目录权限、标志、最后访问和修改时间以及扩展属性。此参数在Windows上复制文件时不起作用（会始终保留元数据）。</td></tr><tr><td><code>Path.move(target)</code></td><td>将此文件或目录树移动到给定的 <em>target</em>，并返回一个指向 <em>target</em> 的新的 <code>Path</code> 实例。<br>如果 <em>target</em> 不存在，它将被创建。 如果该路径和 <em>target</em> 都是现有文件，则覆盖目标。 如果两个路径都指向相同的文件或目录，或者 <em>target</em> 是非空目录，则引发 <code>OSError</code></td></tr></tbody></table><p><em>在操作系统和文件系统支持的情况下，copy方法执行轻量级复制，数据块仅在被修改时才会被复制。这就是所谓的写时复制。</em></p><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path<br><br>base_path = Path(<span class="hljs-string">&#x27;test.txt&#x27;</span>)<br><br><span class="hljs-comment"># before copy check test_copy.txt is exists</span><br>target_path = Path(<span class="hljs-string">&#x27;test_copy.txt&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;before copy , is test_copy.txt exists:&#x27;</span>, target_path.exists())<br><br><span class="hljs-comment"># copy() 复制</span><br>base_path.copy(target_path)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;after copy , is test_copy.txt exists:&#x27;</span>, target_path.exists())<br><br><span class="hljs-comment"># move() 移动</span><br>target_path = Path(<span class="hljs-string">&#x27;test_move.txt&#x27;</span>)<br>base_path.move(target_path)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;after move , is test_move.txt exists:&#x27;</span>, target_path.exists())<br><br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">before</span> <span class="hljs-keyword">copy</span> , <span class="hljs-keyword">is</span> test_copy.txt <span class="hljs-keyword">exists</span>: <span class="hljs-keyword">False</span><br><span class="hljs-keyword">after</span> <span class="hljs-keyword">copy</span> , <span class="hljs-keyword">is</span> test_copy.txt <span class="hljs-keyword">exists</span>: <span class="hljs-keyword">True</span><br><span class="hljs-keyword">after</span> <span class="hljs-keyword">move</span> , <span class="hljs-keyword">is</span> test_move.txt <span class="hljs-keyword">exists</span>: <span class="hljs-keyword">True</span><br></code></pre></td></tr></table></figure><p>文件 <code>test.txt</code>变化顺序：</p><ul><li>复制生成 <code>test_copy.txt</code> ,此时同时存在 <code>test.txt</code> 和 <code>test_copy.txt</code></li><li>移动<code>test.txt</code>，此时生成 <code>test_move.txt</code>，移动后文件变为 <code>test_copy.txt</code> 和 <code>test_move.txt</code></li></ul><h5 id="2-3-7-读取目录"><a href="#2-3-7-读取目录" class="headerlink" title="2.3.7 读取目录"></a>2.3.7 读取目录</h5><p>测试目录结构：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">a</span><br>├── <span class="hljs-selector-tag">b</span><br>│   ├── c<br>│   │   ├── d<br>│   │   │   ├── <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.txt</span><br>│   │   │   ├── <span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.log</span><br>│   │   │   └── C<span class="hljs-selector-class">.py</span><br>│   │   ├── d1<br>│   │   ├── d1<span class="hljs-selector-class">.log</span><br>│   │   ├── d2<br>│   │   ├── d2<span class="hljs-selector-class">.txt</span><br>│   │   └── D3<span class="hljs-selector-class">.py</span><br>│   ├── c1<br>│   ├── c1<span class="hljs-selector-class">.txt</span><br>│   ├── c2<br>│   ├── c2<span class="hljs-selector-class">.log</span><br>│   └── C2<span class="hljs-selector-class">.py</span><br>├── b1<br>├── b1<span class="hljs-selector-class">.txt</span><br>├── b2<br>├── b2<span class="hljs-selector-class">.log</span><br>├── B3<span class="hljs-selector-class">.py</span><br>└── C4.PY<br></code></pre></td></tr></table></figure><table><thead><tr><th>API</th><th>描述</th></tr></thead><tbody><tr><td><code>path.iterdir()</code></td><td>列出当前路径下的直接（不递归）目录和文件，不包括特殊条目 <code>&#39;.&#39;</code> 和 <code>&#39;..&#39;</code>。</td></tr><tr><td><code>path.glob(匹配模式，case_sensitive=None)</code></td><td><code>case_sensitive</code>大小写敏感，默认按照平台规则，<code>Windows</code>系统不区分，使用<code>**</code>递归匹配</td></tr><tr><td><code>path.rglob(匹配模式，case_sensitive=None)</code></td><td>递归查找子目录，类似于 <code>glob(&#39;**/xxx&#39;)</code></td></tr><tr><td><code>path.walk()</code></td><td>自上而下遍历目录树，返回一个三元组 <code>(dirpath, dirnames, filenames)</code>；默认情况，遇到错误会忽略，可以通过<code>on_error</code>指定一个回调函数<br><em><code>dirpath</code></em> 是指向当前正被遍历到的目录的<code>Path</code><br>*<code>dirnames</code><em>存储<code>dirpath</code>路径下所有直接子目录的字符串名称<br></em><code>filenames</code>*存储<code>dirpath</code>路径下所有非目录的字符串名称</td></tr></tbody></table><p><strong>iterdir示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path<br><br>base_path = Path(<span class="hljs-string">&#x27;a&#x27;</span>)<br><span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> base_path.iterdir():<br>    <span class="hljs-built_in">print</span>(child)<br>    <br><span class="hljs-comment"># 输出</span><br>a/b2<br>a/b<br>a/b1<br>a/b1.txt<br>a/B3.py<br>a/b2.log<br></code></pre></td></tr></table></figure><p><strong>glob示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path<br><br>base_path = Path(<span class="hljs-string">&#x27;a&#x27;</span>)<br><br><span class="hljs-comment"># 不递归子目录，大小写依赖平台默认</span><br>py_files = base_path.glob(<span class="hljs-string">&#x27;*.py&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(py_files))  <span class="hljs-comment"># B3.py</span><br><br><span class="hljs-comment"># 不递归子目录，大小写不依赖平台</span><br>py_files = base_path.glob(<span class="hljs-string">&#x27;*.py&#x27;</span>, case_sensitive=<span class="hljs-literal">False</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(py_files)) <span class="hljs-comment"># B3.py C4.PY</span><br><br><span class="hljs-comment"># 递归子目录，大小写依赖平台默认</span><br>py_files = base_path.glob(<span class="hljs-string">&#x27;**/*.py&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(py_files)) <span class="hljs-comment"># a/B3.py a/b/C2.py a/b/c/D3.py a/b/c/d/C.py</span><br></code></pre></td></tr></table></figure><p><strong>rglob示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path<br><br>base_path = Path(<span class="hljs-string">&#x27;a&#x27;</span>)<br><br><span class="hljs-comment"># 递归子目录，大小写不敏感</span><br><span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> base_path.rglob(<span class="hljs-string">&#x27;*.py&#x27;</span>, case_sensitive=<span class="hljs-literal">False</span>):<br>    <span class="hljs-built_in">print</span>(file)<br>    <br><span class="hljs-comment"># 输出</span><br>a/B3.py<br>a/C4.PY<br>a/b/C2.py<br>a/b/c/D3.py<br>a/b/c/d/C.py<br></code></pre></td></tr></table></figure><p><strong>walk示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path<br><br>base_path = Path(<span class="hljs-string">&#x27;a&#x27;</span>)<br><br><span class="hljs-comment"># walk</span><br><span class="hljs-keyword">for</span> dirpath, dirnames, filenames <span class="hljs-keyword">in</span> base_path.walk():<br>    <span class="hljs-built_in">print</span>(dirpath, dirnames, filenames)<br>    <br><span class="hljs-comment"># 输出</span><br>a [<span class="hljs-string">&#x27;b2&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;b1&#x27;</span>] [<span class="hljs-string">&#x27;b1.txt&#x27;</span>, <span class="hljs-string">&#x27;B3.py&#x27;</span>, <span class="hljs-string">&#x27;C4.PY&#x27;</span>, <span class="hljs-string">&#x27;b2.log&#x27;</span>]<br>a/b2 [] []<br>a/b [<span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;c1&#x27;</span>, <span class="hljs-string">&#x27;c2&#x27;</span>] [<span class="hljs-string">&#x27;c2.log&#x27;</span>, <span class="hljs-string">&#x27;C2.py&#x27;</span>, <span class="hljs-string">&#x27;c1.txt&#x27;</span>]<br>a/b/c [<span class="hljs-string">&#x27;d&#x27;</span>, <span class="hljs-string">&#x27;d2&#x27;</span>, <span class="hljs-string">&#x27;d1&#x27;</span>] [<span class="hljs-string">&#x27;d1.log&#x27;</span>, <span class="hljs-string">&#x27;D3.py&#x27;</span>, <span class="hljs-string">&#x27;d2.txt&#x27;</span>]<br>a/b/c/d [] [<span class="hljs-string">&#x27;C.py&#x27;</span>, <span class="hljs-string">&#x27;b.log&#x27;</span>, <span class="hljs-string">&#x27;a.txt&#x27;</span>]<br>a/b/c/d2 [] []<br>a/b/c/d1 [] []<br>a/b/c1 [] []<br>a/b/c2 [] []<br>a/b1 [] []<br></code></pre></td></tr></table></figure><h3 id="3-对比"><a href="#3-对比" class="headerlink" title="3. 对比"></a>3. 对比</h3><p><code>pathlib</code>模块中涵盖了 <code>os</code> 和 <code>os.path</code> 的大部分核心功能，但它们并非完全的替代关系。那么在实际项目开发中，我们应该如何选择呢？</p><ul><li>新项目，对于路径的操作优先选择 <code>pathlib</code>，使用 <code>from pathlib import Path</code>，涉及到底层<code>os</code>级别的，<code>pathlib</code>未提供的用<code>os</code>处理路径之外的系统交互</li><li>已有项目兼容，<strong>Path 对象转字符串</strong>：直接调用 <code>str(path_obj)</code>，<strong>字符串转 Path 对象</strong>：直接 <code>Path(str_path)</code></li></ul><p><code>pathlib</code>对<code>os</code>和<code>os.path</code>模块功能的映射表：</p><table><thead><tr><th align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#module-os"><code>os</code></a> 和 <a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#module-os.path"><code>os.path</code></a></th><th align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#module-pathlib"><code>pathlib</code></a></th></tr></thead><tbody><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.dirname"><code>os.path.dirname()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.PurePath.parent"><code>PurePath.parent</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.basename"><code>os.path.basename()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.PurePath.name"><code>PurePath.name</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.splitext"><code>os.path.splitext()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.PurePath.stem"><code>PurePath.stem</code></a>, <a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.PurePath.suffix"><code>PurePath.suffix</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.join"><code>os.path.join()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.PurePath.joinpath"><code>PurePath.joinpath()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.isabs"><code>os.path.isabs()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.PurePath.is_absolute"><code>PurePath.is_absolute()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.relpath"><code>os.path.relpath()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.PurePath.relative_to"><code>PurePath.relative_to()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.expanduser"><code>os.path.expanduser()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.expanduser"><code>Path.expanduser()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.realpath"><code>os.path.realpath()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.resolve"><code>Path.resolve()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.abspath"><code>os.path.abspath()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.absolute"><code>Path.absolute()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.exists"><code>os.path.exists()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.exists"><code>Path.exists()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.isfile"><code>os.path.isfile()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.is_file"><code>Path.is_file()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.isdir"><code>os.path.isdir()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.is_dir"><code>Path.is_dir()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.islink"><code>os.path.islink()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.is_symlink"><code>Path.is_symlink()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.isjunction"><code>os.path.isjunction()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.is_junction"><code>Path.is_junction()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.ismount"><code>os.path.ismount()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.is_mount"><code>Path.is_mount()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.path.html#os.path.samefile"><code>os.path.samefile()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.samefile"><code>Path.samefile()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.getcwd"><code>os.getcwd()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.cwd"><code>Path.cwd()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.stat"><code>os.stat()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.stat"><code>Path.stat()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.lstat"><code>os.lstat()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.lstat"><code>Path.lstat()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.listdir"><code>os.listdir()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.iterdir"><code>Path.iterdir()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.walk"><code>os.walk()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.walk"><code>Path.walk()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.mkdir"><code>os.mkdir()</code></a>, <a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.makedirs"><code>os.makedirs()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.mkdir"><code>Path.mkdir()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.link"><code>os.link()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.hardlink_to"><code>Path.hardlink_to()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.symlink"><code>os.symlink()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.symlink_to"><code>Path.symlink_to()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.readlink"><code>os.readlink()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.readlink"><code>Path.readlink()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.rename"><code>os.rename()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.rename"><code>Path.rename()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.replace"><code>os.replace()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.replace"><code>Path.replace()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.remove"><code>os.remove()</code></a>, <a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.unlink"><code>os.unlink()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.unlink"><code>Path.unlink()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.rmdir"><code>os.rmdir()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.rmdir"><code>Path.rmdir()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.chmod"><code>os.chmod()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.chmod"><code>Path.chmod()</code></a></td></tr><tr><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/os.html#os.lchmod"><code>os.lchmod()</code></a></td><td align="left"><a href="https://docs.python.org/zh-cn/3.14/library/pathlib.html#pathlib.Path.lchmod"><code>Path.lchmod()</code></a></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python常用内置数据类型API示例</title>
    <link href="/python/inner_data_type_api.html"/>
    <url>/python/inner_data_type_api.html</url>
    
    <content type="html"><![CDATA[<h2 id="一、文本字符串"><a href="#一、文本字符串" class="headerlink" title="一、文本字符串"></a>一、文本字符串</h2><p>在 Python 中处理文本数据是使用 <a href="https://docs.python.org/zh-cn/3.14/library/stdtypes.html#str"><code>str</code></a> 对象，也称为 <em>字符串</em>。</p><p>字符串字面值有多种不同的写法：</p><ul><li>单引号: <code>&#39;允许包含有 &quot;双&quot; 引号&#39;</code></li><li>双引号: <code>&quot;允许嵌入 &#39;单&#39; 引号&quot;</code></li><li>三重引号: <code>&#39;&#39;&#39;三重单引号&#39;&#39;&#39;</code>, <code>&quot;&quot;&quot;三重双引号&quot;&quot;&quot;</code>，使用三重引号的字符串可以跨越多行 —— 其中所有的空白字符都将包含在该字符串字面值中。</li></ul><p>在<code>Python</code>中没有强制要求使用哪种，建议整体风格上统一，或者字符串本身包含单引号或者双引号时，选择一个合适的。</p><table><thead><tr><th>场景</th><th>推荐使用</th></tr></thead><tbody><tr><td>字符串内部包含单引号 (<code>&#39;</code>)</td><td>用双引号包裹 (<code>&quot;…&quot;</code>)</td></tr><tr><td>字符串内部包含双引号 (<code>&quot;</code>)</td><td>用单引号包裹 (<code>&#39;…&#39;</code>)</td></tr><tr><td>字符串两侧都不包含引号</td><td>个人&#x2F;项目习惯，建议整体上风格统一</td></tr><tr><td>多行文本 &#x2F; 文档字符串</td><td>用 <strong>三引号</strong> (<code>&quot;&quot;&quot;…&quot;&quot;&quot;</code> 或 <code>&#39;&#39;&#39;…&#39;&#39;&#39;</code>)（常用三重双引号用于 docstrings）</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">a = <span class="hljs-string">&#x27;a&#x27;</span><br>b = <span class="hljs-string">&quot;b&quot;</span><br>c = <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    This </span><br><span class="hljs-string">    is </span><br><span class="hljs-string">    a multi-line </span><br><span class="hljs-string">    string</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="1、字符串前缀"><a href="#1、字符串前缀" class="headerlink" title="1、字符串前缀"></a>1、字符串前缀</h3><p>字符串字面量可以有一个可选的 <em>前缀</em>，该前缀会影响字面量内容的解析方式，例如:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">b&quot;data&quot;</span><br><span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;result=&#125;</span>&#x27;</span><br></code></pre></td></tr></table></figure><p>允许的前缀有:</p><ul><li><code>b</code>: 字节串字面量</li><li><code>r</code>: 原始字符串</li><li><code>f</code>: 格式字符串字面量(“f-string”)</li></ul><p>前缀不区分大小写（例如，’<code>B</code>‘ 与 ‘<code>b</code>‘ 效果相同）。</p><h4 id="1-1-字节串字面量"><a href="#1-1-字节串字面量" class="headerlink" title="1.1 字节串字面量"></a>1.1 字节串字面量</h4><p><em>字节串字面值</em> 总是带有 ‘<code>b</code>‘ 或 ‘<code>B</code>‘ 前缀；它们会产生 <a href="https://docs.python.org/zh-cn/3.14/library/stdtypes.html#bytes"><code>bytes</code></a> 类型而不是 <a href="https://docs.python.org/zh-cn/3.14/library/stdtypes.html#str"><code>str</code></a> 类型的实例。 它们只能包含 ASCII 字符；数值为 128 或以上的字节必须使用转义序列来表示 (通常为 <a href="https://docs.python.org/zh-cn/3.14/reference/lexical_analysis.html#string-escape-hex">十六进制字符</a> 或 <a href="https://docs.python.org/zh-cn/3.14/reference/lexical_analysis.html#string-escape-oct">八进制字符</a>)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">s = <span class="hljs-string">b&#x27;\x89PNG\r\n\x1a\n&#x27;</span><br><br><span class="hljs-built_in">print</span>(s)          <span class="hljs-comment"># b&#x27;\x89PNG\r\n\x1a\n&#x27;</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(s))   <span class="hljs-comment"># &lt;class &#x27;bytes&#x27;&gt;</span><br></code></pre></td></tr></table></figure><h4 id="1-2-原始字符串"><a href="#1-2-原始字符串" class="headerlink" title="1.2 原始字符串"></a>1.2 原始字符串</h4><p>字符串可以选择带有字符 ‘<code>r</code>‘ 或 ‘<code>R</code>‘ 作为前缀,这样的构造称为 <em>原始字符串字面值</em> ，它会将反斜杠视为字面字符。 简而言之就是使用<code>r</code>或<code>R</code>作为前缀的字符串，可以不用考虑转义的情况，直接按照表意编写。</p><p>常见的转义字符列表</p><table><thead><tr><th>转义序列</th><th>描述</th></tr></thead><tbody><tr><td><code>\\</code></td><td>字面反斜杠 <code>\</code></td></tr><tr><td><code>\&#39;</code></td><td>单引号</td></tr><tr><td><code>\&quot;</code></td><td>双引号</td></tr><tr><td><code>\n</code></td><td>换行（Line Feed）</td></tr><tr><td><code>\r</code></td><td>回车（Carriage Return）</td></tr><tr><td><code>\t</code></td><td>水平制表符（Tab）</td></tr><tr><td><code>\v</code></td><td>垂直制表符（Vertical Tab）</td></tr><tr><td><code>\b</code></td><td>退格（Backspace）</td></tr><tr><td><code>\f</code></td><td>换页（Form Feed）</td></tr><tr><td><code>\a</code></td><td>响铃（Bell&#x2F;Alert）</td></tr></tbody></table><p><strong>普通字符串与<code>r</code>前缀原始字符串对比示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 包含转义字符的普通字符串</span><br>normal_string = <span class="hljs-string">&quot;Hello,\nWorld!\tThis is a test string with a backslash: \\&quot;</span><br><br><span class="hljs-comment"># 原始字符串，不处理转义字符</span><br>raw_string = <span class="hljs-string">r&quot;Hello,\nWorld!\tThis is a test string with a backslash: \\&quot;</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Normal String:&quot;</span>)<br><span class="hljs-built_in">print</span>(normal_string)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\nRaw String:&quot;</span>)<br><span class="hljs-built_in">print</span>(raw_string)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">Normal String:<br>Hello,<br>World!  This <span class="hljs-keyword">is</span> a test string <span class="hljs-keyword">with</span> a backslash: \<br><br>Raw String:<br>Hello,\nWorld!\tThis <span class="hljs-keyword">is</span> a test string <span class="hljs-keyword">with</span> a backslash: \\<br></code></pre></td></tr></table></figure><h4 id="1-3-格式字符串字面量"><a href="#1-3-格式字符串字面量" class="headerlink" title="1.3 格式字符串字面量"></a>1.3 格式字符串字面量</h4><p>当字符串以 <code>f</code> 或 <code>F</code> 开头的时候，可以在字符串内通过 <code>{变量名}</code> 直接引用外部定义的变量，在引用变量的同时可以进行一定的运算，例如算术运算。</p><p><code>f</code>前缀类似于</p><p><strong>语法格式：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">s = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;<span class="hljs-built_in">vars</span>&#125;</span>&quot;</span><br></code></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">i = <span class="hljs-number">23</span><br><br>s = <span class="hljs-string">F&quot;How old is <span class="hljs-subst">&#123;i&#125;</span>?&quot;</span><br><span class="hljs-built_in">print</span>(s)<br>a = <span class="hljs-string">f&quot;After 5 years, I will be <span class="hljs-subst">&#123;i + <span class="hljs-number">5</span>&#125;</span>.&quot;</span><br><span class="hljs-built_in">print</span>(a)<br><br><span class="hljs-comment"># </span><br>How old <span class="hljs-keyword">is</span> <span class="hljs-number">23</span>?<br>After <span class="hljs-number">5</span> years, I will be <span class="hljs-number">28.</span><br></code></pre></td></tr></table></figure><h3 id="2、字符串常量"><a href="#2、字符串常量" class="headerlink" title="2、字符串常量"></a>2、字符串常量</h3><p>字符串常量需要引入 <code>string</code> 模块</p><table><thead><tr><th>常量名</th><th>描述</th><th>包含的字符</th></tr></thead><tbody><tr><td><code>string.ascii_letters</code></td><td>所有 ASCII 字母（大小写混合）</td><td><code>abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</code></td></tr><tr><td><code>string.ascii_lowercase</code></td><td>所有小写 ASCII 字母</td><td><code>abcdefghijklmnopqrstuvwxyz</code></td></tr><tr><td><code>string.ascii_uppercase</code></td><td>所有大写 ASCII 字母</td><td><code>ABCDEFGHIJKLMNOPQRSTUVWXYZ</code></td></tr><tr><td><code>string.digits</code></td><td>十进制数字</td><td><code>0123456789</code></td></tr><tr><td><code>string.hexdigits</code></td><td>十六进制数字</td><td><code>0123456789abcdefABCDEF</code></td></tr><tr><td><code>string.octdigits</code></td><td>八进制数字</td><td><code>01234567</code></td></tr><tr><td><code>string.punctuation</code></td><td>所有标点符号</td><td>&#96;&#96;!”#$%&amp;’()*+,-.&#x2F;:;&lt;&#x3D;&gt;?@[]^_{&#96;</td></tr><tr><td><code>string.whitespace</code></td><td>所有空白字符</td><td>空格、制表符(<code>\t</code>)、换行符(<code>\n</code>)、回车(<code>\r</code>)、垂直制表符(<code>\v</code>)、换页(<code>\f</code>)</td></tr><tr><td><code>string.printable</code></td><td>所有可打印字符</td><td>包含 <code>digits, ascii_letters, punctuation 和 whitespace</code></td></tr></tbody></table><h3 id="3、常用字符串API"><a href="#3、常用字符串API" class="headerlink" title="3、常用字符串API"></a>3、常用字符串API</h3><table><thead><tr><th><strong>分类</strong></th><th><strong>方法</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td><strong>大小写转换</strong></td><td><code>capitalize()</code></td><td>返回首字符大写，其余小写的字符串副本。</td></tr><tr><td></td><td><code>lower()</code></td><td>所有字符转小写。</td></tr><tr><td></td><td><code>upper()</code></td><td>所有字符转大写。</td></tr><tr><td></td><td><code>swapcase()</code></td><td>大小写互换。</td></tr><tr><td></td><td><code>title()</code></td><td>每个单词首字母大写，其余小写，空格分割单词。</td></tr><tr><td><strong>查找&#x2F;定位</strong></td><td><code>find(sub[, start[, end]])</code></td><td>返回子字符串最低索引，未找到返回 -1。</td></tr><tr><td></td><td><code>rfind(sub[, start[, end]])</code></td><td>从右侧返回子字符串最高索引，未找到返回 -1。</td></tr><tr><td></td><td><code>index(sub[, start[, end]])</code></td><td>同 <code>find()</code> 但未找到时抛出 <code>ValueError</code>。</td></tr><tr><td></td><td><code>rindex(sub[, start[, end]])</code></td><td>同 <code>rfind()</code> 但未找到时抛出 <code>ValueError</code>。</td></tr><tr><td></td><td><code>count(sub[, start[, end]])</code></td><td>返回子字符串出现次数。</td></tr><tr><td></td><td><code>startswith()</code></td><td>判断字符串是否以指定前缀开头</td></tr><tr><td></td><td><code>endswith()</code></td><td>判断字符串是否以指定后缀结尾</td></tr><tr><td><strong>字符串分类</strong></td><td><code>isalnum()</code></td><td>是否只包含字母或数字（至少一个字符）。</td></tr><tr><td></td><td><code>isalpha()</code></td><td>是否只包含字母字符。</td></tr><tr><td></td><td><code>isdecimal()</code></td><td>是否只包含十进制字符（数字字符）。</td></tr><tr><td></td><td><code>isdigit()</code></td><td>是否只包含数字字符。</td></tr><tr><td></td><td><code>isidentifier()</code></td><td>是否是合法 Python 标识符。</td></tr><tr><td></td><td><code>islower()</code></td><td>是否所有字母字符均为小写。</td></tr><tr><td></td><td><code>isnumeric()</code></td><td>是否只包含数字字符。</td></tr><tr><td></td><td><code>isprintable()</code></td><td>是否所有字符均为可打印字符。</td></tr><tr><td></td><td><code>isspace()</code></td><td>是否所有字符均为空白字符。</td></tr><tr><td></td><td><code>istitle()</code></td><td>是否为标题格式（每字首字母大写）。</td></tr><tr><td></td><td><code>isupper()</code></td><td>是否所有字母字符均为大写。</td></tr><tr><td><strong>拆分&#x2F;连接</strong></td><td><code>split(sep=None, maxsplit=-1)</code></td><td>按分隔符分割为列表。</td></tr><tr><td></td><td><code>rsplit(sep=None, maxsplit=-1)</code></td><td>同 <code>split()</code>，从右侧开始分割。</td></tr><tr><td></td><td><code>splitlines([keepends])</code></td><td>按换行拆分为行列表。</td></tr><tr><td></td><td><code>join(iterable)</code></td><td>用当前字符串作为连接符，连接序列元素。</td></tr><tr><td><strong>替换</strong></td><td><code>replace(old, new[, count])</code></td><td>替换子字符串。</td></tr><tr><td><strong>去除空白&#x2F;修剪</strong></td><td><code>strip([chars])</code></td><td>去除两侧指定字符（默认空白）。</td></tr><tr><td></td><td><code>lstrip([chars])</code></td><td>去除左侧指定字符。</td></tr><tr><td></td><td><code>rstrip([chars])</code></td><td>去除右侧指定字符。</td></tr><tr><td></td><td><code>removeprefix(prefix)</code></td><td>移除指定前缀（若存在）。</td></tr><tr><td></td><td><code>removesuffix(suffix)</code></td><td>移除指定后缀（若存在）。</td></tr><tr><td><strong>对齐&#x2F;填充</strong></td><td><code>center(width[, fillchar])</code></td><td>居中对齐并填充。</td></tr><tr><td></td><td><code>ljust(width[, fillchar])</code></td><td>左对齐并填充。</td></tr><tr><td></td><td><code>rjust(width[, fillchar])</code></td><td>右对齐并填充。</td></tr><tr><td><strong>格式化</strong></td><td><code>format(*args, **kwargs)</code></td><td>字符串格式化方法。</td></tr></tbody></table><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 字符串api示例</span><br>s = <span class="hljs-string">&quot;hello, world!&quot;</span><br><span class="hljs-built_in">print</span>(s.upper())          <span class="hljs-comment"># 转为大写 HELLO, WORLD!</span><br><span class="hljs-built_in">print</span>(s.capitalize())     <span class="hljs-comment"># 首字母大写 Hello, world!</span><br><span class="hljs-built_in">print</span>(s.replace(<span class="hljs-string">&quot;world&quot;</span>, <span class="hljs-string">&quot;Python&quot;</span>))  <span class="hljs-comment"># 替换字符串 hello, Python!</span><br><span class="hljs-built_in">print</span>(s.split(<span class="hljs-string">&quot;, &quot;</span>))      <span class="hljs-comment"># 分割字符串 [&#x27;hello&#x27;, &#x27;world!&#x27;]</span><br><span class="hljs-built_in">print</span>(s.find(<span class="hljs-string">&quot;world&quot;</span>))    <span class="hljs-comment"># 查找子字符串位置 7</span><br><span class="hljs-built_in">print</span>(s.startswith(<span class="hljs-string">&quot;hello&quot;</span>))  <span class="hljs-comment"># 检查开头 True</span><br><span class="hljs-built_in">print</span>(s.endswith(<span class="hljs-string">&quot;!&quot;</span>))    <span class="hljs-comment"># 检查结尾 True</span><br><span class="hljs-built_in">print</span>(s.strip(<span class="hljs-string">&quot;!&quot;</span>))      <span class="hljs-comment"># 去除指定字符 hello, world</span><br><span class="hljs-built_in">print</span>(s.count(<span class="hljs-string">&quot;o&quot;</span>))      <span class="hljs-comment"># 计数字符出现次数 2</span><br><span class="hljs-built_in">print</span>(s.isalpha())       <span class="hljs-comment"># 检查是否全为字母 False</span><br><span class="hljs-built_in">print</span>(s.isdigit())       <span class="hljs-comment"># 检查是否全为数字 False</span><br><span class="hljs-built_in">print</span>(s.join([<span class="hljs-string">&quot;Say&quot;</span>, <span class="hljs-string">&quot;to&quot;</span>, <span class="hljs-string">&quot;you&quot;</span>]))  <span class="hljs-comment"># 连接字符串 Sayhello</span><br><span class="hljs-built_in">print</span>(s.index(<span class="hljs-string">&quot;world&quot;</span>))  <span class="hljs-comment"># 查找子字符串位置 7</span><br><span class="hljs-built_in">print</span>(s.title())         <span class="hljs-comment"># 标题化 Hello, World!</span><br><span class="hljs-built_in">print</span>(s.swapcase())      <span class="hljs-comment"># 大小写互换 HELLO, WORLD!</span><br><span class="hljs-built_in">print</span>(s.rfind(<span class="hljs-string">&quot;o&quot;</span>))      <span class="hljs-comment"># 反向查找子字符串位置 8</span><br><span class="hljs-built_in">print</span>(s.rsplit(<span class="hljs-string">&quot;, &quot;</span>))    <span class="hljs-comment"># 反向分割字符串 [&#x27;hello&#x27;, &#x27;world!&#x27;]</span><br><span class="hljs-built_in">print</span>(s.lstrip(<span class="hljs-string">&quot;h&quot;</span>))     <span class="hljs-comment"># 左侧去除指定字符 ello, world</span><br><span class="hljs-built_in">print</span>(s.rstrip(<span class="hljs-string">&quot;!&quot;</span>))     <span class="hljs-comment"># 右侧去除指定字符 hello, world</span><br></code></pre></td></tr></table></figure><h2 id="二、列表-list"><a href="#二、列表-list" class="headerlink" title="二、列表 list"></a>二、列表 list</h2><p>在<code>Python</code>中，列表<code>list</code>可以理解为一个可变的数组，列表中元素类型可以不同，列表支持添加、删除和修改。</p><p><strong>常用API：</strong></p><table><thead><tr><th><strong>分类</strong></th><th><strong>方法 &#x2F; 操作</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td><strong>创建&#x2F;构造</strong></td><td><code>list(iterable)</code></td><td>使用可迭代对象创建新列表，例如 <code>list(&quot;abc&quot;)</code> → <code>[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;]</code>。</td></tr><tr><td><strong>添加元素</strong></td><td><code>append(x)</code></td><td>在列表末尾添加元素 <strong>x</strong>。</td></tr><tr><td></td><td><code>extend(iterable)</code></td><td>用可迭代对象中的所有元素扩展列表。</td></tr><tr><td></td><td><code>insert(i, x)</code></td><td>在指定索引位置插入元素 <strong>x</strong>。</td></tr><tr><td><strong>删除元素</strong></td><td><code>remove(x)</code></td><td>移除列表中第一个匹配项 <strong>x</strong>。</td></tr><tr><td></td><td><code>pop([i])</code></td><td>删除并返回指定索引的元素；不指定则弹出最后一个元素。</td></tr><tr><td></td><td><code>clear()</code></td><td>删除所有元素，等价于 <code>del a[:]</code>。</td></tr><tr><td><strong>查找&#x2F;统计</strong></td><td><code>index(x[, start[, end]])</code></td><td>返回第一个值为 <strong>x</strong> 的元素的索引；找不到抛出 <code>ValueError</code>。</td></tr><tr><td></td><td><code>count(x)</code></td><td>返回元素 <strong>x</strong> 在列表中出现的次数。</td></tr><tr><td><strong>重排序与反转</strong></td><td><code>sort(key=None, reverse=False)</code></td><td>对列表进行原地排序（可以指定 <code>key</code> 和 <code>reverse</code> 参数）。</td></tr><tr><td></td><td><code>reverse()</code></td><td>就地反转列表顺序。</td></tr><tr><td><strong>复制</strong></td><td><code>copy()</code></td><td>返回列表的浅拷贝，等价于切片 <code>a[:]</code>。</td></tr><tr><td><strong>序列操作（通用）</strong></td><td>索引 <code>a[i]</code></td><td>获取或设置第 <strong>i</strong> 个元素（可赋值）。</td></tr><tr><td></td><td>切片 <code>a[start:end:step]</code></td><td>获取或修改子列表。</td></tr><tr><td></td><td><code>len(a)</code>（内置）</td><td>返回列表长度（元素数量）。</td></tr><tr><td></td><td><code>in</code> &#x2F; <code>not in</code></td><td>测试成员关系：<code>x in a</code> 或 <code>x not in a</code>。</td></tr><tr><td></td><td><code>+</code></td><td>连接两个列表，返回新列表。</td></tr><tr><td></td><td><code>*</code></td><td>重复列表，返回新列表。</td></tr><tr><td><strong>迭代与循环</strong></td><td><code>for item in a:</code></td><td>迭代列表元素。</td></tr><tr><td><strong>内置函数支持</strong></td><td><code>min(a)</code> &#x2F; <code>max(a)</code></td><td>返回列表中最小 &#x2F; 最大元素。</td></tr><tr><td></td><td><code>sum(a)</code></td><td>求列表数值元素之和。</td></tr><tr><td></td><td><code>sorted(a)</code></td><td>返回列表排序后的新列表，不修改原列表。</td></tr></tbody></table><p><strong>切片：是对序列list进行区间截取的操作</strong></p><p>基本切片语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">sequence[start:stop:step]<br></code></pre></td></tr></table></figure><p>参数说明：</p><ul><li><strong>start</strong>：起始索引（包含），可省略，省略表示从头开始。</li><li><strong>stop</strong>：结束索引（不包含），可省略，省略表示到结尾。</li><li><strong>step</strong>：步长（步进值），可省略，默认是 <code>1</code>（每隔一个取一个）。</li></ul><p>简而言之，切片会返回 <strong>从 start 到 stop-1 之间间隔 step 的新序列</strong>。索引可以是负数，表示从末尾索引（如 <code>-1</code> 表示最后一个元素）。</p><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ------------------ 初始化列表 ------------------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n-- 初始化列表 --&quot;</span>)<br>fruits = [<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-string">&quot;cherry&quot;</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;original:&quot;</span>, fruits)<br><br><span class="hljs-comment"># ------------------ 添加元素 ------------------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n-- 添加元素 append, extend, insert --&quot;</span>)<br>fruits.append(<span class="hljs-string">&quot;orange&quot;</span>)      <span class="hljs-comment"># append(x)</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;append orange:&quot;</span>, fruits)<br><br>fruits.extend([<span class="hljs-string">&quot;kiwi&quot;</span>, <span class="hljs-string">&quot;mango&quot;</span>])  <span class="hljs-comment"># extend(iterable)</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;extend with [&#x27;kiwi&#x27;,&#x27;mango&#x27;]:&quot;</span>, fruits)<br><br>fruits.insert(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;lemon&quot;</span>)    <span class="hljs-comment"># insert(index, x)</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;insert lemon at index 1:&quot;</span>, fruits)<br><br><span class="hljs-comment"># ------------------ 删除元素 ------------------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n-- 删除元素 remove, pop, clear --&quot;</span>)<br>fruits.remove(<span class="hljs-string">&quot;banana&quot;</span>)      <span class="hljs-comment"># remove(x)</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;remove &#x27;banana&#x27;:&quot;</span>, fruits)<br><br>popped = fruits.pop()        <span class="hljs-comment"># pop()</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;pop last element:&quot;</span>, popped, <span class="hljs-string">&quot;; now:&quot;</span>, fruits)<br><br>popped_idx = fruits.pop(<span class="hljs-number">0</span>)   <span class="hljs-comment"># pop(i)</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;pop index 0:&quot;</span>, popped_idx, <span class="hljs-string">&quot;; now:&quot;</span>, fruits)<br><br>tmp = [<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>]<br>tmp.clear()                  <span class="hljs-comment"># clear()</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;clear tmp:&quot;</span>, tmp)<br><br><span class="hljs-comment"># ------------------ 查找和计数 ------------------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n-- 查找和计数 index, count --&quot;</span>)<br>nums = [<span class="hljs-number">1</span>, <span class="hljs-number">9</span>, <span class="hljs-number">2</span>, <span class="hljs-number">9</span>, <span class="hljs-number">3</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;nums:&quot;</span>, nums)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;first index of 9:&quot;</span>, nums.index(<span class="hljs-number">9</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;count of 9:&quot;</span>, nums.count(<span class="hljs-number">9</span>))<br><br><span class="hljs-comment"># ------------------ 排序与反转 ------------------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n-- 排序与反转 sort, reverse --&quot;</span>)<br>vals = [<span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">9</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>]<br>vals.sort()                 <span class="hljs-comment"># sort() 就地升序</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;sorted ascending:&quot;</span>, vals)<br>vals.sort(reverse=<span class="hljs-literal">True</span>)     <span class="hljs-comment"># sort(reverse=True)</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;sorted descending:&quot;</span>, vals)<br><br>vals.reverse()              <span class="hljs-comment"># reverse()</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;reversed:&quot;</span>, vals)<br><br><span class="hljs-comment"># ------------------ 复制与组合 ------------------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n-- 复制与组合 copy, +, * --&quot;</span>)<br>orig = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br>cpy = orig.copy()           <span class="hljs-comment"># copy()</span><br>cpy.append(<span class="hljs-number">4</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;orig:&quot;</span>, orig, <span class="hljs-string">&quot;copy with 4:&quot;</span>, cpy)<br><br>combined = orig + cpy       <span class="hljs-comment"># 拼接</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;combined orig + cpy:&quot;</span>, combined)<br><br>mult = [<span class="hljs-string">&quot;X&quot;</span>] * <span class="hljs-number">3</span>            <span class="hljs-comment"># 重复</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;three times [&#x27;X&#x27;]:&quot;</span>, mult)<br><br><span class="hljs-comment"># ------------------ 通用序列操作 ------------------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n-- 通用序列操作 索引/切片/成员/长度 --&quot;</span>)<br>seq = [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>, <span class="hljs-number">50</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;seq[1]:&quot;</span>, seq[<span class="hljs-number">1</span>])<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;slice seq[1:4]:&quot;</span>, seq[<span class="hljs-number">1</span>:<span class="hljs-number">4</span>])<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;30 in seq?&quot;</span>, <span class="hljs-number">30</span> <span class="hljs-keyword">in</span> seq)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;100 in seq?&quot;</span>, <span class="hljs-number">100</span> <span class="hljs-keyword">in</span> seq)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;len(seq):&quot;</span>, <span class="hljs-built_in">len</span>(seq))<br><br><span class="hljs-comment"># ------------------ 与内置函数结合 ------------------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n-- 内置函数 min/max/sum/sorted --&quot;</span>)<br>vals2 = [<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;min:&quot;</span>, <span class="hljs-built_in">min</span>(vals2))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;max:&quot;</span>, <span class="hljs-built_in">max</span>(vals2))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;sum:&quot;</span>, <span class="hljs-built_in">sum</span>(vals2))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;sorted new(list):&quot;</span>, <span class="hljs-built_in">sorted</span>(vals2))<br><br><span class="hljs-comment"># ------------------ 当做栈/队列 ------------------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n-- 栈与队列操作示例 --&quot;</span>)<br>stack = []<br>stack.append(<span class="hljs-string">&quot;first&quot;</span>)<br>stack.append(<span class="hljs-string">&quot;next&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;stack before pop:&quot;</span>, stack)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;pop from stack:&quot;</span>, stack.pop())<br><br>queue = [<span class="hljs-string">&quot;q1&quot;</span>,<span class="hljs-string">&quot;q2&quot;</span>,<span class="hljs-string">&quot;q3&quot;</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;dequeue:&quot;</span>, queue.pop(<span class="hljs-number">0</span>))<br><br><br></code></pre></td></tr></table></figure><h2 id="三、字典-dict"><a href="#三、字典-dict" class="headerlink" title="三、字典 dict"></a>三、字典 dict</h2><p>字典 是一种用于存储 键 —— 值对（key-value pairs） 的容器类型，键必须是 可哈希（immutable，如字符串、数字、元组等） 的对象，字典也是 可变（mutable） 的，可以随时添加、删除或更新元素。</p><p><strong>API:</strong></p><table><thead><tr><th>方法</th><th>作用</th></tr></thead><tbody><tr><td><code>clear()</code></td><td>删除字典中所有元素。</td></tr><tr><td><code>copy()</code></td><td>返回字典的浅拷贝。</td></tr><tr><td><code>fromkeys(iterable, value)</code></td><td>创建一个新字典，用 iterable 的元素作为键，所有键对应同一个 value。</td></tr><tr><td><code>get(key, default=None)</code></td><td>获取键的值；若键不存在返回默认（不抛出异常）。</td></tr><tr><td><code>items()</code></td><td>返回可遍历的 <code>(key, value)</code> 视图对象。</td></tr><tr><td><code>keys()</code></td><td>返回所有键的视图对象。</td></tr><tr><td><code>values()</code></td><td>返回所有值的视图对象。</td></tr><tr><td><code>pop(key[, default])</code></td><td>删除指定 key，并返回对应的值；key 不存在则返回 default 或抛出异常。</td></tr><tr><td><code>popitem()</code></td><td>删除并返回<strong>最后插入的一对</strong>（key, value）。</td></tr><tr><td><code>setdefault(key, default=None)</code></td><td>若 key 不存在则插入，并返回 value；存在则返回已有值。</td></tr><tr><td><code>update(other)</code></td><td>用另一个字典或者可迭代的 key:value 对更新当前字典。</td></tr></tbody></table><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># -------- 1. 创建字典 --------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n--- 创建字典 ---&quot;</span>)<br>d1 = &#123;&#125;                           <span class="hljs-comment"># 空字典</span><br>d2 = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">30</span>&#125;<br>d3 = <span class="hljs-built_in">dict</span>(city=<span class="hljs-string">&quot;Tokyo&quot;</span>, country=<span class="hljs-string">&quot;Japan&quot;</span>)<br>d4 = <span class="hljs-built_in">dict</span>([(<span class="hljs-string">&quot;x&quot;</span>, <span class="hljs-number">100</span>), (<span class="hljs-string">&quot;y&quot;</span>, <span class="hljs-number">200</span>)])<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;d1:&quot;</span>, d1)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;d2:&quot;</span>, d2)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;d3:&quot;</span>, d3)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;d4:&quot;</span>, d4)<br><br><span class="hljs-comment"># -------- 2. 访问获取 --------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n--- 访问获取 ---&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;d2[&#x27;name&#x27;]:&quot;</span>, d2[<span class="hljs-string">&quot;name&quot;</span>])<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;d2.get(&#x27;age&#x27;):&quot;</span>, d2.get(<span class="hljs-string">&quot;age&quot;</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;d2.get(&#x27;job&#x27;, &#x27;None&#x27;):&quot;</span>, d2.get(<span class="hljs-string">&quot;job&quot;</span>, <span class="hljs-string">&quot;None&quot;</span>))<br><br><span class="hljs-comment"># -------- 3. 添加/更新 --------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n--- 添加/更新 ---&quot;</span>)<br>d2[<span class="hljs-string">&quot;job&quot;</span>] = <span class="hljs-string">&quot;Engineer&quot;</span>    <span class="hljs-comment"># 添加新键值对</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;添加 job:&quot;</span>, d2)<br>d2.update(&#123;<span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">31</span>, <span class="hljs-string">&quot;city&quot;</span>: <span class="hljs-string">&quot;Tokyo&quot;</span>&#125;)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;update:&quot;</span>, d2)<br><br><span class="hljs-comment"># -------- 4. 删除 --------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n--- 删除操作 ---&quot;</span>)<br>removed = d2.pop(<span class="hljs-string">&quot;job&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;pop job:&quot;</span>, removed, <span class="hljs-string">&quot;; now:&quot;</span>, d2)<br>pair = d2.popitem()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;popitem() returned:&quot;</span>, pair, <span class="hljs-string">&quot;; now:&quot;</span>, d2)<br>d2[<span class="hljs-string">&quot;tmp&quot;</span>] = <span class="hljs-number">42</span><br><span class="hljs-keyword">del</span> d2[<span class="hljs-string">&quot;tmp&quot;</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;after del tmp:&quot;</span>, d2)<br><br><span class="hljs-comment"># -------- 5. 清空 --------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n--- 清空 clear() ---&quot;</span>)<br>d_clear = &#123;<span class="hljs-string">&quot;a&quot;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&quot;b&quot;</span>: <span class="hljs-number">2</span>&#125;<br>d_clear.clear()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;d_clear:&quot;</span>, d_clear)<br><br><span class="hljs-comment"># -------- 6. 查询统计 --------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n--- keys, values, items ---&quot;</span>)<br>d_stat = &#123;<span class="hljs-string">&quot;x&quot;</span>: <span class="hljs-number">10</span>, <span class="hljs-string">&quot;y&quot;</span>: <span class="hljs-number">20</span>, <span class="hljs-string">&quot;z&quot;</span>: <span class="hljs-number">30</span>&#125;<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;keys():&quot;</span>, d_stat.keys())<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;values():&quot;</span>, d_stat.values())<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;items():&quot;</span>, d_stat.items())<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;len:&quot;</span>, <span class="hljs-built_in">len</span>(d_stat))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;y in d_stat?:&quot;</span>, <span class="hljs-string">&quot;y&quot;</span> <span class="hljs-keyword">in</span> d_stat)<br><br><span class="hljs-comment"># -------- 7. 复制 --------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n--- 复制 copy() ---&quot;</span>)<br>orig = &#123;<span class="hljs-string">&quot;a&quot;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&quot;b&quot;</span>: <span class="hljs-number">2</span>&#125;<br>shallow = orig.copy()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;orig:&quot;</span>, orig, <span class="hljs-string">&quot;shallow copy:&quot;</span>, shallow)<br><br><span class="hljs-comment"># -------- 8. fromkeys &amp; setdefault --------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n--- fromkeys &amp; setdefault ---&quot;</span>)<br>keys = [<span class="hljs-string">&quot;k1&quot;</span>, <span class="hljs-string">&quot;k2&quot;</span>]<br>df = <span class="hljs-built_in">dict</span>.fromkeys(keys, <span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;fromkeys:&quot;</span>, df)<br>dv = &#123;<span class="hljs-string">&quot;a&quot;</span>: <span class="hljs-number">100</span>&#125;<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;setdefault existing:&quot;</span>, dv.setdefault(<span class="hljs-string">&quot;a&quot;</span>, -<span class="hljs-number">1</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;setdefault new:&quot;</span>, dv.setdefault(<span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-number">50</span>), <span class="hljs-string">&quot;; dv now:&quot;</span>, dv)<br><br><span class="hljs-comment"># -------- 9. 遍历 --------</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n--- 遍历字典 ---&quot;</span>)<br>loop = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">24</span>&#125;<br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> loop:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;key&quot;</span>, k, <span class="hljs-string">&quot;-&gt;&quot;</span>, loop[k])<br><span class="hljs-keyword">for</span> k,v <span class="hljs-keyword">in</span> loop.items():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;item:&quot;</span>, k, <span class="hljs-string">&quot;=&quot;</span>, v)<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python错误和异常</title>
    <link href="/python/exception.html"/>
    <url>/python/exception.html</url>
    
    <content type="html"><![CDATA[<p>在<code>Python</code>中错误一般分为两种：编码阶段产生的语法错误 和 运行期间由于数据不满足逻辑产生的错误。</p><h2 id="一、语法错误"><a href="#一、语法错误" class="headerlink" title="一、语法错误"></a>一、语法错误</h2><p>语法错误又称解析错误，是在编码阶段产生的错误，在初期学习<code>Python</code>时最常见的错误：</p><p><strong>关键字错误示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    prin(<span class="hljs-string">&quot;Hello, World!&quot;</span>) <span class="hljs-comment"># 正确的应该为 print </span><br></code></pre></td></tr></table></figure><p>运行python文件时，解释器会告诉我们错误发生的函数和错误位置，如果是关键字类错误，解释器也会给出可能的建议。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/home/probie/workspace/python/base-python/test.py&quot;</span>, line <span class="hljs-number">2</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    prin(<span class="hljs-string">&quot;Hello, World!&quot;</span>) <span class="hljs-comment"># </span><br>    ^^^^<br>NameError: name <span class="hljs-string">&#x27;prin&#x27;</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> defined. Did you mean: <span class="hljs-string">&#x27;print&#x27;</span>?<br></code></pre></td></tr></table></figure><p><em>关键字错误会报 NameError，并给出可能的建议</em></p><p><strong>语法错误示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;hlsshs&quot;</span>  <span class="hljs-comment"># 缺少右边的括号</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">File <span class="hljs-string">&quot;/home/probie/workspace/python/base-python/test.py&quot;</span>, line <span class="hljs-number">2</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;hlsshs&quot;</span><br>         ^<br>SyntaxError: <span class="hljs-string">&#x27;(&#x27;</span> was never closed<br></code></pre></td></tr></table></figure><p><em>语法错误会报 SyntaxError，并会告知错误的行数和位置</em></p><p><strong>针对语法错误，我们需要合理借助解释器给出的错误位置，错误函数，并针对性修复，是在编码阶段可发现的错误</strong></p><h2 id="二、异常"><a href="#二、异常" class="headerlink" title="二、异常"></a>二、异常</h2><p>整个程序不存在语法错误时，就可以进入运行阶段，在运行阶段由于数据不符合程序预期（有些数据异常可以增加防御性拦截减少）发生的错误，或者程序需要访问网络和磁盘时，可能会发生的网络问题（例如超时）或者访问磁盘文件时文件不存在的情况，产生的错误称呼为 <strong>异常</strong>。</p><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-comment"># if b == 0:</span><br>        <span class="hljs-comment"># raise ValueError(&quot;Denominator cannot be zero.&quot;)</span><br>    <span class="hljs-keyword">return</span> a / b<br><br><span class="hljs-built_in">print</span>(divide(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>))  <span class="hljs-comment"># Expected output: 5.0</span><br><span class="hljs-built_in">print</span>(divide(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>))  <span class="hljs-comment"># This should raise a ValueError</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-number">5.0</span><br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/home/probie/workspace/python/base-python/test.py&quot;</span>, line <span class="hljs-number">7</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    <span class="hljs-built_in">print</span>(divide(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>))  <span class="hljs-comment"># This should raise a ValueError</span><br>          ^^^^^^^^^^^^^<br>  File <span class="hljs-string">&quot;/home/probie/workspace/python/base-python/test.py&quot;</span>, line <span class="hljs-number">4</span>, <span class="hljs-keyword">in</span> divide<br>    <span class="hljs-keyword">return</span> a / b<br>           ~~^~~<br>ZeroDivisionError: division by zero<br></code></pre></td></tr></table></figure><p>同样，异常发生的时候，如果程序没有进行逻辑上的捕获处理，解释器会直接中断后续执行，并抛出错误信息，错误信息包含错误发生的位置，异常的原因。</p><p>像上述示例中的 <code>ZeroDivisionError</code> 我们就可以通过防御性的错误，先判断除数是否为0,从而避免程序的直接中断。</p><h3 id="1、异常的处理"><a href="#1、异常的处理" class="headerlink" title="1、异常的处理"></a>1、异常的处理</h3><p>在<code>Python</code>中异常的处理不是必须的，如果代码逻辑上没有主动进行异常的捕获和处理，在发生异常的时候，解释器会中断执行，可能不是我们预期需要的结果。</p><p>为什么需要主动对异常进行捕获和处理呢？我们现在想要往文件里边写入数据，这个时候如果文件不存在或者没有写的权限，如果直接失败，用户体验就可能很差；对于文件不存在，业务上是否可以接收当发生文件不存在异常时，程序主动创建文件，继续后续逻辑的执行；对于没有写的权限，可能就需要对异常进行处理，转为用户可读的信息，返回调整后的描述信息。</p><p><strong>异常处理语法：</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">try</span>:<br>    <span class="hljs-comment"># 可能发生异常的代码</span><br><span class="hljs-keyword">except</span> 异常类型:  <span class="hljs-comment"># 可以有多个 except</span><br><span class="hljs-comment"># 或 </span><br><span class="hljs-keyword">except</span> 异常类型 <span class="hljs-keyword">as</span> 别名  <br><span class="hljs-keyword">else</span>:    <span class="hljs-comment"># 可选</span><br>    paas <br><span class="hljs-keyword">finally</span>:   <span class="hljs-comment"># 一定会执行的逻辑，可选</span><br>    paas<br></code></pre></td></tr></table></figure><p><strong>关键字解释：</strong></p><ul><li><code>try</code>：可能发生异常的代码逻辑</li><li><code>except</code>：用于捕获并匹配异常类型，可以有多个<code>except</code>匹配不同的类型，异常类型的匹配应该遵循从小到达的原则（即先具体异常逐步转为适配度更高的异常类型），同一个<code>except</code>下也可以同时匹配多个异常类型，使用元组配置多个异常类型；<code>except</code>的匹配过程按照从上到下的顺序。</li><li><code>as</code>：在<code>except</code>中，对于异常类型定义一个别名，在子句中通过别名对类型进行操作</li><li><code>else</code>：可选关键字，表示未发生异常的情况下，需要执行的代码逻辑</li><li><code>finall</code>：可选关键字，无论是否发生异常都会执行的代码逻辑，通常用于资源的释放，例如：文件和网络IO资源</li></ul><p><strong>语句执行顺序：</strong></p><ul><li>首先执行<code>try</code>自己中的正常代码逻辑</li><li>如果没有触发异常，则跳过<code>except</code>子句，会执行可选的 <code>else</code> 和 <code>finally</code> 子句</li><li>如果发生异常，会跳过<code>try</code>子句中异常位置的后续语句的执行，会按照<code>except</code>的顺序进行异常类型匹配。如果异常的类型与 <code>except</code>关键字后指定的异常相匹配，则会执行 <em>except 子句</em>，</li><li>如果发生的异常与 <em>except 子句</em> 中指定的异常不匹配，则它会被传递到外层的 <code>try</code>语句中；如果没有找到处理器，则它是一个 <em>未处理异常</em> 且执行将停止并输出一条错误消息。</li></ul><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20260114170229669.png" alt="image-20260114170229669"></p><h4 id="1-1-无异常示例"><a href="#1-1-无异常示例" class="headerlink" title="1.1 无异常示例"></a>1.1 无异常示例</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">try</span>:<br>        r = a / b<br>    <span class="hljs-keyword">except</span> ZeroDivisionError:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;哦豁，除以零了！&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;除法成功，结果是：&quot;</span>, r)<br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;无论如何，这段代码都会执行。&quot;</span>)<br>    <br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;函数执行完毕。&quot;</span>)<br><br><br>divide(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>)<br><br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">除法成功，结果是： <span class="hljs-number">5.0</span><br>无论如何，这段代码都会执行。<br>函数执行完毕。<br></code></pre></td></tr></table></figure><p>从执行结果来说：执行完<code>try</code>子句以后，先执行<code>else</code>在执行<code>finally</code>语句。</p><h4 id="1-2-抛出异常，匹配-except"><a href="#1-2-抛出异常，匹配-except" class="headerlink" title="1.2 抛出异常，匹配 except"></a>1.2 抛出异常，匹配 except</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">try</span>:<br>        r = a / b<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;正在执行除法操作...&quot;</span>)<br>    <span class="hljs-keyword">except</span> ZeroDivisionError:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;哦豁，除以零了！&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;除法成功，结果是：&quot;</span>, r)<br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;无论如何，这段代码都会执行。&quot;</span>)<br>    <br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;函数执行完毕。&quot;</span>)<br><br><br>divide(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">哦豁，除以零了！<br>无论如何，这段代码都会执行。<br>函数执行完毕。<br></code></pre></td></tr></table></figure><p>从执行结果来说：执行<code>try</code>子句<code>a/b</code>发生异常以后，后续的<code>print</code>语句不再执行，然后再进行<code>except</code>匹配，当前异常类型与<code>ZeroDivisionError</code>匹配，执行<code>except</code>子句，然后在执行<code>finally</code>语句，<strong>其中<code>else</code>未执行</strong>。</p><h4 id="1-3-抛出异常，无任何except匹配"><a href="#1-3-抛出异常，无任何except匹配" class="headerlink" title="1.3 抛出异常，无任何except匹配"></a>1.3 抛出异常，无任何except匹配</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">try</span>:<br>        r = a / b<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;正在执行除法操作...&quot;</span>)<br>    <span class="hljs-keyword">except</span> NameError:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;哦豁，除以零了！&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;除法成功，结果是：&quot;</span>, r)<br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;无论如何，这段代码都会执行。&quot;</span>)<br>    <br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;函数执行完毕。&quot;</span>)<br><br><br>divide(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>输出:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">无论如何，这段代码都会执行。<br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/home/probie/workspace/python/base-python/test.py&quot;</span>, line <span class="hljs-number">15</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    divide(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>)<br>  File <span class="hljs-string">&quot;/home/probie/workspace/python/base-python/test.py&quot;</span>, line <span class="hljs-number">3</span>, <span class="hljs-keyword">in</span> divide<br>    r = a / b<br>        ~~^~~<br>ZeroDivisionError: division by zero<br></code></pre></td></tr></table></figure><p><code>try</code>子句发生异常的时候，如果没有任何<code>except</code>匹配，会先执行<code>finally</code>子句，然后中断程序后续执行。</p><h4 id="1-4-抛出异常，except按照从大到小匹配（错误顺序）"><a href="#1-4-抛出异常，except按照从大到小匹配（错误顺序）" class="headerlink" title="1.4 抛出异常，except按照从大到小匹配（错误顺序）"></a>1.4 抛出异常，except按照从大到小匹配（错误顺序）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">try</span>:<br>        r = a / b<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;正在执行除法操作...&quot;</span>)<br>    <span class="hljs-keyword">except</span> Exception:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;我是 Exception 捕获的异常！&quot;</span>)<br>    <span class="hljs-keyword">except</span> ZeroDivisionError:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;我是 ZeroDivisionError 捕获的异常！&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;除法成功，结果是：&quot;</span>, r)<br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;无论如何，这段代码都会执行。&quot;</span>)<br>    <br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;函数执行完毕。&quot;</span>)<br><br><br>divide(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>由于 <code>ZeroDivisionError</code> 是 <code>Exception</code> 的子类，所有<code>except</code>按照从上到下匹配的时候，<code>Exception</code>满足，执行<code>Exception</code>子句，不再进行后续异常类型匹配。</p><p><strong>此种顺序会导致抛出的错误信息非预期的精确描述</strong></p><h4 id="1-5-同一个-except-匹配多个异常类型"><a href="#1-5-同一个-except-匹配多个异常类型" class="headerlink" title="1.5 同一个 except 匹配多个异常类型"></a>1.5 同一个 except 匹配多个异常类型</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">try</span>:<br>        r = a / b<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;正在执行除法操作...&quot;</span>)<br>    <span class="hljs-keyword">except</span> (ZeroDivisionError , NameError):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;除法失败，除数不能为零或变量未定义。&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;除法成功，结果是：&quot;</span>, r)<br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;无论如何，这段代码都会执行。&quot;</span>)<br>    <br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;函数执行完毕。&quot;</span>)<br><br><br>divide(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">除法失败，除数不能为零或变量未定义。<br>无论如何，这段代码都会执行。<br>函数执行完毕。<br></code></pre></td></tr></table></figure><h3 id="2、主动触发异常"><a href="#2、主动触发异常" class="headerlink" title="2、主动触发异常"></a>2、主动触发异常</h3><p>使用关键字 <code>raise</code> 可以强制触发异常。</p><p>何时使用<code>raise</code>主动抛出异常：</p><ul><li>在捕获到异常以后，对异常添加额外的注释信息或记录相关行为后，抛出转换后的自定义异常–全局异常统一</li><li>将 <code>raise</code> 作为多层嵌套<code>if</code>的一个替换，在条件不满足的情况下，抛出一个特定的异常，减少嵌套深度</li></ul><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">i = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;输入一个整数: &quot;</span>))<br><br><span class="hljs-keyword">if</span> i &lt; <span class="hljs-number">0</span>:<br>    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;负数没有平方根&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(i ** <span class="hljs-number">0.5</span>)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">输入一个整数: -<span class="hljs-number">1</span><br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/home/probie/workspace/python/base-python/test.py&quot;</span>, line <span class="hljs-number">4</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;负数没有平方根&quot;</span>)<br>ValueError: 负数没有平方根<br></code></pre></td></tr></table></figure><h3 id="3、使用注释细化异常原因"><a href="#3、使用注释细化异常原因" class="headerlink" title="3、使用注释细化异常原因"></a>3、使用注释细化异常原因</h3><p>当一个异常被创建以引发时，它通常被初始化为描述所发生错误的信息。在有些情况下，在异常被捕获后添加信息是很有用的。为了这个目的，异常有一个 <code>add_note(note)</code> 方法接受一个字符串，并将其添加到异常的注释列表。在异常堆栈信息之后按照它们被添加的顺序输出所有的注释。</p><p><strong>如果对异常需要增加额外的注释信息时，需要使用 <code>as</code> 将异常定义一个别名</strong></p><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">try</span>:<br>        r = a / b<br>    <span class="hljs-keyword">except</span> ZeroDivisionError <span class="hljs-keyword">as</span> e:<br>        e.add_note(<span class="hljs-string">&quot;我是 1&quot;</span>)<br>        e.add_note(<span class="hljs-string">&quot;我是 2&quot;</span>)<br>        <span class="hljs-keyword">raise</span><br>    <span class="hljs-keyword">return</span> r<br><br>divide(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/home/probie/workspace/python/base-python/test.py&quot;</span>, line <span class="hljs-number">10</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    divide(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br>  File <span class="hljs-string">&quot;/home/probie/workspace/python/base-python/test.py&quot;</span>, line <span class="hljs-number">3</span>, <span class="hljs-keyword">in</span> divide<br>    r = a / b<br>        ~~^~~<br>ZeroDivisionError: division by zero<br>我是 <span class="hljs-number">1</span><br>我是 <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h3 id="4、自定义异常"><a href="#4、自定义异常" class="headerlink" title="4、自定义异常"></a>4、自定义异常</h3><p>通过创建新的类自定义异常，自定义类需要直接或间接的方式继承 <code>Exception</code> 类。<code>Exception</code> 可以被用作通配符，捕获（几乎）一切。大多数异常命名都以 “Error” 结尾，类似标准异常的命名。</p><p><em><code>BaseException</code>是所有异常的共同基类。它的一个子类， <code>Exception</code>，是所有非致命异常的基类。不是 <code>Exception</code>的子类的异常通常不被处理，因为它们被用来指示程序应该终止。</em></p><h4 id="4-1-基本自定义异常"><a href="#4-1-基本自定义异常" class="headerlink" title="4.1 基本自定义异常"></a>4.1 基本自定义异常</h4><p><strong>语法：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">名称Error</span>(<span class="hljs-title class_ inherited__">Exception</span>):  <span class="hljs-comment"># 此处Exception可以变更为其他任何继承 Exception 的类</span><br>    paas<br></code></pre></td></tr></table></figure><p><strong>示例</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseError</span>(<span class="hljs-title class_ inherited__">Exception</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;Base class for all custom exceptions in the module.&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">pass</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubErrorA</span>(<span class="hljs-title class_ inherited__">BaseError</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;Exception raised for specific error A.&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">pass</span><br><br>i = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入一个整数：&quot;</span>))<br><br><span class="hljs-keyword">if</span> i &lt; <span class="hljs-number">0</span>:<br>    <span class="hljs-keyword">raise</span> SubErrorA(<span class="hljs-string">&quot;输入的整数不能为负数。&quot;</span>)<br><span class="hljs-keyword">elif</span> i == <span class="hljs-number">0</span>:<br>    <span class="hljs-keyword">raise</span> BaseError(<span class="hljs-string">&quot;输入的整数不能为零。&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;输入的整数是：<span class="hljs-subst">&#123;i&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><p>匹配 <code>SubErrorA</code>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">请输入一个整数：-<span class="hljs-number">1</span><br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/home/probie/workspace/python/base-python/test.py&quot;</span>, line <span class="hljs-number">12</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    <span class="hljs-keyword">raise</span> SubErrorA(<span class="hljs-string">&quot;输入的整数不能为负数。&quot;</span>)<br>SubErrorA: 输入的整数不能为负数。<br></code></pre></td></tr></table></figure><p>匹配<code>BaseError</code>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">请输入一个整数：<span class="hljs-number">0</span><br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/home/probie/workspace/python/base-python/test.py&quot;</span>, line <span class="hljs-number">14</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    <span class="hljs-keyword">raise</span> BaseError(<span class="hljs-string">&quot;输入的整数不能为零。&quot;</span>)<br>BaseError: 输入的整数不能为零。<br></code></pre></td></tr></table></figure><p>正常输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">请输入一个整数：<span class="hljs-number">2</span><br>输入的整数是：<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h4 id="4-2-增加自定义操作异常定义"><a href="#4-2-增加自定义操作异常定义" class="headerlink" title="4.2 增加自定义操作异常定义"></a>4.2 增加自定义操作异常定义</h4><p><strong>自定义异常描述格式</strong></p><p>需要重写 <code>__str__</code>方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">名称Error</span>(<span class="hljs-title class_ inherited__">Exception</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__str__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># 自定义逻辑</span><br>        <span class="hljs-keyword">return</span> xx<br></code></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonError</span>(<span class="hljs-title class_ inherited__">Exception</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, code</span>):<br>        <span class="hljs-variable language_">self</span>._code = code<br>        <span class="hljs-built_in">super</span>().__init__(code)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__str__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>._code == <span class="hljs-string">&quot;ERR101&quot;</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;输入的整数不能为负数&quot;</span><br>        <span class="hljs-keyword">elif</span> <span class="hljs-variable language_">self</span>._code == <span class="hljs-string">&quot;ERR102&quot;</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;输入的值不是整数&quot;</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;未知错误&quot;</span><br><br>i = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入一个整数: &quot;</span>))<br><span class="hljs-keyword">if</span> i &lt; <span class="hljs-number">0</span>:<br>    <span class="hljs-keyword">raise</span> CommonError(<span class="hljs-string">&quot;ERR101&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;输入的整数是:&quot;</span>, i)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">请输入一个整数: -<span class="hljs-number">2</span><br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/home/probie/workspace/python/base-python/test.py&quot;</span>, line <span class="hljs-number">16</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    <span class="hljs-keyword">raise</span> CommonError(<span class="hljs-string">&quot;ERR101&quot;</span>)<br>CommonError: 输入的整数不能为负数<br><br><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python装饰器</title>
    <link href="/python/decorator.html"/>
    <url>/python/decorator.html</url>
    
    <content type="html"><![CDATA[<h2 id="一、定义"><a href="#一、定义" class="headerlink" title="一、定义"></a>一、定义</h2><p><strong>装饰器</strong>是对函数的一个装饰，通过装饰器可以做到在不改变目标函数逻辑的情况下增强目标函数的能力；当调用被装饰函数时，实际上是运行装饰器返回的那个包装函数，装饰器中需要处理对目标函数的调用。</p><p><strong>常见使用场景：</strong></p><ul><li>日志记录：自动记录函数什么时候被调用、参数是什么，返回值是什么</li><li>权限控制：可以检查用户是否用于访问接口的权限</li></ul><h2 id="二、装饰器的使用"><a href="#二、装饰器的使用" class="headerlink" title="二、装饰器的使用"></a>二、装饰器的使用</h2><h3 id="1、无参数装饰器"><a href="#1、无参数装饰器" class="headerlink" title="1、无参数装饰器"></a>1、无参数装饰器</h3><p><strong>语法：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">装饰器的名称</span>(<span class="hljs-params">func</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):<br>        result = func(*args, **kwargs)<br>        <span class="hljs-keyword">return</span> result<br>    <span class="hljs-keyword">return</span> wrapper<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):<br>        <span class="hljs-comment"># 在这里可以添加 “额外逻辑”</span><br>        result = func(*args, **kwargs)  <span class="hljs-comment"># 调用原函数</span><br>        <span class="hljs-comment"># 在这里可以添加 “额外逻辑”</span><br>        <span class="hljs-keyword">return</span> result<br>    <span class="hljs-keyword">return</span> wrapper<br><br><span class="hljs-meta">@decorator</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>(<span class="hljs-params">...</span>):<br>    ...<br><br></code></pre></td></tr></table></figure><ul><li>接收一个函数作为外层参数</li><li>内部返回一个函数，内部函数处理任意参数，调用目标函数</li><li>使用<code>*args</code> <code>**kwargs</code>，让装饰器适配任意参数签名，不必逐个定义</li></ul><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">log_decorator</span>(<span class="hljs-params">func</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Before calling&quot;</span>, func.__name__)<br>        result = func(*args, **kwargs)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;After calling&quot;</span>, func.__name__)<br>        <span class="hljs-keyword">return</span> result<br>    <span class="hljs-keyword">return</span> wrapper<br><br><span class="hljs-meta">@log_decorator</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello&quot;</span>, name)<br><br>greet(<span class="hljs-string">&quot;Alice&quot;</span>)<br><br><span class="hljs-comment"># 输出</span><br>Before calling greet<br>Hello Alice<br>After calling greet<br></code></pre></td></tr></table></figure><h3 id="2、有参数装饰器"><a href="#2、有参数装饰器" class="headerlink" title="2、有参数装饰器"></a>2、有参数装饰器</h3><p>如果想要装饰器也支持参数，那么就需要在嵌套一层函数，最外层函数接收装饰器的参数。</p><p><strong>语法：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">最外层函数名</span>(<span class="hljs-params">装饰器参数名</span>):<br>    <span class="hljs-comment"># 无参数装饰器</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">repeat</span>(<span class="hljs-params">times</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):<br>            <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(times):<br>                func(*args, **kwargs)<br>        <span class="hljs-keyword">return</span> wrapper<br>    <span class="hljs-keyword">return</span> decorator<br><br></code></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">logger</span>(<span class="hljs-params">level</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;[<span class="hljs-subst">&#123;level&#125;</span>] Calling <span class="hljs-subst">&#123;func.__name__&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">return</span> func(*args, **kwargs)<br>        <span class="hljs-keyword">return</span> wrapper<br>    <span class="hljs-keyword">return</span> decorator<br><br><span class="hljs-meta">@logger(<span class="hljs-params"><span class="hljs-string">&quot;DEBUG&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">return</span> a * b<br><br><span class="hljs-built_in">print</span>(multiply(<span class="hljs-number">5</span>, <span class="hljs-number">6</span>))<br><br><span class="hljs-comment"># 输出 </span><br>[DEBUG] Calling multiply<br><span class="hljs-number">30</span><br></code></pre></td></tr></table></figure><h3 id="3、保留被装饰函数的原始信息"><a href="#3、保留被装饰函数的原始信息" class="headerlink" title="3、保留被装饰函数的原始信息"></a>3、保留被装饰函数的原始信息</h3><p>默认情况下，目标函数被装饰器装饰后，由于函数的执行被内部函数<code>wrapper</code>包裹，在获取原函数的元数据（例如函数名、文档注释）信息时，获取到的是 <code>wrapper</code>函数的名称和文档注释。</p><p>例如以下示例代码，我们期望获取到的函数名是 <code>multiply</code>,然而实际获取到的却是 <code>wrapper</code>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">logger</span>(<span class="hljs-params">level</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):<br>            <span class="hljs-string">&quot;&quot;&quot;I am a wrapper function&quot;&quot;&quot;</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;[<span class="hljs-subst">&#123;level&#125;</span>] Calling <span class="hljs-subst">&#123;func.__name__&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">return</span> func(*args, **kwargs)<br>        <span class="hljs-keyword">return</span> wrapper<br>    <span class="hljs-keyword">return</span> decorator<br><br><span class="hljs-meta">@logger(<span class="hljs-params"><span class="hljs-string">&quot;DEBUG&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    Docstring for multiply</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    :param a: Description</span><br><span class="hljs-string">    :param b: Description</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> a * b<br><br><span class="hljs-built_in">print</span>(multiply.__name__)<br><span class="hljs-built_in">print</span>(multiply.__doc__)<br><span class="hljs-built_in">print</span>(multiply.__module__)<br><span class="hljs-built_in">print</span>(multiply.__annotations__)<br><br><span class="hljs-comment"># 输出</span><br>wrapper<br>I am a wrapper function<br>__main__<br>&#123;&#125;<br></code></pre></td></tr></table></figure><p>那么如果我们想要获取被装饰函数的原始信息时，应该要如何实现呢？答案是使用 <code>functools.wraps</code> 来将原函数的元数据信息复制到包装函数上，包括但不限于：</p><ul><li>函数名（<code>__name__</code>）</li><li>文档字符串（<code>__doc__</code>）</li><li>模块名（<code>__module__</code>）</li></ul><p><strong>语法：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 1、引入 from functools import wraps</span><br><span class="hljs-comment"># 2、内部 wrapper 函数增加 @wraps(func)</span><br></code></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">logger</span>(<span class="hljs-params">level</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):<br><span class="hljs-meta">        @wraps(<span class="hljs-params">func</span>)</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):<br>            <span class="hljs-string">&quot;&quot;&quot;I am a wrapper function&quot;&quot;&quot;</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;[<span class="hljs-subst">&#123;level&#125;</span>] Calling <span class="hljs-subst">&#123;func.__name__&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">return</span> func(*args, **kwargs)<br>        <span class="hljs-keyword">return</span> wrapper<br>    <span class="hljs-keyword">return</span> decorator<br><br><span class="hljs-meta">@logger(<span class="hljs-params"><span class="hljs-string">&quot;DEBUG&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    Docstring for multiply</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    :param a: Description</span><br><span class="hljs-string">    :param b: Description</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> a * b<br><br><span class="hljs-built_in">print</span>(multiply.__name__)<br><span class="hljs-built_in">print</span>(multiply.__doc__)<br><span class="hljs-built_in">print</span>(multiply.__module__)<br><span class="hljs-built_in">print</span>(multiply.__annotations__)<br><br><span class="hljs-comment"># 输出</span><br>multiply<br><br>    Docstring <span class="hljs-keyword">for</span> multiply<br>    <br>    :param a: Description<br>    :param b: Description<br>    <br>__main__<br>&#123;&#125;<br></code></pre></td></tr></table></figure><p><em>模块名是由于测试的时候都在 main中测试</em></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">func</span>):<br><span class="hljs-meta">    @wraps(<span class="hljs-params">func</span>)</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):<br>        <span class="hljs-comment"># 打印入参</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Calling <span class="hljs-subst">&#123;func.__name__&#125;</span> with args: <span class="hljs-subst">&#123;args&#125;</span>, kwargs: <span class="hljs-subst">&#123;kwargs&#125;</span>&quot;</span>)<br>        result = func(*args, **kwargs)<br>        <span class="hljs-comment"># 打印返回值</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;func.__name__&#125;</span> returned: <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> result<br>    <span class="hljs-keyword">return</span> wrapper<br><br><span class="hljs-meta">@log</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">return</span> a + b<br><br><span class="hljs-built_in">print</span>(add(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>))  <span class="hljs-comment"># Output: 5</span><br><br><br><span class="hljs-comment"># 输出</span><br>Calling add <span class="hljs-keyword">with</span> args: (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>), kwargs: &#123;&#125;<br>add returned: <span class="hljs-number">5</span><br><span class="hljs-number">5</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python类</title>
    <link href="/python/class.html"/>
    <url>/python/class.html</url>
    
    <content type="html"><![CDATA[<h2 id="一、概念"><a href="#一、概念" class="headerlink" title="一、概念"></a>一、概念</h2><p><strong>什么是类？</strong></p><p><em>类</em>是对现实世界事物的一种抽象，这些事物拥有相同的数据属性，相同的行为，只是在个体表达上具有独立的数据。例如：我们可以将现实世界的小狗抽象为Python中的类，它们都拥有年龄，毛色等属性数据，吃、跑等相同的行为，只是不同品种的小狗拥有不同的属性数据。</p><p><strong>为什么需要类？</strong></p><p>我们学习过函数、模块和包，都是在不同维度对数据或逻辑的一种抽象，实现代码的复用；然而随着程序复杂度增加，数据和处理逻辑变多，代码管理开始变得混乱，<strong>类</strong>让数据和操作这些数据的函数“住到一个地方”—— 同一对象的数据和行为耦合在一起，更好组织代码。 同时，通过类，我们可以让调用方不直接操作属性，属性对外不可见，属性的获取或着修改都必须通过行为函数，达到数据的封装目的。</p><h2 id="二、类的定义"><a href="#二、类的定义" class="headerlink" title="二、类的定义"></a>二、类的定义</h2><h3 id="1、基本语法结构"><a href="#1、基本语法结构" class="headerlink" title="1、基本语法结构"></a>1、基本语法结构</h3><p><strong>类的定义：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassName</span>:<br>    &lt;语句-<span class="hljs-number">1</span>&gt;<br>    .<br>    .<br>    .<br>    &lt;语句-N&gt;<br>    <br></code></pre></td></tr></table></figure><p><strong>类的实例化：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">变量名 = 类名()<br></code></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;一个简单的示例类&quot;&quot;&quot;</span><br>    i = <span class="hljs-number">12345</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;hello world&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>类的实例化使用：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">x = MyClass()<br></code></pre></td></tr></table></figure><h3 id="2、对象实例创建方法-new"><a href="#2、对象实例创建方法-new" class="headerlink" title="2、对象实例创建方法 __new__"></a>2、对象实例创建方法 <code>__new__</code></h3><p><code>__new__</code>是一个特殊的方法，名称前后各有两对下划线，它在对象实例化过程的最前面执行，用于<strong>真正创建一个对象实例</strong>。</p><p><strong>是否需要自定义实现<code>__new__方法</code>？</strong></p><p>答：在大多数日常情况下，不需要重写<code>__new__</code>，只需要重写<code>__init__</code>完成对象初始化即可。</p><p><strong>什么时候需要自定义<code>__new__</code>方法？</strong></p><p>答：需要自定义对象的创建过程的时候。</p><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__new__</span>(<span class="hljs-params">cls, *args, **kwargs</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&gt;&gt;&gt; __new__ called&quot;</span>)<br>        obj = <span class="hljs-built_in">super</span>().__new__(cls)<br>        <span class="hljs-keyword">return</span> obj<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, val</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&gt;&gt;&gt; __init__ called&quot;</span>)<br>        <span class="hljs-variable language_">self</span>.val = val<br><br>d = Demo(<span class="hljs-number">42</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Value:&quot;</span>, d.val)<br><br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python-repl"><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">__new__ called</span><br><span class="hljs-meta prompt_">&gt;&gt;&gt;</span> <span class="language-python">__init__ called</span><br>Value: 42<br><br></code></pre></td></tr></table></figure><h3 id="3、初始化方法-init"><a href="#3、初始化方法-init" class="headerlink" title="3、初始化方法 __init__"></a>3、初始化方法 <code>__init__</code></h3><p><code>__init__</code>是一个特殊的方法，名称前后各有两对下划线，它不需要也不应该手动调用，它是由解释器在对象创建时自动执行的。</p><p><strong>用途：</strong></p><ul><li>初始化对象属性</li><li>设置参数默认值，使对象处于有效状态</li><li>执行其他初始化行为</li></ul><p><strong>基本语法：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassName</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, …</span>):<br>        <span class="hljs-comment"># 初始化代码</span><br><br></code></pre></td></tr></table></figure><ul><li>首个参数为<code>self</code>，表示当前方法属于实例，而非<code>class</code></li><li>后边可以可选的接收多个参数，在构造实例对象时必须传入的值，接受位置参数，默认参数，任意数量参数。</li></ul><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x=<span class="hljs-number">0</span>, y=<span class="hljs-number">0</span></span>):<br>        <span class="hljs-variable language_">self</span>.x = x<br>        <span class="hljs-variable language_">self</span>.y = y<br><br>p1 = Point()         <span class="hljs-comment"># 默认为 (0, 0)</span><br>p2 = Point(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>)    <span class="hljs-comment"># 自定义坐标</span><br><br><span class="hljs-built_in">print</span>(p1.x, p1.y)   <span class="hljs-comment"># 0 0</span><br><span class="hljs-built_in">print</span>(p2.x, p2.y)   <span class="hljs-comment"># 5 10</span><br><br></code></pre></td></tr></table></figure><h3 id="4、类的属性"><a href="#4、类的属性" class="headerlink" title="4、类的属性"></a>4、类的属性</h3><p><strong>属性（attribute）</strong> 指的是 <strong>与某个对象相关联的数据或特性</strong>。它可以是变量、值，表示这个对象有哪些“状态&#x2F;特征”。可以通过 <strong>点号语法</strong> (<code>obj.attribute</code>) 来访问它，相当于描述这个对象“拥有什么”。</p><h4 id="4-1-类属性"><a href="#4-1-类属性" class="headerlink" title="4.1 类属性"></a>4.1 类属性</h4><p>定义在类体中 <strong>但不在 <code>__init__()</code> 里</strong> 的变量。</p><ul><li>属于类本身</li><li>所有该类的实例共享这个属性</li><li>用于存放所有对象共有的数据</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span>:<br>    species = <span class="hljs-string">&quot;Canis familiaris&quot;</span>  <span class="hljs-comment"># 类属性</span><br><br><span class="hljs-built_in">print</span>(Dog.species)  <span class="hljs-comment"># 访问类属性</span><br><br></code></pre></td></tr></table></figure><p>所有 <code>Dog()</code> 对象默认都有相同的 <code>species</code> 属性。</p><h4 id="4-2-实例属性"><a href="#4-2-实例属性" class="headerlink" title="4.2 实例属性"></a>4.2 实例属性</h4><p>定义在对象实例中，通常在 <code>__init__()</code> 内用 <code>self</code> 赋值。</p><ul><li>属于某个对象实例</li><li>每个实例可以有自己独立的值</li><li>表示该实例的特定状态</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, age</span>):<br>        <span class="hljs-variable language_">self</span>.name = name        <span class="hljs-comment"># 实例属性</span><br>        <span class="hljs-variable language_">self</span>.age = age          <span class="hljs-comment"># 实例属性</span><br><br>d1 = Dog(<span class="hljs-string">&quot;Buddy&quot;</span>, <span class="hljs-number">5</span>)<br><span class="hljs-built_in">print</span>(d1.name, d1.age)<br><br></code></pre></td></tr></table></figure><p>这里 <code>name</code> 和 <code>age</code> 是各个对象独立的属性。</p><h5 id="4-2-1-property装饰器"><a href="#4-2-1-property装饰器" class="headerlink" title="4.2.1 @property装饰器"></a>4.2.1 <code>@property</code>装饰器</h5><p><code>@property</code>的作用：</p><ul><li>把一个普通方法变成 属性访问方式</li><li>可以在读取、设置、删除属性时加入逻辑（如验证，计算等）</li></ul><blockquote><p> 换句话说，Python 允许你像访问成员变量一样访问方法，但这个方法可以在内部执行任意逻辑，通过 <code>@property</code>装饰器，可以对实例属性的访问和设置增加自定义保护逻辑</p></blockquote><p><strong>基本语法：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span>:<br><span class="hljs-meta">    @property</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">prop</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> ...<br><span class="hljs-meta">    @prop.setter</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">prop</span>(<span class="hljs-params">self, value</span>):<br>        ...<br><br><span class="hljs-meta">    @prop.deleter</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">prop</span>(<span class="hljs-params">self</span>):<br>        ...<br></code></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, age</span>):<br>        <span class="hljs-comment"># 通常把实际存储属性设为带下划线的内部变量</span><br>        <span class="hljs-variable language_">self</span>._name = name<br>        <span class="hljs-variable language_">self</span>._age = age<br><br>    <span class="hljs-comment"># —— getter：读取属性</span><br><span class="hljs-meta">    @property</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">name</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>._name<br><br>    <span class="hljs-comment"># —— setter：设置属性</span><br><span class="hljs-meta">    @name.setter</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">name</span>(<span class="hljs-params">self, value</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(value, <span class="hljs-built_in">str</span>):<br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;名字必须是字符串&quot;</span>)<br>        <span class="hljs-variable language_">self</span>._name = value<br><br>    <span class="hljs-comment"># —— deleter：删除属性</span><br><span class="hljs-meta">    @name.deleter</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">name</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;删除 name 属性 …&quot;</span>)<br>        <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>._name<br><br><span class="hljs-meta">    @property</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">age</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>._age<br><br><span class="hljs-meta">    @age.setter</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">age</span>(<span class="hljs-params">self, value</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(value, <span class="hljs-built_in">int</span>) <span class="hljs-keyword">or</span> value &lt; <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;年龄必须是非负整数&quot;</span>)<br>        <br>        <span class="hljs-keyword">if</span> value &gt; <span class="hljs-number">120</span>:<br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;年龄不应超过120岁&quot;</span>)<br>        <span class="hljs-variable language_">self</span>._age = value<br><br><span class="hljs-meta">    @age.deleter</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">age</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;删除 age 属性 …&quot;</span>)<br>        <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>._age<br><br><br>p = Person(<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">30</span>)<br><br><span class="hljs-comment"># —— 获取（get）</span><br><span class="hljs-built_in">print</span>(p.name)  <span class="hljs-comment"># Alice</span><br><span class="hljs-built_in">print</span>(p.age)   <span class="hljs-comment"># 30</span><br><br><span class="hljs-comment"># —— 修改（set）</span><br>p.name = <span class="hljs-string">&quot;Bob&quot;</span> <br>p.age = <span class="hljs-number">25</span><br><span class="hljs-built_in">print</span>(p.name, p.age)  <span class="hljs-comment"># Bob 25</span><br><br><span class="hljs-comment"># 修改 age  ，触发 set 验证逻辑</span><br><span class="hljs-comment"># p.age = 130  # 会抛出 ValueError: 年龄不应超过120岁</span><br><br><span class="hljs-comment"># —— 删除（del）</span><br><span class="hljs-keyword">del</span> p.name        <span class="hljs-comment"># 调用 name.deleter</span><br><span class="hljs-comment"># print(p.name)   # 访问时如果内部属性被删掉将抛 AttributeError</span><br><br><span class="hljs-keyword">del</span> p.age         <span class="hljs-comment"># 调用 age.deleter</span><br><span class="hljs-comment"># print(p.age)    # 同样会抛出错误，因为内部的 _age 属性被删掉</span><br><br></code></pre></td></tr></table></figure><p><em>装饰器后续介绍</em></p><h4 id="4-3-类属性-vs-实例属性-对比"><a href="#4-3-类属性-vs-实例属性-对比" class="headerlink" title="4.3 类属性 vs 实例属性 对比"></a>4.3 类属性 vs 实例属性 对比</h4><table><thead><tr><th>特性</th><th>类属性</th><th>实例属性</th></tr></thead><tbody><tr><td>定义位置</td><td>类体内部</td><td>通常在 <code>__init__</code> 中用 <code>self</code> 定义</td></tr><tr><td>所属</td><td>属于类</td><td>属于对象实例</td></tr><tr><td>是否共享</td><td>✔️ 全部实例共享</td><td>❌ 每个对象自己的值</td></tr><tr><td>访问方式</td><td><code>Class.attr</code> 或 <code>instance.attr</code></td><td><code>instance.attr</code></td></tr><tr><td>修改作用域</td><td>修改类属性影响所有实例</td><td>修改只影响当前实例</td></tr></tbody></table><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span>:<br>    <span class="hljs-comment"># 类属性</span><br>    wheels = <span class="hljs-number">4</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, brand, model</span>):<br>        <span class="hljs-comment"># 实例属性</span><br>        <span class="hljs-variable language_">self</span>.brand = brand<br>        <span class="hljs-variable language_">self</span>.model = model<br><br>car1 = Car(<span class="hljs-string">&quot;Toyota&quot;</span>, <span class="hljs-string">&quot;Camry&quot;</span>)<br>car2 = Car(<span class="hljs-string">&quot;Honda&quot;</span>, <span class="hljs-string">&quot;Civic&quot;</span>)<br><br><span class="hljs-built_in">print</span>(Car.wheels)        <span class="hljs-comment"># 4</span><br><span class="hljs-built_in">print</span>(car1.wheels)       <span class="hljs-comment"># 4（实例访问类属性）</span><br><span class="hljs-built_in">print</span>(car1.brand)        <span class="hljs-comment"># Toyota</span><br><span class="hljs-built_in">print</span>(car2.model)        <span class="hljs-comment"># Civic</span><br><br></code></pre></td></tr></table></figure><h3 id="5、私有变量和属性"><a href="#5、私有变量和属性" class="headerlink" title="5、私有变量和属性"></a>5、私有变量和属性</h3><p>在<code>python</code>的<code>class</code>中，“私有变量&#x2F;私有方法“不是语言层面的强制私有，而是通过<strong>命名约定</strong>的方式来实现，告诉外部，我定义的是一个私有的，不要直接引用。</p><p><strong>定义：</strong></p><ul><li><strong>单下划线 <code>_name</code></strong>：约定式“内部使用”，<em>外部还是可以访问到</em></li></ul><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-variable language_">self</span>._token = <span class="hljs-string">&quot;abc123&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_refresh_token</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;refresh token&quot;</span>)<br><br><br>u = User()<br><span class="hljs-built_in">print</span>(u._token)        <span class="hljs-comment"># 可以，但不推荐</span><br>u._refresh_token()     <span class="hljs-comment"># 可以，但不推荐</span><br><br><span class="hljs-comment"># 输出</span><br>abc123<br>refresh token<br></code></pre></td></tr></table></figure><p><strong>推荐使用私有变量+<code>@property</code>的方式实现属性在约定上的隐藏，并可以对属性的获取和设置有保护机制</strong></p><h3 id="6、方法的定义"><a href="#6、方法的定义" class="headerlink" title="6、方法的定义"></a>6、方法的定义</h3><h4 id="6-1-实例方法"><a href="#6-1-实例方法" class="headerlink" title="6.1 实例方法"></a>6.1 实例方法</h4><p>类定义中最常见的类方法，它第一个参数是 <code>self</code>，表示当前对象实例。必须通过实例对象来调用，能访问对象的属性和方法。</p><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">instance_method</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-variable language_">self</span>)<br><br></code></pre></td></tr></table></figure><h4 id="6-2-类方法"><a href="#6-2-类方法" class="headerlink" title="6.2 类方法"></a>6.2 类方法</h4><p>使用装饰器 <code>@classmethod</code> 定义，<strong>第一个参数是类本身 <code>cls</code></strong>，表示当前类，方法属于类。</p><ul><li>不需要创建实例，也可以通过类名调用。</li><li>可以访问类属性、调用类方法、创建实例（例如工厂方法）。</li><li>方法的行为是实例无关的，和类紧密相关的</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>:<br>    species = <span class="hljs-string">&quot;Human&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name</span>):<br>        <span class="hljs-variable language_">self</span>.name = name<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">change_species</span>(<span class="hljs-params">cls, new_species</span>):<br>        cls.species = new_species<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">from_fullname</span>(<span class="hljs-params">cls, fullname</span>):<br>        <span class="hljs-comment"># 作为另一种构造方式（工厂方法）</span><br>        first, last = fullname.split()<br>        <span class="hljs-keyword">return</span> cls(first + <span class="hljs-string">&quot; &quot;</span> + last)<br><br><span class="hljs-built_in">print</span>(Person.species)  <span class="hljs-comment"># Human</span><br><br>Person.change_species(<span class="hljs-string">&quot;Homo sapiens&quot;</span>)<br><span class="hljs-built_in">print</span>(Person.species)  <span class="hljs-comment"># Homo sapiens</span><br><br>p = Person.from_fullname(<span class="hljs-string">&quot;John Doe&quot;</span>)<br><span class="hljs-built_in">print</span>(p.name)          <span class="hljs-comment"># John Doe</span><br><br></code></pre></td></tr></table></figure><h4 id="6-3-静态方法"><a href="#6-3-静态方法" class="headerlink" title="6.3 静态方法"></a>6.3 静态方法</h4><p>使用装饰器 <code>@staticmethod</code> 定义，<strong>不会自动接收 <code>self</code> 或 <code>cls</code> 参数</strong>，方法不依赖任何类或实例上下文，仅作为分类组织的工具函数，与类逻辑相关但不操作状态。</p><ul><li>它更像一个归类到类里边的普通函数，<strong>与类状态和实例状态无关</strong>。</li><li>常用于把一些逻辑组织在类的命名空间下，但这个逻辑不依赖类的数据。</li></ul><h4 id="6-4-对比"><a href="#6-4-对比" class="headerlink" title="6.4 对比"></a>6.4 对比</h4><table><thead><tr><th>特征</th><th>实例方法</th><th>类方法</th><th>静态方法</th></tr></thead><tbody><tr><td>第一个参数</td><td><code>self</code></td><td><code>cls</code></td><td>无特殊参数</td></tr><tr><td>是否需要实例调用</td><td>是</td><td>否</td><td>否</td></tr><tr><td>访问实例属性</td><td>✅</td><td>❌</td><td>❌</td></tr><tr><td>访问类属性</td><td>✅（via self）</td><td>✅</td><td>❌</td></tr><tr><td>常见用途</td><td>操作对象状态</td><td>工厂方法、操作类状态</td><td>辅助工具、算法等</td></tr></tbody></table><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span>:<br>    count = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        Demo.count += <span class="hljs-number">1</span><br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_count</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-keyword">return</span> cls.count     <span class="hljs-comment"># 访问类属性</span><br><br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>(<span class="hljs-params">msg</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Hello <span class="hljs-subst">&#123;msg&#125;</span>&quot;</span><br><br>d1 = Demo()<br>d2 = Demo()<br><br><span class="hljs-built_in">print</span>(Demo.get_count())          <span class="hljs-comment"># 2  </span><br><span class="hljs-built_in">print</span>(Demo.hello(<span class="hljs-string">&quot;world&quot;</span>))       <span class="hljs-comment"># Hello world</span><br><br></code></pre></td></tr></table></figure><h3 id="7、类的继承"><a href="#7、类的继承" class="headerlink" title="7、类的继承"></a>7、类的继承</h3><p><strong>继承</strong> 是指一个类（子类）从另一个类（父类&#x2F;基类）<strong>继承属性和方法</strong> 的机制</p><ul><li><p>父类（Parent &#x2F; Base Class &#x2F; Superclass）定义通用行为和数据，更基础的数据和行为，例如父类定义为汽车，都具备鸣笛行为</p></li><li><p>子类（Child &#x2F; Derived Class &#x2F; Subclass）继承这些行为&#x2F;数据，还能 <strong>扩展或覆盖（override）</strong> 它们，例如汽车子类中，越野车可能具备新的行为，越野能力，同时鸣笛行为也有自己的个性化。</p></li></ul><p><em>扩展：</em> 子类拥有自己的行为或属性</p><p><em>覆盖：</em> 从父类继承的行为，子类有不同的表现形式时，可以通过覆写父类的方法达成</p><p><strong>作用：</strong></p><ul><li>定义一次方法或属性，在多个子类中都能自动使用，避免重复编码。 </li><li>建立层次化的代码结构，反映现实世界的层次关系</li><li>通过扩展或覆盖增加子类的个性化</li></ul><p><strong>语法：</strong></p><p>子类中使用 <code>super()</code> 访问父类的属性或方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseClass</span>:<br>    <span class="hljs-comment"># 父类定义</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubClass</span>(<span class="hljs-title class_ inherited__">BaseClass</span>):<br>    <span class="hljs-comment"># 子类定义</span><br><br></code></pre></td></tr></table></figure><p><strong>基础示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">speak</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Animal makes a sound&quot;</span>)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-title class_ inherited__">Animal</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">bark</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Dog barks&quot;</span>)<br><br>d = Dog()<br>d.speak()  <span class="hljs-comment"># 从父类继承的方法</span><br>d.bark()   <span class="hljs-comment"># 子类自己的方法</span><br><br></code></pre></td></tr></table></figure><p><strong>super()示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">speak</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Animal makes a sound&quot;</span>)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-title class_ inherited__">Animal</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">speak</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>().speak()  <span class="hljs-comment"># 调用父类的 speak 方法</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Dog says: Woof!&quot;</span>)<br><br>dog = Dog()<br>dog.speak() <span class="hljs-comment"># 输出： Animal makes a sound</span><br>            <span class="hljs-comment">#       Dog says: Woof!</span><br><br></code></pre></td></tr></table></figure><p><strong>覆写override示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">speak</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Animal makes a generic sound&quot;</span>)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-title class_ inherited__">Animal</span>):<br>    <span class="hljs-keyword">pass</span><br>        <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span>(<span class="hljs-title class_ inherited__">Animal</span>):<br>    <span class="hljs-comment"># 重写父类方法</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">speak</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Cat says: Meow!&quot;</span>)<br><br>a = Animal()<br>d = Dog()<br>c = Cat()<br><br>a.speak()  <span class="hljs-comment"># Animal makes a generic sound</span><br><span class="hljs-comment"># 继承父类的方法</span><br>d.speak()  <span class="hljs-comment"># Dog says: Animal makes a generic sound</span><br>c.speak()  <span class="hljs-comment"># Cat says: Meow!</span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python简单输入与输出</title>
    <link href="/python/input_output.html"/>
    <url>/python/input_output.html</url>
    
    <content type="html"><![CDATA[<p>介绍在<code>Python</code>中如何借助内置函数<code>input</code>从标准输入（控制终端，键盘）获取用户输入；通过内置函数<code>print</code>将文本或变量的值输出到控制台。</p><h2 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h2><p><code>input()</code> 是 Python 的内置函数，用来 从标准输入（通常是键盘）获取一行用户输入，然后返回该输入的内容（作为字符串）。<br>它会让程序 暂停运行，等待用户输入并按下回车键。</p><p><strong>语法：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">input</span>([prompt])<br></code></pre></td></tr></table></figure><ul><li><p><strong>prompt</strong>：可选的字符串，用于在等待输入前先打印提示信息（不自动换行）。</p></li><li><p>函数返回值：<strong>字符串 (<code>str</code>)</strong>，即使你输入的是数字，它仍然是字符串。</p></li></ul><p><strong>示例：</strong></p><p>1、基本输入</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">name = <span class="hljs-built_in">input</span>()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Hello, <span class="hljs-subst">&#123;name&#125;</span>!&quot;</span>)<br></code></pre></td></tr></table></figure><p>在终端运行时，会等待输入，在输入 <code>name</code> 以后会打印结果：</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-keyword">name</span><br>Hello, <span class="hljs-keyword">name</span>!<br></code></pre></td></tr></table></figure><p>2、输入时带有提示</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">name = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;Enter your name: &quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Hello, <span class="hljs-subst">&#123;name&#125;</span>!&quot;</span>)<br></code></pre></td></tr></table></figure><p>在终端运行时，会在屏幕上输出<code>Enter your name:</code> 然后等待输入信息</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey"><span class="hljs-title">Enter your name:</span> probie<br><span class="hljs-built_in">Hello,</span> probie!<br></code></pre></td></tr></table></figure><h2 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h2><p><code>print()</code> 是 Python 的内置输出函数，用来 <strong>将文本或变量的值输出到屏幕（标准输出）</strong>。<br> 它是最常用的输出方法，用于显示程序结果、调试信息等。</p><p><strong>语法：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(*objects, sep=<span class="hljs-string">&#x27; &#x27;</span>, end=<span class="hljs-string">&#x27;\n&#x27;</span>, file=<span class="hljs-literal">None</span>, flush=<span class="hljs-literal">False</span>)<br></code></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td><code>*objects</code></td><td>要输出的多个对象，可以是字符串、数字、变量等</td></tr><tr><td><code>sep</code></td><td>多个输出项之间的分隔符，默认是空格 <code>&quot; &quot;</code></td></tr><tr><td><code>end</code></td><td>输出结束后追加的字符串，默认是换行 <code>&quot;\n&quot;</code></td></tr><tr><td><code>file</code></td><td>输出目标流（默认是 <code>sys.stdout</code>）</td></tr><tr><td><code>flush</code></td><td>是否立即刷新输出缓冲区</td></tr></tbody></table><p><strong>示例：</strong></p><p>1、基本输出</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello, Python!&quot;</span>)<br></code></pre></td></tr></table></figure><p>2、同时输出多个值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;c&#x27;</span>) <span class="hljs-comment"># a 1 c</span><br></code></pre></td></tr></table></figure><p>3、修改默认分割符为<code>-</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;c&#x27;</span>, sep=<span class="hljs-string">&#x27;-&#x27;</span>) <span class="hljs-comment"># a-1-c</span><br></code></pre></td></tr></table></figure><p>4、结尾不自动换行，使用 <code>;</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;a&#x27;</span>,  <span class="hljs-number">2</span>, end=<span class="hljs-string">&#x27;;&#x27;</span>) <span class="hljs-comment"># 1 a 2;</span><br></code></pre></td></tr></table></figure><p>5、将输出修改为文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;test.txt&#x27;</span>, mode=<span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Hello, World!&#x27;</span>, file=file)<br></code></pre></td></tr></table></figure><ul><li><code>open</code> 用于打开文件</li><li><code>with</code>一种特殊语法，对于文件等资源，打开后需要进行释放，如果不使用 <code>with</code> 需要手动<code>close</code>，还需要考虑异常情况，使用<code>with</code>会逻辑块结束后，自动执行<code>__exit__</code>进行资源清理 （<em>后续单独介绍with的使用</em>）</li></ul><h3 id="输出内容格式化"><a href="#输出内容格式化" class="headerlink" title="输出内容格式化"></a>输出内容格式化</h3><p>这里的格式化输出是在原始值的基础上进行一些输出格式美化处理，例如数字可以增加前缀0,字符串可以在指定显示宽度的情况下指定对齐方式。</p><h3 id="变量占位"><a href="#变量占位" class="headerlink" title="变量占位"></a>变量占位</h3><p>在进行值格式化输出前，需要先从变量的占位替换开始。</p><p><strong>语法：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">formatted_str = <span class="hljs-string">&quot;模板字符串 &#123;占位符&#125;&quot;</span>.<span class="hljs-built_in">format</span>(值<span class="hljs-number">1</span>, 值<span class="hljs-number">2</span>, ...)<br></code></pre></td></tr></table></figure><ul><li><p><strong>占位符 <code>{}</code></strong> 表示要插入的位置</p></li><li><p>可以按 <strong>顺序、索引、变量名</strong> 替换对应值</p></li><li><p>最后返回一个 <strong>新字符串</strong>（原字符串不变）</p></li></ul><p>1、按顺序替换变量</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">name = <span class="hljs-string">&quot;Alice&quot;</span><br>age = <span class="hljs-number">25</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Name: &#123;&#125;, Age: &#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(name, age))<br><span class="hljs-comment"># Output: Name: Alice, Age: 25</span><br><br></code></pre></td></tr></table></figure><p>2、使用索引（按位置插入）</p><p>使用索引的时候，会按照变量的索引查找并替换</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;1&#125;, &#123;0&#125;, &#123;1&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;banana&quot;</span>))<br><span class="hljs-comment"># Output: banana, apple, banana</span><br></code></pre></td></tr></table></figure><p>3、使用关键字参数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Name: &#123;name&#125;, Age: &#123;age&#125;&quot;</span>.<span class="hljs-built_in">format</span>(name=<span class="hljs-string">&quot;Charlie&quot;</span>, age=<span class="hljs-number">35</span>))<br><span class="hljs-comment"># Output: Name: Charlie, Age: 35</span><br><br></code></pre></td></tr></table></figure><h3 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出"></a>格式化输出</h3><p>概要格式：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">&#123;:[options][width_and_precision][<span class="hljs-built_in">type</span>]&#125;<br><span class="hljs-comment"># 填充对齐选项 宽度和精度 类型</span><br></code></pre></td></tr></table></figure><ul><li>对于字符串和数字会有不同的选项，例如数字会有格式（进制）或者浮点数精度</li></ul><p><em>标准格式说明符</em> 的一般形式如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">format_spec:             [options][width_and_precision][<span class="hljs-built_in">type</span>]<br>options:                 [[fill]align][sign][<span class="hljs-string">&quot;z&quot;</span>][<span class="hljs-string">&quot;#&quot;</span>][<span class="hljs-string">&quot;0&quot;</span>]<br>fill:                    &lt;<span class="hljs-built_in">any</span> character&gt;<br>align:                   <span class="hljs-string">&quot;&lt;&quot;</span> | <span class="hljs-string">&quot;&gt;&quot;</span> | <span class="hljs-string">&quot;=&quot;</span> | <span class="hljs-string">&quot;^&quot;</span><br>sign:                    <span class="hljs-string">&quot;+&quot;</span> | <span class="hljs-string">&quot;-&quot;</span> | <span class="hljs-string">&quot; &quot;</span><br>width_and_precision:     [width_with_grouping][precision_with_grouping]<br>width_with_grouping:     [width][grouping]<br>precision_with_grouping: <span class="hljs-string">&quot;.&quot;</span> [precision][grouping] | <span class="hljs-string">&quot;.&quot;</span> grouping<br>width:                   digit+<br>precision:               digit+<br>grouping:                <span class="hljs-string">&quot;,&quot;</span> | <span class="hljs-string">&quot;_&quot;</span><br><span class="hljs-built_in">type</span>:                    <span class="hljs-string">&quot;b&quot;</span> | <span class="hljs-string">&quot;c&quot;</span> | <span class="hljs-string">&quot;d&quot;</span> | <span class="hljs-string">&quot;e&quot;</span> | <span class="hljs-string">&quot;E&quot;</span> | <span class="hljs-string">&quot;f&quot;</span> | <span class="hljs-string">&quot;F&quot;</span> | <span class="hljs-string">&quot;g&quot;</span><br>                         | <span class="hljs-string">&quot;G&quot;</span> | <span class="hljs-string">&quot;n&quot;</span> | <span class="hljs-string">&quot;o&quot;</span> | <span class="hljs-string">&quot;s&quot;</span> | <span class="hljs-string">&quot;x&quot;</span> | <span class="hljs-string">&quot;X&quot;</span> | <span class="hljs-string">&quot;%&quot;</span><br></code></pre></td></tr></table></figure><h4 id="选项-options"><a href="#选项-options" class="headerlink" title="选项 options"></a>选项 options</h4><h5 id="对齐-align"><a href="#对齐-align" class="headerlink" title="对齐 align"></a>对齐 align</h5><p><strong>填充 fill</strong>：可以是任何合法的字符，<strong>填充字符不能单独出现，需要和对齐结合使用</strong>，例如： <code>a</code> <code>b</code> <code>1</code>等</p><p>给定宽度下，将值按照某个方向对齐以后，可以对空白位置填充字符。</p><p>各种对齐选项的含义如下：</p><table><thead><tr><th align="left">选项</th><th align="left">含意</th></tr></thead><tbody><tr><td align="left"><code>&#39;&lt;&#39;</code></td><td align="left">强制字段在可用空间内左对齐（这是大多数对象的默认值）。</td></tr><tr><td align="left"><code>&#39;&gt;&#39;</code></td><td align="left">强制字段在可用空间内右对齐（这是数字的默认值）。</td></tr><tr><td align="left"><code>&#39;^&#39;</code></td><td align="left">强制字段在可用空间内居中。</td></tr></tbody></table><p><strong>填充和对齐需要结合字符显示宽度一起使用，只有当字符实际长度小于格式指定的宽度的时候，会将字符按照要求的方向对齐，并填充对应的字符</strong></p><p><strong>示例：</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:*&lt;10&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;hello&quot;</span>)) <span class="hljs-comment"># hello*****</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:*&gt;10&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;hello&quot;</span>)) <span class="hljs-comment"># *****hello</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:-^10&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;hello&quot;</span>)) <span class="hljs-comment"># --hello---</span><br></code></pre></td></tr></table></figure><h5 id="符号-sign"><a href="#符号-sign" class="headerlink" title="符号 sign"></a>符号 sign</h5><p><strong><em>sign</em> 选项仅对数字类型有效</strong></p><table><thead><tr><th align="left">选项</th><th align="left">含意</th></tr></thead><tbody><tr><td align="left"><code>&#39;+&#39;</code></td><td align="left">表示正负号应当同时用于正数与负数。不论正负数都需要展示符号</td></tr><tr><td align="left"><code>&#39;-&#39;</code></td><td align="left">表示正负号应当仅用于负数（这是默认的行为）。 正数不添加符号，负数添加 <code>-</code></td></tr><tr><td align="left">‘  ‘ 空格</td><td align="left">表示应当对正数使用前导空格，而对负数使用负号。</td></tr></tbody></table><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:+&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">42</span>)) <span class="hljs-comment"># +42</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:-&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">42</span>)) <span class="hljs-comment"># 42</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:+&#125;&quot;</span>.<span class="hljs-built_in">format</span>(-<span class="hljs-number">42</span>)) <span class="hljs-comment"># -42</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:-&#125;&quot;</span>.<span class="hljs-built_in">format</span>(-<span class="hljs-number">42</span>)) <span class="hljs-comment"># -42</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;: &#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">42</span>)) <span class="hljs-comment">#  42</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;: &#125;&quot;</span>.<span class="hljs-built_in">format</span>(-<span class="hljs-number">42</span>)) <span class="hljs-comment"># -42</span><br></code></pre></td></tr></table></figure><h4 id="宽度和精度-width-and-precision"><a href="#宽度和精度-width-and-precision" class="headerlink" title="宽度和精度 width_and_precision"></a>宽度和精度 width_and_precision</h4><h5 id="宽度-width"><a href="#宽度-width" class="headerlink" title="宽度 width"></a>宽度 width</h5><p><em>width</em> 是一个定义最小总字段宽度的十进制整数，包括任何任何前缀、分隔符和其他格式化字符。 如果未指定，则字段宽度将由内容确定。</p><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:&gt;10&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;Hello&quot;</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:*&gt;10&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;Hello&quot;</span>))<br><br><span class="hljs-comment"># 输出</span><br>     Hello<br>*****Hello<br></code></pre></td></tr></table></figure><h5 id="精度-precision"><a href="#精度-precision" class="headerlink" title="精度 precision"></a>精度 <em>precision</em></h5><p><em>precision</em> 是一个十进制整数，表示对于数值类型为浮点数(包含小数)的格式化的数值应当在小数点后显示多少个数位。不允许对整数表示类型指定 <em>precision</em> 字段。</p><p>使用的时候需要在数字后边指定数值类型。</p><p>小数部分实际位数不足时会在后边填充 0</p><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:.3f&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">232.34343</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:.3f&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">232.3</span>))<br></code></pre></td></tr></table></figure><h4 id="分组-group"><a href="#分组-group" class="headerlink" title="分组 group"></a>分组 group</h4><p><em>grouping</em> 选项分别为数字的整数和小数部分指定数字组分隔符，它跟在<em>width</em> 和 <em>precision</em> 字段后</p><table><thead><tr><th align="left">选项</th><th align="left">含意</th></tr></thead><tbody><tr><td align="left"><code>&#39;,&#39;</code></td><td align="left">对于整数表示类型 <code>&#39;d&#39;</code> 和每 3 个数位插入一个逗号。</td></tr><tr><td align="left"><code>&#39;_&#39;</code></td><td align="left">对于整数表示类型 <code>&#39;d&#39;</code> ，每 3 个数位插入一个下划线。 对于整数表示类型 <code>&#39;b&#39;</code>, <code>&#39;o&#39;</code>, <code>&#39;x&#39;</code> 和 <code>&#39;X&#39;</code>，则每 4 个数位插入一个下划线。</td></tr></tbody></table><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">num = <span class="hljs-number">234234234234.234234234234</span><br>res = <span class="hljs-string">&quot;&#123;:,.3f&#125;&quot;</span>.<span class="hljs-built_in">format</span>(num)  <span class="hljs-comment"># 结合小数位数</span><br><span class="hljs-built_in">print</span>(res)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:,&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">0x1234567890</span>))  <br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:_x&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">0x1234567890</span>))  <br><br><span class="hljs-comment"># 输出</span><br><span class="hljs-number">234</span>,<span class="hljs-number">234</span>,<span class="hljs-number">234</span>,<span class="hljs-number">234.234</span><br><span class="hljs-number">78</span>,<span class="hljs-number">187</span>,<span class="hljs-number">493</span>,<span class="hljs-number">520</span><br><span class="hljs-number">12_3456_7890</span><br></code></pre></td></tr></table></figure><h4 id="类型-type"><a href="#类型-type" class="headerlink" title="类型 type"></a>类型 type</h4><p>确定要展示的值类型，确定数据应该如何展示。</p><p>可用的字符串表示类型是：</p><table><thead><tr><th align="left">类型</th><th align="left">含意</th></tr></thead><tbody><tr><td align="left"><code>&#39;s&#39;</code></td><td align="left">字符串格式。这是字符串的默认类型，可以省略。</td></tr></tbody></table><p>可用的整数表示类型是：</p><table><thead><tr><th align="left">类型</th><th align="left">含意</th></tr></thead><tbody><tr><td align="left"><code>&#39;b&#39;</code></td><td align="left">二进制格式。 输出以 2 为基数的数字。</td></tr><tr><td align="left"><code>&#39;c&#39;</code></td><td align="left">字符。在打印之前将整数转换为相应的unicode字符。</td></tr><tr><td align="left"><code>&#39;d&#39;</code></td><td align="left">十进制整数。 输出以 10 为基数的数字。</td></tr><tr><td align="left"><code>&#39;o&#39;</code></td><td align="left">八进制格式。 输出以 8 为基数的数字。</td></tr><tr><td align="left"><code>&#39;x&#39;</code></td><td align="left">十六进制格式。 输出以 16 为基数的数字，使用小写字母表示 9 以上的数码。</td></tr><tr><td align="left"><code>&#39;X&#39;</code></td><td align="left">十六进制格式。 输出以 16 为基数的数字，使用大写字母表示 9 以上的数码。 在指定 <code>&#39;#&#39;</code> 的情况下，前缀 <code>&#39;0x&#39;</code> 也将被转为大写形式 <code>&#39;0X&#39;</code>。</td></tr></tbody></table><p><a href="https://docs.python.org/zh-cn/3.14/library/functions.html#float"><code>float</code></a> 和 <a href="https://docs.python.org/zh-cn/3.14/library/decimal.html#decimal.Decimal"><code>Decimal</code></a> 值的可用表示类型有:</p><table><thead><tr><th align="left">类型</th><th align="left">含意</th></tr></thead><tbody><tr><td align="left"><code>&#39;e&#39;</code></td><td align="left">科学计数法。 对于给定的精度 <code>p</code>，将数字格式化为以字母 ‘e’ 分隔系数和指数的科学计数法表示形式。</td></tr><tr><td align="left"><code>&#39;E&#39;</code></td><td align="left">科学计数法。 与 <code>&#39;e&#39;</code> 相似，不同之处在于它使用大写字母 ‘E’ 作为分隔字符。</td></tr><tr><td align="left"><code>&#39;f&#39;</code></td><td align="left">定点表示法。 对于给定的精度 <code>p</code>，将数字格式化为小数点之后恰好有 <code>p</code> 位的小数形式。 如未指定精度，则会对 <a href="https://docs.python.org/zh-cn/3.14/library/functions.html#float"><code>float</code></a> 采用小数点之后 <code>6</code> 位精度，而对 <a href="https://docs.python.org/zh-cn/3.14/library/decimal.html#decimal.Decimal"><code>Decimal</code></a> 则使用大到足够显示所有系数位的精度。 如果 <code>p=0</code>，则小数点会被略去，除非使用了 <code>#</code> 选项。</td></tr><tr><td align="left"><code>&#39;F&#39;</code></td><td align="left">定点表示。 与 <code>&#39;f&#39;</code> 相似，但会将 <code>nan</code> 转为 <code>NAN</code> 并将 <code>inf</code> 转为 <code>INF</code>。</td></tr></tbody></table><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:s&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;Hello, World!&quot;</span>))  <span class="hljs-comment"># 字符串</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:b&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">10</span>))                 <span class="hljs-comment"># 二进制</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:c&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">65</span>))                 <span class="hljs-comment"># 字符</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:d&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">123</span>))                <span class="hljs-comment"># 十进制整数</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:o&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">10</span>))                 <span class="hljs-comment"># 八进制</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:x&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">255</span>))                <span class="hljs-comment"># 十六进制（小写）</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:X&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">255</span>))                <span class="hljs-comment"># 十六进制（大写）</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:f&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">3.14159</span>))            <span class="hljs-comment"># 浮点数（小数形式）</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:F&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">3.14159</span>))            <span class="hljs-comment"># 浮点数（小数形式，大写F）</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:e&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">12345.6789</span>))        <span class="hljs-comment"># 科学计数法（小写e）</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&#123;:E&#125;&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-number">12345.6789</span>))        <span class="hljs-comment"># 科学计数法（大写E）</span><br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Hello</span>, World!<br><span class="hljs-attribute">1010</span><br><span class="hljs-attribute">A</span><br><span class="hljs-attribute">123</span><br><span class="hljs-attribute">12</span><br><span class="hljs-attribute">ff</span><br><span class="hljs-attribute">FF</span><br><span class="hljs-attribute">3</span>.<span class="hljs-number">141590</span><br><span class="hljs-attribute">3</span>.<span class="hljs-number">141590</span><br><span class="hljs-attribute">1</span>.<span class="hljs-number">234568</span>e+<span class="hljs-number">04</span><br><span class="hljs-attribute">1</span>.<span class="hljs-number">234568</span>E+<span class="hljs-number">04</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python模块与包</title>
    <link href="/python/module_pack.html"/>
    <url>/python/module_pack.html</url>
    
    <content type="html"><![CDATA[<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><p><strong>什么是模块？</strong></p><p>模块是包含 Python 定义和语句的文件，其文件名是模块名加后缀名 <code>.py</code> ，简而言之，在Python中，一个<code>.py</code>文件就是一个模块。在模块内部，通过全局变量 <code>__name__</code> 可以获取模块名（即字符串）。</p><p><strong>为什么需要模块？</strong></p><p>​     在不引入模块的情况下，编写一个功能简单的程序，代码行数在千行以内时，看起来好像也不是什么大的问题；然而当我们在编写一个非常大的程序时，程序代码量可能上万行甚至更多，在如此大的一个文件中进行功能的完善和维护，可以想象是如何的困难。</p><p>​    基于此，Python引入了模块，可以将功能逻辑上相同的代码放在一个独立的文件中。这样，每个独立文件可以表示一部分功能，在进行功能的维护时，只需要修改这一个独立文件即可，不需要大海捞针。</p><h3 id="模块的导入"><a href="#模块的导入" class="headerlink" title="模块的导入"></a>模块的导入</h3><p>我们使用独立的文件定义好模块，接下来就需要在上层引入模块，执行模块内部定义的逻辑。</p><p><strong>语法：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> 模块名<br><span class="hljs-keyword">import</span> 模块名 <span class="hljs-keyword">as</span> 别名<br><span class="hljs-keyword">from</span> 模块名 <span class="hljs-keyword">import</span> 函数或其他<br><span class="hljs-keyword">from</span> 模块名 <span class="hljs-keyword">import</span> *<br></code></pre></td></tr></table></figure><ul><li><code>as</code>是用来声明导入模块的别名，一个情况是可以将模块进行重命名，另一个方面是：如果在当前模块中导入了两个不同的模块，而这两个模块名称可能相同，为了避免命名冲突，使用<code>as</code>进行重命名</li><li><code>*</code>会导入所有不以下划线（<code>_</code>）开头的名称。大多数情况下，不要用这个功能，这种方式向解释器导入了一批未知的名称，可能会覆盖已经定义的名称。</li></ul><p><strong>示例：</strong></p><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20260108131616923.png" alt="image-20260108131616923"></p><p>定义 <code>mymath.py</code>模块</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># add</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">return</span> a + b<br><br><span class="hljs-comment"># subtract</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">subtract</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">return</span> a - b<br><br><span class="hljs-comment"># multiply</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">return</span> a * b<br><br><span class="hljs-comment"># divide</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">if</span> b == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;Cannot divide by zero.&quot;</span>)<br>    <span class="hljs-keyword">return</span> a / b<br></code></pre></td></tr></table></figure><p>1、在 <code>test.py</code>中使用<code>mymath</code>模块</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> mymath<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Addition of 5 and 3:&quot;</span>, mymath.add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Subtraction of 5 and 3:&quot;</span>, mymath.subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Multiplication of 5 and 3:&quot;</span>, mymath.multiply(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Division of 5 and 3:&quot;</span>, mymath.divide(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br><br><span class="hljs-comment"># 输出</span><br>Addition of <span class="hljs-number">5</span> <span class="hljs-keyword">and</span> <span class="hljs-number">3</span>: <span class="hljs-number">8</span><br>Subtraction of <span class="hljs-number">5</span> <span class="hljs-keyword">and</span> <span class="hljs-number">3</span>: <span class="hljs-number">2</span><br>Multiplication of <span class="hljs-number">5</span> <span class="hljs-keyword">and</span> <span class="hljs-number">3</span>: <span class="hljs-number">15</span><br>Division of <span class="hljs-number">5</span> <span class="hljs-keyword">and</span> <span class="hljs-number">3</span>: <span class="hljs-number">1.6666666666666667</span><br></code></pre></td></tr></table></figure><p>2、使用别名：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> mymath <span class="hljs-keyword">as</span> my<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Addition of 5 and 3:&quot;</span>, my.add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Subtraction of 5 and 3:&quot;</span>, my.subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Multiplication of 5 and 3:&quot;</span>, my.multiply(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Division of 5 and 3:&quot;</span>, my.divide(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br></code></pre></td></tr></table></figure><p>3、导入具体的函数:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> mymath <span class="hljs-keyword">import</span> add, divide<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Addition of 5 and 3:&quot;</span>, add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Subtraction of 5 and 3:&quot;</span>, subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Multiplication of 5 and 3:&quot;</span>,multiply(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Division of 5 and 3:&quot;</span>, divide(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br></code></pre></td></tr></table></figure><p>由于已经使用<code>import</code>直接导入了模块内部具体的函数，所以在调用的时候，就不需要在函数名前增加模块名。</p><p>另外由于我们只导入了<code>add</code>和<code>divide</code>函数，所以在执行<code>substract</code>时会报错：<code>NameError: name &#39;subtract&#39; is not defined</code></p><p>4、使用<code>*</code>导入全部</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> mymath <span class="hljs-keyword">import</span> *<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Addition of 5 and 3:&quot;</span>, add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Subtraction of 5 and 3:&quot;</span>, subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Multiplication of 5 and 3:&quot;</span>,multiply(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Division of 5 and 3:&quot;</span>, divide(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))<br></code></pre></td></tr></table></figure><p><code>*</code>会把<code>mymath</code>模块下所有不以<code>_</code>开头的内容都导入，函数调用前不需要在添加模块名</p><h2 id="包"><a href="#包" class="headerlink" title="包"></a>包</h2><p>包是在模块的基础上，将模块在按照逻辑分类，在导入模块的时候，包名称也作为导入路径的一部分。定义包的时候，需要在包目录下新建一个<code>__init__.py</code>文件，文件内容可以为空。</p><p>假设要为统一处理声音文件与声音数据设计一个模块集（“包”）。声音文件的格式很多（通常以扩展名来识别，例如：<code>.wav</code>，<code>.aiff</code>，<code>.au</code>），因此，为了不同文件格式之间的转换，需要创建和维护一个不断增长的模块集合。为了实现对声音数据的不同处理（例如，混声、添加回声、均衡器功能、创造人工立体声效果），还要编写无穷无尽的模块流。下面这个分级文件树展示了这个包的架构：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs stylus">sound/                          最高层级的包<br>      __init__<span class="hljs-selector-class">.py</span>               初始化 sound 包<br>      song<span class="hljs-selector-class">.py</span><br>      formats/                  用于文件格式转换的子包<br>              __init__<span class="hljs-selector-class">.py</span><br>              wavread<span class="hljs-selector-class">.py</span><br>              wavwrite<span class="hljs-selector-class">.py</span><br>              aiffread<span class="hljs-selector-class">.py</span><br>              aiffwrite<span class="hljs-selector-class">.py</span><br>              auread<span class="hljs-selector-class">.py</span><br>              auwrite<span class="hljs-selector-class">.py</span><br>              ...<br>      effects/                  用于音效的子包<br>              __init__<span class="hljs-selector-class">.py</span><br>              echo<span class="hljs-selector-class">.py</span><br>              surround<span class="hljs-selector-class">.py</span><br>              reverse<span class="hljs-selector-class">.py</span><br>              ...<br>      filters/                  用于过滤器的子包<br>              __init__<span class="hljs-selector-class">.py</span><br>              equalizer<span class="hljs-selector-class">.py</span><br>              vocoder<span class="hljs-selector-class">.py</span><br>              karaoke<span class="hljs-selector-class">.py</span><br>              ...<br></code></pre></td></tr></table></figure><h3 id="包的导入"><a href="#包的导入" class="headerlink" title="包的导入"></a>包的导入</h3><p><strong>语法：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> 父.子.模块<br><span class="hljs-keyword">from</span> 父.子 <span class="hljs-keyword">import</span> 模块<span class="hljs-number">1</span>,模块<span class="hljs-number">2</span><br><span class="hljs-keyword">from</span> 父.子 <span class="hljs-keyword">import</span> *<br><br><span class="hljs-comment"># 相对导入</span><br><span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> 模块名 <span class="hljs-comment"># 使用当前模块所在路径查找 导入模块</span><br><span class="hljs-keyword">from</span> .. <span class="hljs-keyword">import</span> 模块名 <span class="hljs-comment"># 使用当前模块的直接父模块</span><br><span class="hljs-keyword">from</span> ..同级包名 <span class="hljs-keyword">import</span> 模块名  <span class="hljs-comment">#引入同级包下的模块</span><br></code></pre></td></tr></table></figure><ul><li><code>*</code> 的使用需要在包的<code>__init__.py</code>文件中通过<code>__all__</code> 声明需要导出的模块</li><li>使用相对路径引入的时候，如果使用<code>python</code>运行文件的时候，如果模块<code>A</code>使用相对路径引入了其他模块，不能直接运行<code>python a.py</code>，否则会报错：<code>ImportError: attempted relative import with no known parent package</code></li></ul><p><strong>举例：</strong></p><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20260108191529667.png" alt="image-20260108191529667"></p><p>1、直接导入模块：</p><p>使用 <code>import</code>直接导入全路径模块时，在使用的时候也需要完整的模块路径，较为繁琐</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sound.effects.echo<br><br><span class="hljs-built_in">print</span>(sound.effects.echo.echo_str(<span class="hljs-string">&quot;Hello&quot;</span>))<br></code></pre></td></tr></table></figure><p>2、使用<code>from 包路径 import 模块</code>方式：</p><p>使用此种方式，在使用的时候可以直接使用最后的模块名，不需要前边的包路径，<strong>推荐采用</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sound.effects <span class="hljs-keyword">import</span> echo<br><br><span class="hljs-built_in">print</span>(echo.echo_str(<span class="hljs-string">&quot;Hello&quot;</span>))  <span class="hljs-comment"># Expected output: &quot;Hello Hello&quot;</span><br></code></pre></td></tr></table></figure><p>3、使用<code>from 包路径 import *</code>方式：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 在 sound.effercts.__init__py文件中添加 __all__ 声明导出 errercts包下的 echo 模块</span><br>__all__ = [<span class="hljs-string">&#x27;echo&#x27;</span>]<br><br><span class="hljs-keyword">from</span> sound.effects <span class="hljs-keyword">import</span> *<br><br><span class="hljs-built_in">print</span>(echo.echo_str(<span class="hljs-string">&quot;Hello&quot;</span>))<br><span class="hljs-built_in">print</span>(reverse.reverse_str(<span class="hljs-string">&quot;Hello&quot;</span>))<br><br><span class="hljs-comment"># 由于没有在 __all__ 中声明导出 reverse，所以在执行 reverse.reverse_str时会报错</span><br>Hello Hello<br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/test.py&quot;</span>, line <span class="hljs-number">4</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    <span class="hljs-built_in">print</span>(reverse.reverse_str(<span class="hljs-string">&quot;Hello&quot;</span>))<br>          ^^^^^^^<br>NameError: name <span class="hljs-string">&#x27;reverse&#x27;</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> defined. Did you mean: <span class="hljs-string">&#x27;reversed&#x27;</span>?<br></code></pre></td></tr></table></figure><p>4、使用相对路径 <code>.</code>：</p><p>在 <code>reverse.py</code>文件中通过相对路径引入 <code>echo</code>模块</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> echo<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">reverse_str</span>(<span class="hljs-params">s</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;Reverses the given string s.&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> s[::-<span class="hljs-number">1</span>]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">call_echo</span>():<br>    echo.echo_str(<span class="hljs-string">&quot;Test&quot;</span>)<br></code></pre></td></tr></table></figure><p>顶层 <code>test.py</code>中调用 <code>reverse</code>模块的<code>call_echo</code>函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sound.effects <span class="hljs-keyword">import</span> reverse<br><br>reverse.call_echo()<br><br><span class="hljs-comment"># 输出</span><br>Echoing string: Test<br></code></pre></td></tr></table></figure><p><strong>注意实现：</strong> 如果在effects目录下直接使用<code>python reverse.py</code>调用<code>echo</code>模块的函数，会发生错误：<code>ImportError: attempted relative import with no known parent package</code></p><p>5、使用相对路径 <code>..</code></p><p>在<code>wavread.py</code> 文件中通过相对引用，引入父包<code>sound</code>下的<code>song</code>模块</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> .. <span class="hljs-keyword">import</span> song<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_wav</span>(<span class="hljs-params">filename</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Reading WAV file: <span class="hljs-subst">&#123;filename&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sing_a_song</span>():<br>    song.sing()<br></code></pre></td></tr></table></figure><p>顶层<code>test.py</code>中引入<code>wavread</code>模块</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sound.formats <span class="hljs-keyword">import</span> wavread<br><br>wavread.sing_a_song()<br><br><span class="hljs-comment"># 输出</span><br>La la la...<br></code></pre></td></tr></table></figure><p>6、使用相对路径引入同级包下的模块 <code>..同级包名</code> </p><p>在<code>wavread.py</code> 文件中通过相对引用，引入当前模块所属包 <code>formats</code>的同级包<code>effects</code>下的<code>echo</code>模块</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> ..effects <span class="hljs-keyword">import</span> echo<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_wav</span>(<span class="hljs-params">filename</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Reading WAV file: <span class="hljs-subst">&#123;filename&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">call_echo</span>():<br>    echo.echo_str(<span class="hljs-string">&quot;Calling from wavread&quot;</span>)<br></code></pre></td></tr></table></figure><p>顶层<code>test.py</code>中引入<code>wavread</code>模块</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sound.formats <span class="hljs-keyword">import</span> wavread<br><br>wavread.call_echo()<br><br><span class="hljs-comment"># 输出</span><br>Echoing string: Calling <span class="hljs-keyword">from</span> wavread<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python函数</title>
    <link href="/python/function.html"/>
    <url>/python/function.html</url>
    
    <content type="html"><![CDATA[<p>函数（function）是 <strong>可复用的代码块</strong>，接收输入（参数），执行逻辑，并可返回结果。简单来说，就是在编码过程中，有一段代码重复多次出现，那么就可以将这一段逻辑放在一个独立的函数中，通过传入参数获取计算结果。例如（一个不恰当的）：老师需要计算班级里边的每个学生成绩平均分，需要先计算学生总成绩，在除以学科数量获取平均值，求和在平均这个步骤，每个学生都需要计算，就可以把这一部分抽离到一个独立的函数中，通过传入学生的所有成绩获取平均值。</p><h2 id="语法定义"><a href="#语法定义" class="headerlink" title="语法定义"></a>语法定义</h2><p>函数通过<code>def</code>关键字来定义一个函数，默认情况不需要显示指定参数类型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">function_name</span>(<span class="hljs-params">pos_args1: arg_type, pos_args2, default_args, *args, **kwargs</span>) -&gt; return_type:<br>    <span class="hljs-string">&quot;&quot;&quot;函数文档字符串&quot;&quot;&quot;</span><br>    <br>    <span class="hljs-comment"># 逻辑业务</span><br>    paas<br>    <span class="hljs-keyword">return</span> value<br></code></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">a, b = <span class="hljs-number">2</span>, *args, **kwargs</span>) -&gt; <span class="hljs-built_in">int</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;a = &quot;</span>, a)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;b = &quot;</span>, b)<br><br>    <span class="hljs-keyword">for</span> arg <span class="hljs-keyword">in</span> args:<br>        <span class="hljs-built_in">print</span>(arg)<br>    <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> kwargs.items():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;key&#125;</span>: <span class="hljs-subst">&#123;value&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><br>args_list = [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>d = &#123;<span class="hljs-string">&#x27;x&#x27;</span>: <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;y&#x27;</span>: <span class="hljs-number">20</span>&#125;<br>r = f(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, *args_list, **d)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Return value:&quot;</span>, r)<br></code></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">a =  <span class="hljs-number">1</span><br>b =  <span class="hljs-number">3</span><br><span class="hljs-number">4</span><br><span class="hljs-number">5</span><br>x: <span class="hljs-number">10</span><br>y: <span class="hljs-number">20</span><br></code></pre></td></tr></table></figure><h2 id="函数详解"><a href="#函数详解" class="headerlink" title="函数详解"></a>函数详解</h2><h3 id="位置参数（必需参数）"><a href="#位置参数（必需参数）" class="headerlink" title="位置参数（必需参数）"></a>位置参数（必需参数）</h3><p>顾名思义，位置参数就是按照函数定义时参数的顺序传入参数，并对参数进行对应的赋值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name, age</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Hello, my name is <span class="hljs-subst">&#123;name&#125;</span> and I am <span class="hljs-subst">&#123;age&#125;</span> years old.&quot;</span>)<br><br><span class="hljs-comment"># 调用函数时传递位置参数</span><br>greet(<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">30</span>) <span class="hljs-comment"># 输出: Hello, my name is Alice and I am 30 years old.</span><br>greet(<span class="hljs-number">25</span>, <span class="hljs-string">&quot;Bob&quot;</span>)   <span class="hljs-comment"># 输出: Hello, my name is 25 and I am Bob years old.</span><br></code></pre></td></tr></table></figure><p>调用相同的<code>greet</code>函数时，参数传入顺序不同，<code>name</code>和<code>age</code>的值也表现的不同</p><h3 id="默认值参数（可选参数）"><a href="#默认值参数（可选参数）" class="headerlink" title="默认值参数（可选参数）"></a>默认值参数（可选参数）</h3><p>在声明参数时，给参数一个默认值，调用函数时如果不传入具体的值，将默认值作为参数的实际值。</p><p>默认产生的定义需要在位置参数后边。</p><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">a = <span class="hljs-number">2</span></span>):<br>    <span class="hljs-keyword">return</span> a * <span class="hljs-number">2</span><br><br><span class="hljs-built_in">print</span>(f())  <span class="hljs-comment"># 返回 4，采用参数 a 的默认值 2 计算</span><br><span class="hljs-built_in">print</span>(f(<span class="hljs-number">5</span>)) <span class="hljs-comment"># 返回 10</span><br></code></pre></td></tr></table></figure><p>**重要事项：**默认值只计算一次。默认值为列表、字典或类实例等可变对象时，如果不想在后续调用之间共享默认值时，应该在编写函数时，设置参数的值为 <code>None</code>，并在函数内部判断参数是否为<code>None</code>并进行初始化，即每次调用函数时，如果期望参数都是一个新的列表或字典时，应该设置参数默认值为 <code>None</code></p><p><strong>不设置None示例</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">a, L=[]</span>):<br>    L.append(a)<br>    <span class="hljs-keyword">return</span> L<br><br><span class="hljs-built_in">print</span>(f(<span class="hljs-number">1</span>)) <span class="hljs-comment"># [1]</span><br><span class="hljs-built_in">print</span>(f(<span class="hljs-number">2</span>)) <span class="hljs-comment"># [1, 2]</span><br><span class="hljs-built_in">print</span>(f(<span class="hljs-number">3</span>)) <span class="hljs-comment"># [1, 2, 3]</span><br></code></pre></td></tr></table></figure><p><strong>设置None示例</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">a, L=<span class="hljs-literal">None</span></span>):<br>    <span class="hljs-keyword">if</span> L <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        L = []<br>    L.append(a)<br>    <span class="hljs-keyword">return</span> L<br><br><span class="hljs-built_in">print</span>(f(<span class="hljs-number">1</span>)) <span class="hljs-comment"># [1]</span><br><span class="hljs-built_in">print</span>(f(<span class="hljs-number">2</span>)) <span class="hljs-comment"># [2]</span><br><span class="hljs-built_in">print</span>(f(<span class="hljs-number">3</span>)) <span class="hljs-comment"># [3]</span><br></code></pre></td></tr></table></figure><h3 id="关键字参数"><a href="#关键字参数" class="headerlink" title="关键字参数"></a>关键字参数</h3><p>所谓的关键字参数，本质上在函数定义的时候是不存在的，而是发生在函数调用阶段。</p><p>函数调用的时候，传入参数的时候指定参数的名称，形成 <code>kwarg=value</code> 的形式，从而称之为关键字参数。</p><p>使用关键字参数时，可以不用遵循位置参数的顺序，当然如果调用时，位置参数和关键字参数混用的情况，还是需要遵循先位置后关键字的顺序。</p><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name, age, city = <span class="hljs-string">&#x27;Changsha&#x27;</span></span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Hello, my name is <span class="hljs-subst">&#123;name&#125;</span>. I am <span class="hljs-subst">&#123;age&#125;</span> years old and I live in <span class="hljs-subst">&#123;city&#125;</span>.&quot;</span>)<br><br><span class="hljs-comment"># 关键字参数调用</span><br>greet(age=<span class="hljs-number">25</span>, name=<span class="hljs-string">&#x27;Alice&#x27;</span>) <span class="hljs-comment"># 返回 Hello, my name is Alice. I am 25 years old and I live in Changsha.</span><br>greet(name=<span class="hljs-string">&#x27;Bob&#x27;</span>, age=<span class="hljs-number">30</span>, city=<span class="hljs-string">&#x27;New York&#x27;</span>) <span class="hljs-comment"># 返回 Hello, my name is Bob. I am 30 years old and I live in New York.</span><br>greet(<span class="hljs-string">&#x27;Charlie&#x27;</span>, <span class="hljs-number">22</span>)  <span class="hljs-comment"># 使用默认参数city # 返回 Hello, my name is Charlie. I am 22 years old and I live in Changsha.</span><br></code></pre></td></tr></table></figure><p>从示例不难看出，使用关键字参数的时候，<code>age</code>和<code>name</code>的顺序是没有要求的。</p><p>假如函数调用的时候，先设置关键字参数在设置位置参数（如<code>greet(age=28, &#39;Diana&#39;) </code>）会发生什么事情？</p><ul><li>编译运行的时候会报错：<code>SyntaxError: positional argument follows keyword argument</code></li></ul><h3 id="任意数量参数"><a href="#任意数量参数" class="headerlink" title="任意数量参数"></a>任意数量参数</h3><h4 id="任意数量的元组tuple或列表list"><a href="#任意数量的元组tuple或列表list" class="headerlink" title="任意数量的元组tuple或列表list"></a>任意数量的元组tuple或列表list</h4><p><strong>语法：</strong></p><p>使用<code>*args</code>声明函数接收任意数量的列表或元组，方式调用的时候可以使用 <code>*</code>操作符把实参从列表或元组解包出来</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">*args</span>):<br>    paas<br></code></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 函数 *args 示例</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">*args</span>):<br>    <span class="hljs-keyword">for</span> index, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(args):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Argument <span class="hljs-subst">&#123;index&#125;</span>: <span class="hljs-subst">&#123;value&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># 直接传递多个参数</span><br>f(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-string">&quot;hello&quot;</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])<br><br><span class="hljs-comment"># 使用列表作为参数传递</span><br>l = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>f(*l)<br><br><span class="hljs-comment"># 使用元组作为参数传递</span><br>t = (<span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">300</span>)<br>f(*t)<br></code></pre></td></tr></table></figure><h4 id="任意数量的dict"><a href="#任意数量的dict" class="headerlink" title="任意数量的dict"></a>任意数量的dict</h4><p><strong>语法：</strong></p><p>使用<code>**kwargs</code>声明函数接收任意数量的列表或元组，方式调用的时候可以使用 <code>**</code>操作符把实参从<code>dict</code>中解包出来</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">**kwargs</span>):<br>    paas<br></code></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 函数 **kwargs 示例</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">**kwargs</span>):<br>    <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> kwargs.items():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Argument <span class="hljs-subst">&#123;key&#125;</span>: <span class="hljs-subst">&#123;value&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># 调用函数，传递关键字参数</span><br>f(name=<span class="hljs-string">&#x27;Alice&#x27;</span>, age=<span class="hljs-number">25</span>, city=<span class="hljs-string">&#x27;Changsha&#x27;</span>)<br>f(name=<span class="hljs-string">&#x27;Bob&#x27;</span>, age=<span class="hljs-number">30</span>, city=<span class="hljs-string">&#x27;New York&#x27;</span>)<br>f(name=<span class="hljs-string">&#x27;Charlie&#x27;</span>, age=<span class="hljs-number">22</span>)  <br><br><span class="hljs-comment"># 使用字典传递关键字参数</span><br>d = &#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;David&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>: <span class="hljs-number">28</span>, <span class="hljs-string">&#x27;city&#x27;</span>: <span class="hljs-string">&#x27;Los Angeles&#x27;</span>&#125;<br>f(**d)  <span class="hljs-comment"># 使用字典解包传递关键字参数</span><br><br></code></pre></td></tr></table></figure><h3 id="函数返回"><a href="#函数返回" class="headerlink" title="函数返回"></a>函数返回</h3><p>使用<code>return</code>返回值，可以返回单值也可以返回多值，如果函数结尾没有显示编写<code>return</code>时，函数默认返回为<code>None</code></p><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 函数return返回示例</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">return</span> a + b  <span class="hljs-comment"># 返回两个数的和</span><br><br>result = add(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;3 + 5 =&quot;</span>, result)  <span class="hljs-comment"># 输出结果</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">none_return</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;This function does not return anything.&quot;</span>)<br><br>none_result = none_return()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Return value of none_return():&quot;</span>, none_result)  <span class="hljs-comment"># 输出None</span><br><br><span class="hljs-comment"># 返回多值</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_coordinates</span>():<br>    x = <span class="hljs-number">10</span><br>    y = <span class="hljs-number">20</span><br>    <span class="hljs-keyword">return</span> x, y  <span class="hljs-comment"># 返回多个值作为元组</span><br>coords = get_coordinates()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Coordinates:&quot;</span>, coords)  <span class="hljs-comment"># 输出坐标元组</span><br></code></pre></td></tr></table></figure><h3 id="函数文档字符串"><a href="#函数文档字符串" class="headerlink" title="函数文档字符串"></a>函数文档字符串</h3><p>内容和格式约定如下：</p><ul><li>第一行应为对象用途的简短摘要。为保持简洁，不要在这里显式说明对象名或类型。</li><li>文档字符串为多行时，第二行应为空白行</li><li>第三行以后开始可包含若干段落，描述对象的调用约定、副作用等</li></ul><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    Docstring for f</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    :param a: Description</span><br><span class="hljs-string">    :param b: Description</span><br><span class="hljs-string">    :param args: Description</span><br><span class="hljs-string">    :param kwargs: Description</span><br><span class="hljs-string">    :return: Description</span><br><span class="hljs-string">    :rtype: int</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br></code></pre></td></tr></table></figure><ul><li><code>:param</code>:  入参说明</li><li><code>:return</code>:返回参数说明</li><li><code>:rtyp</code>: 返回参数类型</li></ul><h3 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h3><p><code>lambda</code> 关键字用于创建小巧的匿名函数。</p><p><strong>语法：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">lambda</span> 参数列表: 表达式<br></code></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># lambda示例</span><br>add = <span class="hljs-keyword">lambda</span> x, y: x + y<br>result = add(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;3 + 5 =&quot;</span>, result)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python流程控制</title>
    <link href="/python/flow_control.html"/>
    <url>/python/flow_control.html</url>
    
    <content type="html"><![CDATA[<p><strong>流程控制</strong>指的是程序中<strong>指令执行的顺序</strong>，即决定哪条语句什么时候执行。默认情况下代码是从上往下一行一行执行，但加入控制结构后，程序可以：</p><ul><li><p>按条件分支执行不同代码</p></li><li><p>循环重复执行某段代码</p></li></ul><p>这些改变正常顺序的行为统称为流程控制。</p><h2 id="条件判断（Conditional-Statements）"><a href="#条件判断（Conditional-Statements）" class="headerlink" title="条件判断（Conditional Statements）"></a>条件判断（Conditional Statements）</h2><p>条件判断用于根据条件的真值（True&#x2F;False）来控制程序执行哪一段代码。</p><h3 id="if-语句"><a href="#if-语句" class="headerlink" title="if 语句"></a>if 语句</h3><p><strong>基本结构：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> condition:<br>    <span class="hljs-comment"># 条件为 True 时执行</span><br></code></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">10</span><br><span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">5</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;x 大于 5&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="if-—-else-语句"><a href="#if-—-else-语句" class="headerlink" title="if — else 语句"></a>if — else 语句</h3><p><strong>基本结构：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> condition:<br>   <span class="hljs-comment"># 条件为 True 时执行</span><br><span class="hljs-keyword">else</span>:<br>   <span class="hljs-comment"># 当条件为 False 时执行另一段代码</span><br></code></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">age = <span class="hljs-number">16</span><br><span class="hljs-keyword">if</span> age &gt;= <span class="hljs-number">18</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;成年&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;未成年&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="if-—-elif-—-else（多分支）"><a href="#if-—-elif-—-else（多分支）" class="headerlink" title="if — elif — else（多分支）"></a>if — elif — else（多分支）</h3><p><strong><code>elif</code></strong> 是 “else if” 的缩写，用于添加多个条件判断：</p><p><strong>基本结构：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> condition:<br>   <span class="hljs-comment"># 条件为 True 时执行</span><br><span class="hljs-keyword">elif</span> condition:<br>    <span class="hljs-comment"># 前一个条件不满足时,且当前条件满足</span><br><span class="hljs-keyword">else</span>:<br>   <span class="hljs-comment"># 当条件为 False 时执行另一段代码</span><br></code></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">score = <span class="hljs-number">75</span><br><span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">90</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;优秀&quot;</span>)<br><span class="hljs-keyword">elif</span> score &gt;= <span class="hljs-number">60</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;及格&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;不及格&quot;</span>)<br></code></pre></td></tr></table></figure><p>当第一个条件满足时，后续 <code>elif</code> 和 <code>else</code> 都不会再判断</p><h2 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h2><p>循环可以重复执行一段代码，直到特定条件满足或序列结束。</p><h3 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a><code>for</code> 循环</h3><p><code>for</code> 用于遍历序列（如列表、字符串、range 等）：</p><p><strong>基本结构:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> 变量 <span class="hljs-keyword">in</span> 可迭代对象:<br>    <span class="hljs-comment"># 每次循环要执行的代码块</span><br><br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-comment"># 循环结束以后执行逻辑</span><br></code></pre></td></tr></table></figure><p><strong>示例:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 遍历 range ,range 用于产生列表</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>    <span class="hljs-built_in">print</span>(i)<br>    <br><span class="hljs-comment"># 遍历列表 -- 只遍历元素</span><br>fruits = [<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-string">&quot;cherry&quot;</span>]<br><span class="hljs-keyword">for</span> fruit <span class="hljs-keyword">in</span> fruits:<br>    <span class="hljs-built_in">print</span>(fruit)<br><br>    <br><span class="hljs-comment"># 同时获取索引和元素  enumerate(fruits) 会返回一个可迭代的对象，每次迭代返回一个 (index, value) 二元组</span><br><span class="hljs-keyword">for</span> index, fruit <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(fruits):<br>    <span class="hljs-built_in">print</span>(index, fruit)<br><br>    <br><span class="hljs-comment"># 遍历 dict</span><br>person = &#123;<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">30</span>, <span class="hljs-string">&quot;city&quot;</span>: <span class="hljs-string">&quot;Beijing&quot;</span>&#125;<br><br><span class="hljs-comment"># 遍历 dict 键 key   </span><br><span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> person:   <span class="hljs-comment"># 等同于     for key in person.keys():</span><br>    <span class="hljs-built_in">print</span>(key)<br>    <br><span class="hljs-comment">#  遍历值</span><br><span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> person.values():<br>    <span class="hljs-built_in">print</span>(value)<br><br><br><span class="hljs-comment"># 遍历键 + 值</span><br><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> person.items():<br>    <span class="hljs-built_in">print</span>(key, value)<br><br><br><span class="hljs-comment"># for else</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>    <span class="hljs-built_in">print</span>(i)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Loop completed&quot;</span>)<br><span class="hljs-comment"># 输出 0 1 2 3 4 Loop completed</span><br></code></pre></td></tr></table></figure><h3 id="while-循环"><a href="#while-循环" class="headerlink" title="while 循环"></a><code>while</code> 循环</h3><p><code>while</code> 会只要条件为真就一直执行：</p><p><strong>基本结构:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">while</span> condition:<br>    <span class="hljs-comment"># 需要在循环体中修改condition,使condition可以变为False,终止循环</span><br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-comment"># 循环结束以后执行逻辑</span><br>    <br>    <br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    <span class="hljs-comment"># 默认为死循环</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">count = <span class="hljs-number">1</span><br><span class="hljs-keyword">while</span> count &lt;= <span class="hljs-number">3</span>:<br>    <span class="hljs-built_in">print</span>(count)<br>    count += <span class="hljs-number">1</span><br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;count = &quot;</span>, count)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-number">1</span><br><span class="hljs-number">2</span><br><span class="hljs-number">3</span><br><span class="hljs-attribute">count</span> <span class="hljs-operator">=</span>  <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>注意要在循环内修改条件，否则可能变成无限循环</p><h2 id="循环跳转控制语句（Loop-Control）"><a href="#循环跳转控制语句（Loop-Control）" class="headerlink" title="循环跳转控制语句（Loop Control）"></a>循环跳转控制语句（Loop Control）</h2><p>Python 提供一些关键字来改变循环执行的流程：<code>break</code> <code>continue</code> 和 <code>pass</code>。</p><h3 id="break-—-提前退出循环"><a href="#break-—-提前退出循环" class="headerlink" title="break — 提前退出循环"></a><code>break</code> — 提前退出循环</h3><p><code>break</code> 会 <strong>立刻停止当前循环</strong>（包括 <code>for</code> 和 <code>while</code>）,不再执行后续的循环判断：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>    <span class="hljs-keyword">if</span> i == <span class="hljs-number">3</span>:<br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-built_in">print</span>(i)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">0<br>1<br>2<br></code></pre></td></tr></table></figure><p>循环当 <code>i == 3</code> 时被打断，后面的值不再输出。</p><h3 id="continue-—-跳过本次迭代"><a href="#continue-—-跳过本次迭代" class="headerlink" title="continue — 跳过本次迭代"></a><code>continue</code> — 跳过本次迭代</h3><p><code>continue</code> 会跳过当前循环剩余的代码，<strong>直接进行下一次循环</strong>, <code>continue</code>不会中断循环,而是在循环内部判断条件满足时,跳过后续逻辑的执行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>    <span class="hljs-keyword">if</span> i == <span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">continue</span><br>    <span class="hljs-built_in">print</span>(i)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs">0<br>1<br>3<br>4<br></code></pre></td></tr></table></figure><p>当 <code>i == 2</code> 时跳过打印。</p><h3 id="pass-—-空操作（占位符）"><a href="#pass-—-空操作（占位符）" class="headerlink" title="pass — 空操作（占位符）"></a><code>pass</code> — 空操作（占位符）</h3><p><code>pass</code> 什么都不做，只是为了语法上保持结构有效：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):<br>    <span class="hljs-keyword">if</span> i == <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">pass</span>  <span class="hljs-comment"># 占位</span><br>    <span class="hljs-built_in">print</span>(i)<br></code></pre></td></tr></table></figure><p>输出：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">0<br>1<br>2<br></code></pre></td></tr></table></figure><p><code>pass</code> 常用于函数体、类体等暂时未实现的地方</p><h2 id="match匹配"><a href="#match匹配" class="headerlink" title="match匹配"></a><code>match</code>匹配</h2><p><code>match</code>语句接受一个表达式并把它的值与一个或多个 case 块给出的一系列模式进行比较。只有第一个匹配的模式会被执行，并且它还可以提取值的组成部分（序列的元素或对象的属性）赋给变量。如果没有匹配的case，则不执行任何分支。</p><p><strong>简单结构：</strong></p><ul><li>用 <code>|</code> 将多个字面值组合到一个模式中</li><li><code>_</code>作为<em>通配符</em> ，所有case不匹配时，执行的逻辑</li><li><code>return</code> 的使用，需要将<code>match</code>作为函数的返回</li><li>可以用来匹配 常量值 枚举(<code>Enum</code>) 和 类(<code>Class</code>)</li></ul><p><em>函数、枚举和类后续讲解</em></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">match</span> expression:<br>    <span class="hljs-keyword">case</span> condition | condition:<br>        <span class="hljs-keyword">return</span> value;  <br>    <span class="hljs-keyword">case</span> condition:<br>        <span class="hljs-comment"># 业务逻辑，无结果返回</span><br>    <span class="hljs-keyword">case</span> _:<br>        <span class="hljs-comment"># 默认处理，无任何case匹配时</span><br></code></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<br><br>rad = random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)<br><span class="hljs-keyword">match</span> rad:<br>    <span class="hljs-keyword">case</span> <span class="hljs-number">0</span> | <span class="hljs-number">1</span>| <span class="hljs-number">2</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Low&quot;</span>)<br>    <span class="hljs-keyword">case</span> <span class="hljs-number">3</span> | <span class="hljs-number">4</span> :<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Medium&quot;</span>)<br>    <span class="hljs-keyword">case</span> _:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;High&quot;</span>)    <br></code></pre></td></tr></table></figure><p><strong>匹配类时，可以将匹配结果绑定到类属性，同时可以通过 <code>if</code> 增加守卫子句（需要满足<code>if</code>条件）</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">match</span> 类实例：<br>    <span class="hljs-keyword">case</span> 类(属性) <span class="hljs-keyword">if</span> 条件:<br>        <span class="hljs-comment"># 逻辑</span><br>    <span class="hljs-keyword">case</span> 类(属性):<br>        <span class="hljs-comment"># 逻辑</span><br></code></pre></td></tr></table></figure><p>自定义类需要在类中设置特殊属性 <code>__match_args__</code>，为属性指定其在<code>match</code>模式中对应的位置。若设为 <code>(&quot;x&quot;, &quot;y&quot;)</code>，则以下模式相互等价（且都把属性 <code>y</code> 绑定到变量 <code>var</code>）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">Point(<span class="hljs-number">1</span>, var)<br>Point(<span class="hljs-number">1</span>, y=var)<br>Point(x=<span class="hljs-number">1</span>, y=var)<br>Point(y=var, x=<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p>如果不设置<code>__match_args__</code>会报如下错误：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">TypeError: Point() accepts <span class="hljs-number">0</span> positional sub-patterns (<span class="hljs-number">2</span> given)<br></code></pre></td></tr></table></figure><p><strong>示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span>:<br>    __match_args__ = (<span class="hljs-string">&#x27;x&#x27;</span>, <span class="hljs-string">&#x27;y&#x27;</span>)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x, y</span>):<br>        <span class="hljs-variable language_">self</span>.x = x<br>        <span class="hljs-variable language_">self</span>.y = y<br><br>point = Point(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>)<br><br><span class="hljs-keyword">match</span> point:<br>    <span class="hljs-keyword">case</span> Point(x, y) <span class="hljs-keyword">if</span> x == y:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Y=X at <span class="hljs-subst">&#123;x&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">case</span> Point(x, y):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Not on the diagonal&quot;</span>)<br><br></code></pre></td></tr></table></figure><p><strong>匹配枚举<code>Enum</code></strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> enum <span class="hljs-keyword">import</span> Enum<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Color</span>(<span class="hljs-title class_ inherited__">Enum</span>):<br>    RED = <span class="hljs-string">&#x27;red&#x27;</span><br>    GREEN = <span class="hljs-string">&#x27;green&#x27;</span><br>    BLUE = <span class="hljs-string">&#x27;blue&#x27;</span><br><br><span class="hljs-comment"># 可以修改 color 实例的值观察 match 模式匹配的输出</span><br><span class="hljs-comment">#color = Color.BLUE</span><br>color = Color.RED<br><br><span class="hljs-keyword">match</span> color:<br>    <span class="hljs-keyword">case</span> Color.RED:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;I see red!&quot;</span>)<br>    <span class="hljs-keyword">case</span> Color.GREEN:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Grass is green&quot;</span>)<br>    <span class="hljs-keyword">case</span> Color.BLUE:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;I&#x27;m feeling the blues :(&quot;</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>运算符</title>
    <link href="/python/operator.html"/>
    <url>/python/operator.html</url>
    
    <content type="html"><![CDATA[<p><strong>运算符是一些特殊符号或关键字</strong>，用于对 <strong>变量或值执行特定操作</strong>，例如数学计算、组合条件、逻辑判断等。</p><h2 id="一、算术运算（Arithmetic-Operations）"><a href="#一、算术运算（Arithmetic-Operations）" class="headerlink" title="一、算术运算（Arithmetic Operations）"></a>一、算术运算（Arithmetic Operations）</h2><p>算术运算符用于对数字进行数学运算，可以对整数、浮点数等数值类型操作数执行算术计算。</p><h3 id="🧮-常见算术运算符与含义"><a href="#🧮-常见算术运算符与含义" class="headerlink" title="🧮 常见算术运算符与含义"></a>🧮 常见算术运算符与含义</h3><table><thead><tr><th>运算符</th><th>名称</th><th>作用</th></tr></thead><tbody><tr><td><code>+</code></td><td>加法</td><td>相加两个数值</td></tr><tr><td><code>-</code></td><td>减法</td><td>从一个数中减去另一个</td></tr><tr><td><code>*</code></td><td>乘法</td><td>两个数相乘</td></tr><tr><td><code>/</code></td><td>除法</td><td>返回除法的结果（浮点数）</td></tr><tr><td><code>%</code></td><td>取模</td><td>返回两数相除的余数</td></tr><tr><td><code>//</code></td><td>整除（地板除）</td><td>返回商的整数部分</td></tr><tr><td><code>**</code></td><td>幂运算</td><td>返回一个数的另一数次幂</td></tr></tbody></table><h4 id="🔍-特殊说明"><a href="#🔍-特殊说明" class="headerlink" title="🔍 特殊说明"></a>🔍 特殊说明</h4><ul><li><code>//</code> 是 <strong>地板除</strong>（floor division）：对于正数等同整数除法，但对于负数结果向下取整（比简单截断更“低”）</li><li>除法 <code>/</code> 总是返回 <strong>浮点数</strong></li></ul><p><strong>示例</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">a = <span class="hljs-number">10</span><br>b = <span class="hljs-number">3</span><br><br><span class="hljs-built_in">print</span>(a + b)   <span class="hljs-comment"># 13</span><br><span class="hljs-built_in">print</span>(a - b)   <span class="hljs-comment"># 7</span><br><span class="hljs-built_in">print</span>(a * b)   <span class="hljs-comment"># 30</span><br><span class="hljs-built_in">print</span>(a / b)   <span class="hljs-comment"># 3.333333...</span><br><span class="hljs-built_in">print</span>(a // b)  <span class="hljs-comment"># 3 （整除）</span><br><span class="hljs-built_in">print</span>(a % b)   <span class="hljs-comment"># 1 （余数）</span><br><span class="hljs-built_in">print</span>(a ** b)  <span class="hljs-comment"># 1000 （10 的 3 次方）</span><br><br></code></pre></td></tr></table></figure><h2 id="二、逻辑运算（Logical-Operations）"><a href="#二、逻辑运算（Logical-Operations）" class="headerlink" title="二、逻辑运算（Logical Operations）"></a>二、逻辑运算（Logical Operations）</h2><p>逻辑运算符用于 <strong>组合或反转布尔值（True &#x2F; False）表达式</strong>，常见于条件判断和流程控制语句中。</p><h3 id="🔹-常用逻辑运算符"><a href="#🔹-常用逻辑运算符" class="headerlink" title="🔹 常用逻辑运算符"></a>🔹 常用逻辑运算符</h3><table><thead><tr><th>运算符</th><th>含义</th></tr></thead><tbody><tr><td><code>and</code></td><td>逻辑 AND：所有条件都为 True 时结果才是 True</td></tr><tr><td><code>or</code></td><td>逻辑 OR：只要有一个条件为 True，结果就为 True</td></tr><tr><td><code>not</code></td><td>逻辑 NOT：取反，将 True 变成 False，反之亦然</td></tr></tbody></table><h4 id="🔍-特殊说明-1"><a href="#🔍-特殊说明-1" class="headerlink" title="🔍 特殊说明"></a>🔍 特殊说明</h4><ul><li><code>and</code> 会在 <strong>第一个 False</strong> 时提前停止检查（短路行为）</li><li><code>or</code> 会在 <strong>第一个 True</strong> 时提前返回 True</li><li><code>not</code> 单独对一个布尔值取反</li></ul><p><strong>示例</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">5</span><br><span class="hljs-built_in">print</span>(x &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> x &lt; <span class="hljs-number">10</span>)   <span class="hljs-comment"># True：两个条件同时满足</span><br><span class="hljs-built_in">print</span>(x &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> x &gt; <span class="hljs-number">3</span>)     <span class="hljs-comment"># True：至少有一个条件为 True</span><br><span class="hljs-built_in">print</span>(<span class="hljs-keyword">not</span>(x &gt; <span class="hljs-number">3</span>))         <span class="hljs-comment"># False：对 True 取反</span><br><br><br><span class="hljs-comment"># and 或 or 短路示例</span><br><span class="hljs-built_in">print</span>(x &lt; <span class="hljs-number">5</span> <span class="hljs-keyword">and</span> x == <span class="hljs-number">5</span>) <span class="hljs-comment"># False：第一个条件为 False，第二个条件不再计算</span><br><span class="hljs-built_in">print</span>(x &gt; <span class="hljs-number">3</span> <span class="hljs-keyword">or</span> x == <span class="hljs-number">5</span>)  <span class="hljs-comment"># True：第一个条件为 True，第二个条件不再计算</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>常见的数据类型</title>
    <link href="/python/data_type.html"/>
    <url>/python/data_type.html</url>
    
    <content type="html"><![CDATA[<h2 id="一、概念"><a href="#一、概念" class="headerlink" title="一、概念"></a>一、概念</h2><p><strong>数据类型（Data Type）</strong> 是对数据的一种分类，它定义了：</p><ul><li>这个数据可以存储什么样的值</li><li>可以对它进行哪些操作（算数、逻辑、索引、迭代等）</li><li>在内存中如何存储和管理这些数据</li></ul><p>简单来说，<strong>数据类型告诉程序“这个值是什么”以及“可以对它做什么”</strong>。</p><h2 id="二、基本数据类型"><a href="#二、基本数据类型" class="headerlink" title="二、基本数据类型"></a>二、基本数据类型</h2><h3 id="数值类型（Numeric-Types）"><a href="#数值类型（Numeric-Types）" class="headerlink" title="数值类型（Numeric Types）"></a>数值类型（Numeric Types）</h3><p>用于存储数字。</p><ul><li><strong>整数 <code>int</code></strong>：表示有小数点的数字，比如 <code>42</code>, <code>-10</code>。</li><li><strong>浮点数 <code>float</code></strong>：表示带小数点数字，比如 <code>3.14</code>, <code>-0.001</code>。</li><li><strong>复数 <code>complex</code></strong>：带有实部和虚部的数字，比如 <code>2+3j</code>。</li></ul><p>数据类型示例：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">a</span> = <span class="hljs-number">5</span>       <span class="hljs-comment"># int</span><br><span class="hljs-attr">b</span> = <span class="hljs-number">3.14</span>    <span class="hljs-comment"># float</span><br><span class="hljs-attr">c</span> = <span class="hljs-number">2</span> + <span class="hljs-number">3</span>j  <span class="hljs-comment"># complex</span><br></code></pre></td></tr></table></figure><h3 id="布尔类型（Boolean）"><a href="#布尔类型（Boolean）" class="headerlink" title="布尔类型（Boolean）"></a>布尔类型（Boolean）</h3><ul><li><strong><code>bool</code></strong>：只有两个值：<code>True</code> 和 <code>False</code>。<br> 用于逻辑运算、条件判断等场景。</li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">flag</span> = <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><h3 id="字符串（Text）"><a href="#字符串（Text）" class="headerlink" title="字符串（Text）"></a>字符串（Text）</h3><ul><li><strong><code>str</code></strong>：用于存放文本，由字符组成的序列。<br> 例如：</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">msg</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello, Python!&quot;</span><br></code></pre></td></tr></table></figure><p>字符串是 <strong>不可变的</strong>，也就是说创建之后不能改变其中的字符</p><h3 id="None-类型"><a href="#None-类型" class="headerlink" title="None 类型"></a>None 类型</h3><ul><li><strong><code>NoneType</code></strong>：只有一个值 <code>None</code>，表示 “没有值” 或 “空值”。<br> 常用于函数默认返回，或者初始化一个尚未赋值的变量。</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">result</span> <span class="hljs-operator">=</span> None<br></code></pre></td></tr></table></figure><p>这是 Python 里一种特殊的数据类型。</p><h2 id="三、高级数据类型"><a href="#三、高级数据类型" class="headerlink" title="三、高级数据类型"></a>三、高级数据类型</h2><h3 id="列表（List）"><a href="#列表（List）" class="headerlink" title="列表（List）"></a>列表（List）</h3><ul><li><strong><code>list</code></strong>：有序、<strong>可变</strong> 的元素集合，可以存放不同类型的数据。</li></ul><p><strong>定义</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">empty_list</span> = []        <span class="hljs-comment"># 空列表</span><br><span class="hljs-attr">empty_list2</span> = list()   <span class="hljs-comment"># 另一种写法</span><br><br><span class="hljs-attr">nums</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]    <span class="hljs-comment"># 有初始值的列表</span><br></code></pre></td></tr></table></figure><p><strong>使用示例</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">fruits = [<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-string">&quot;orange&quot;</span>]<br><span class="hljs-built_in">print</span>(fruits)<br>fruits.append(<span class="hljs-string">&quot;grape&quot;</span>)      <span class="hljs-comment"># 添加元素</span><br><span class="hljs-built_in">print</span>(fruits)<br><span class="hljs-built_in">print</span>(fruits[<span class="hljs-number">0</span>], fruits[-<span class="hljs-number">1</span>]) <span class="hljs-comment"># 索引访问</span><br>fruits.remove(<span class="hljs-string">&quot;banana&quot;</span>)      <span class="hljs-comment"># 删除元素</span><br><span class="hljs-built_in">print</span>(fruits)<br><br>-- 输出<br>[<span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;banana&#x27;</span>, <span class="hljs-string">&#x27;orange&#x27;</span>]<br>[<span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;banana&#x27;</span>, <span class="hljs-string">&#x27;orange&#x27;</span>, <span class="hljs-string">&#x27;grape&#x27;</span>]<br>apple grape<br>[<span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;orange&#x27;</span>, <span class="hljs-string">&#x27;grape&#x27;</span>]<br></code></pre></td></tr></table></figure><p><strong>列表推导式（List Comprehension）</strong></p><p>语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">new_list = [expression <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> iterable <span class="hljs-keyword">if</span> condition]<br></code></pre></td></tr></table></figure><blockquote><p>把一个可迭代对象处理成一个新的列表</p></blockquote><p><strong>示例</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">squares = [x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>)]<br><span class="hljs-built_in">print</span>(squares)  <span class="hljs-comment"># [1, 4, 9, 16, 25]</span><br><br>even_squares = [x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>) <span class="hljs-keyword">if</span> x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>]<br><span class="hljs-built_in">print</span>(even_squares)  <span class="hljs-comment"># [4, 16, 36, 64, 100]</span><br></code></pre></td></tr></table></figure><h3 id="元组（Tuple）"><a href="#元组（Tuple）" class="headerlink" title="元组（Tuple）"></a>元组（Tuple）</h3><ul><li><strong><code>tuple</code></strong>：有序、<strong>不可变</strong> 的元素集合，一旦创建就不能修改。</li></ul><p><strong>定义</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">empty_tuple</span> = ()       <span class="hljs-comment"># 空元组</span><br><span class="hljs-attr">empty_tuple2</span> = tuple() <span class="hljs-comment"># 另一种写法</span><br><br><span class="hljs-attr">coords</span> = (<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>)  <span class="hljs-comment"># 有初始值的元组</span><br></code></pre></td></tr></table></figure><p>不能像列表那样修改，但适合表示固定的数据序列</p><blockquote><p>注意：只有一个元素的元组必须写成 <code>(value,)</code>，否则被认为是普通表达式。</p></blockquote><p><strong>示例</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">point = (<span class="hljs-number">5</span>, <span class="hljs-number">10</span>)<br>x, y = point  <span class="hljs-comment"># 解包</span><br><span class="hljs-built_in">print</span>(x, y)<br><br><span class="hljs-comment"># 一个元素的元组</span><br>single_element_tuple = (<span class="hljs-number">42</span>,)<br><span class="hljs-built_in">print</span>(single_element_tuple)<br><br>-- 输出<br><span class="hljs-number">5</span> <span class="hljs-number">10</span><br>(<span class="hljs-number">42</span>,)<br></code></pre></td></tr></table></figure><h3 id="字典（Dictionary）"><a href="#字典（Dictionary）" class="headerlink" title="字典（Dictionary）"></a>字典（Dictionary）</h3><ul><li><strong><code>dict</code></strong>：由 <strong>键–值对（key–value）</strong> 组成的无序集合，键必须是不可变类型（如 <code>str，int，tuple</code>）类似与书籍目录，通过目录查找对应的内容页码。</li></ul><p><strong>定义</strong></p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs makefile">empty_dict = &#123;&#125;        <span class="hljs-comment"># 空字典</span><br>empty_dict2 = dict()   <span class="hljs-comment"># 另一种写法</span><br><br>person = &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Alice&quot;</span>,<br>    <span class="hljs-string">&quot;age&quot;</span>: 30<br>&#125;  <span class="hljs-comment"># 有初始键值对</span><br><br></code></pre></td></tr></table></figure><p><strong>示例</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">ages = &#123;<span class="hljs-string">&quot;Jay-Z&quot;</span>: <span class="hljs-number">52</span>, <span class="hljs-string">&quot;Emanuel&quot;</span>: <span class="hljs-number">44</span>&#125;<br><span class="hljs-built_in">print</span>(ages[<span class="hljs-string">&quot;Jay-Z&quot;</span>])   <span class="hljs-comment"># 访问</span><br>ages[<span class="hljs-string">&quot;Emanuel&quot;</span>] = <span class="hljs-number">45</span>   <span class="hljs-comment"># 修改</span><br>ages[<span class="hljs-string">&quot;Taylor&quot;</span>] = <span class="hljs-number">32</span>    <span class="hljs-comment"># 新增</span><br><span class="hljs-built_in">print</span>(ages.get(<span class="hljs-string">&quot;Unknown&quot;</span>, <span class="hljs-string">&quot;unknown&quot;</span>))  <span class="hljs-comment"># 安全访问</span><br><br>-- 输出<br><span class="hljs-number">52</span><br>unknown<br></code></pre></td></tr></table></figure><p><strong>字典推导式（Dict Comprehension）</strong></p><p>语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">new_dict = &#123;key_expr: value_expr <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> iterable <span class="hljs-keyword">if</span> condition&#125;<br></code></pre></td></tr></table></figure><blockquote><p>可以用另一个可迭代对象快速构建字典</p></blockquote><p><strong>示例</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">square_dict = &#123;x: x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>)&#125;<br><span class="hljs-built_in">print</span>(square_dict)  <br><span class="hljs-comment"># &#123;1: 1, 2: 4, 3: 9, 4: 16, 5: 25&#125;</span><br></code></pre></td></tr></table></figure><h3 id="集合（Set）"><a href="#集合（Set）" class="headerlink" title="集合（Set）"></a>集合（Set）</h3><ul><li><strong><code>set</code></strong>：集合是 <strong>无序、去重</strong> 的结构，可以快速进行成员检查和集合运算</li></ul><p><strong>定义</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">empty_set = <span class="hljs-built_in">set</span>()  <span class="hljs-comment"># 空集合（&#123;&#125; 是空字典！）</span><br><br>fruits = &#123;<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-string">&quot;orange&quot;</span>&#125;  <span class="hljs-comment"># 有初始值的集合</span><br><br></code></pre></td></tr></table></figure><p><strong>示例</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">s = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;<br>s.add(<span class="hljs-number">4</span>)<br>s.remove(<span class="hljs-number">2</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-number">3</span> <span class="hljs-keyword">in</span> s)  <span class="hljs-comment"># True</span><br></code></pre></td></tr></table></figure><p><strong>集合推导式（Set Comprehension）</strong></p><p>语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">new_set = &#123;expression <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> iterable <span class="hljs-keyword">if</span> condition&#125;<br></code></pre></td></tr></table></figure><blockquote><p>类似列表推导式，但生成的是集合，会去除重复项</p></blockquote><p><strong>示例</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">unique_squares = &#123;x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>)&#125;<br><span class="hljs-built_in">print</span>(unique_squares)  <span class="hljs-comment"># 结果元素无序</span><br></code></pre></td></tr></table></figure><p><strong>对比</strong></p><table><thead><tr><th>类型</th><th>是否有序</th><th>是否可变</th><th>推导式语法</th><th>构建空对象</th></tr></thead><tbody><tr><td><code>list</code></td><td>有序</td><td>是</td><td><code>[x for …]</code></td><td><code>[]</code> &#x2F; <code>list()</code></td></tr><tr><td><code>tuple</code></td><td>有序</td><td>否</td><td>无内建推导式（用生成器 + <code>tuple()</code>）</td><td><code>()</code> &#x2F; <code>tuple()</code></td></tr><tr><td><code>dict</code></td><td>（有顺序保证）</td><td>是</td><td><code>{k:v for …}</code></td><td><code>{}</code> &#x2F; <code>dict()</code></td></tr><tr><td><code>set</code></td><td>无序</td><td>是</td><td><code>{x for …}</code></td><td><code>set()</code></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python变量</title>
    <link href="/python/variable.html"/>
    <url>/python/variable.html</url>
    
    <content type="html"><![CDATA[<h2 id="一、变量的定义"><a href="#一、变量的定义" class="headerlink" title="一、变量的定义"></a>一、变量的定义</h2><p>什么是变量：变量是用于存储数据的容器，可以通过变量名来引用存储的值，直白一点就是变量代表了一个值，我们可以通过变量存储和获取值。</p><p><strong>基本特点</strong></p><ul><li>不需要显示声明类型，编译器会通过赋值进行类型推断</li><li>同一个变量名在声明以后，可以被赋值不同类型的值</li></ul><p><strong>命名规则</strong></p><ul><li>变量名只能包含：字母（a-z, A-Z）、数字（0-9）、下划线（_）</li><li>首字母只能以字母或下划线开头，不能以数字开头</li><li>区分大小写 <code>name</code> 和 <code>NAME</code>表示不同的变量</li><li>不能使用<code>Python</code>关键字，可以通过使用 <code>keyword.kwlist</code> 获取当前版本<code>Python</code>的保留关键字</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ✅ 允许的</span><br>name = <span class="hljs-string">&quot;张三&quot;</span><br>age_1 = <span class="hljs-number">25</span><br>_user_count = <span class="hljs-number">100</span><br>variable = <span class="hljs-number">10</span>    <span class="hljs-comment"># 字母开头</span><br>_variable = <span class="hljs-number">20</span>   <span class="hljs-comment"># 下划线开头</span><br>var123 = <span class="hljs-number">30</span>      <span class="hljs-comment"># 字母开头，包含数字</span><br><br><span class="hljs-comment"># ❌ 不允许的</span><br><span class="hljs-comment"># my-name = &quot;张三&quot;     # 不允许连字符</span><br><span class="hljs-comment"># my.name = &quot;李四&quot;     # 不允许点号</span><br><span class="hljs-comment"># my name = &quot;王五&quot;     # 不允许空格</span><br><span class="hljs-comment"># name@email = &quot;test&quot;  # 不允许@符号</span><br><span class="hljs-comment"># $price = 100         # 不允许$符号</span><br>123var = <span class="hljs-number">10</span>      <span class="hljs-comment"># 数字开头</span><br>1variable = <span class="hljs-number">20</span>   <span class="hljs-comment"># 数字开头</span><br><span class="hljs-number">123</span> = <span class="hljs-string">&quot;test&quot;</span>     <span class="hljs-comment"># 纯数字也不行</span><br></code></pre></td></tr></table></figure><p><strong>建议的命名</strong></p><table><thead><tr><th align="left">类型</th><th align="left">命名约定</th><th align="left">示例</th></tr></thead><tbody><tr><td align="left">变量</td><td align="left">snake_case（小写下划线）</td><td align="left"><code>student_name</code>, <code>total_score</code></td></tr><tr><td align="left">函数</td><td align="left">snake_case（小写下划线）</td><td align="left"><code>get_user_info()</code>, <code>calculate_total()</code></td></tr><tr><td align="left">类名</td><td align="left">PascalCase（大驼峰）</td><td align="left"><code>StudentInfo</code>, <code>DataProcessor</code></td></tr><tr><td align="left">常量</td><td align="left">UPPER_CASE（全大写）</td><td align="left"><code>MAX_SIZE</code>, <code>DEFAULT_TIMEOUT</code></td></tr><tr><td align="left">模块</td><td align="left">snake_case（小写下划线）</td><td align="left"><code>my_module.py</code></td></tr><tr><td align="left">包名</td><td align="left">snake_case（全小写）</td><td align="left"><code>my_package/</code></td></tr></tbody></table><h2 id="二、局部变量与全局变量"><a href="#二、局部变量与全局变量" class="headerlink" title="二、局部变量与全局变量"></a>二、局部变量与全局变量</h2><h3 id="1、局部变量"><a href="#1、局部变量" class="headerlink" title="1、局部变量"></a>1、局部变量</h3><p>定义位置：定义在函数内部的变量</p><p>作用域：只在定义它的函数内部生效</p><p>生命周期：函数调用时创建，函数结束时销毁</p><p>访问权限：只能在函数内部访问</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>():<br>    msg = <span class="hljs-string">&quot;Hello Python!&quot;</span><br>    <span class="hljs-built_in">print</span>(msg)  <span class="hljs-comment"># 这里能访问 msg</span><br><br>greet()<br><span class="hljs-built_in">print</span>(msg)  <span class="hljs-comment"># 报错：msg 在这里不存在</span><br><br></code></pre></td></tr></table></figure><h3 id="2、全局变量"><a href="#2、全局变量" class="headerlink" title="2、全局变量"></a>2、全局变量</h3><p>定义位置：函数外部，模块顶层</p><p>作用域：在整个模块中有效</p><p>生命周期：程序运行时创建，程序结束时销毁</p><p>访问权限：可以在任何地方访问</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">10</span>  <span class="hljs-comment"># 全局变量</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">show</span>():<br>    <span class="hljs-built_in">print</span>(x)  <span class="hljs-comment"># 在函数内部访问全局变量</span><br><br>show()<br><span class="hljs-built_in">print</span>(x)  <span class="hljs-comment"># 同样能访问</span><br><br></code></pre></td></tr></table></figure><h4 id="2-1-同名遮蔽（Shadowing）"><a href="#2-1-同名遮蔽（Shadowing）" class="headerlink" title="2.1 同名遮蔽（Shadowing）"></a>2.1 同名遮蔽（Shadowing）</h4><p>如果全局有一个变量 <code>a</code>，函数里也定义了 <code>a</code>，局部变量 <strong>不会修改</strong> 全局变量，仅在函数内遮蔽它</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">a = <span class="hljs-number">10</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>():<br>    a = <span class="hljs-number">99</span>  <span class="hljs-comment"># 局部变量，函数内部定义的局部变量 a 会遮蔽全局变量 a</span><br>    <span class="hljs-built_in">print</span>(a)<br><br>f()        <span class="hljs-comment"># 输出 99</span><br><span class="hljs-built_in">print</span>(a)   <span class="hljs-comment"># 仍然是 10</span><br><br></code></pre></td></tr></table></figure><h4 id="2-2-全局变量的修改"><a href="#2-2-全局变量的修改" class="headerlink" title="2.2 全局变量的修改"></a>2.2 全局变量的修改</h4><p>对全局变量的修改，需要借助关键字 <code>global</code> 完成，如果在修改全局变量时没有使用<code>global</code> 会发生错误。</p><p><strong>语法：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">global</span> 变量名<br><span class="hljs-comment"># 赋值操作</span><br></code></pre></td></tr></table></figure><p><strong>错误示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">5</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>():<br>    x = x + <span class="hljs-number">1</span>  <span class="hljs-comment"># 会出错</span><br><br>f()<br></code></pre></td></tr></table></figure><p>报错：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">UnboundLocalError: cannot access local variable <span class="hljs-string">&#x27;x&#x27;</span> where it <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> associated <span class="hljs-keyword">with</span> a value<br></code></pre></td></tr></table></figure><p><strong>正确示例：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">5</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">inc</span>():<br>    <span class="hljs-keyword">global</span> x<br>    x += <span class="hljs-number">1</span><br><br>inc()<br><span class="hljs-built_in">print</span>(x)  <span class="hljs-comment"># 输出6</span><br><br></code></pre></td></tr></table></figure><p><strong>全局变量的滥用容易导致以下问题：</strong></p><ul><li><p>增加代码耦合度</p></li><li><p>增加非预期状态改变的风险</p></li><li><p>让调试变难</p></li></ul><h2 id="三、常量"><a href="#三、常量" class="headerlink" title="三、常量"></a>三、常量</h2><p>常量：一种特殊的变量，在程序整个生命周期中值不会发生改变，例如：数学的 <code>π</code> 。不过，<code>Python</code> 语言无法像<code>Java</code>等语言一样，通过<code>const</code>或<code>final</code>关键字来声明变量为常量，限制代码对变量的修改。</p><p>命名风格：全大写字母 + 下划线，以此种方式声明变量预期是一个常量，不应该被修改</p><p>常量的访问和变量是相同的，可以直接访问，只是声明为常量以后，不应该去修改它</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">PI = <span class="hljs-number">3.14159</span><br>MAX_RETRIES = <span class="hljs-number">5</span><br>BASE_URL = <span class="hljs-string">&quot;https://api.example.com&quot;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Python安装与入门</title>
    <link href="/python/begin.html"/>
    <url>/python/begin.html</url>
    
    <content type="html"><![CDATA[<h2 id="一、安装Python"><a href="#一、安装Python" class="headerlink" title="一、安装Python"></a>一、安装Python</h2><p>下载链接： <a href="https://www.python.org/downloads/windows/">https://www.python.org/downloads/windows/</a></p><p>在下载页面选择 <code>Stable Releases</code> 稳定版本，下载文件可以选择<code>exe</code>或<code>zip</code>包</p><ul><li>Windows installer (64-bit)：<code>exe</code>格式的安装包，目前<code>Windows</code>系统一般都是<code>64</code>位的，选择第一个即可</li><li>Windows embeddable package (64-bit)：<code>zip</code> 格式，解压后配置环境变量后使用<code>Python</code>解释器，相对于<code>exe</code>方式安装，提供的功能相对较少</li></ul><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20251229131643659.png" alt="image-20251229131643659"></p><h3 id="1-exe格式安装（建议选择）"><a href="#1-exe格式安装（建议选择）" class="headerlink" title="1. exe格式安装（建议选择）"></a>1. exe格式安装（建议选择）</h3><ul><li><p>运行下载后的<code>exe</code>文件，首先会让我们选择需要安装的功能，此处主要选择 <code>pip</code>即可，后续就不需要单独安装<code>pip</code>模块</p><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20251229132832044.png" alt="image-20251229132832044"></p></li><li><p>下一步选择<code>Python</code>解释器安装目录和其他高级功能，选择创建快捷指令和添加<code>Python</code>到环境变量（后续不需要人工配置环境变量）即可</p><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20251229133027226.png" alt="image-20251229133027226"></p></li><li><p>点击<code>Install</code> 安装</p></li><li><p>验证，<strong>采用<code>exe</code>的优点在于不用手动配置环境变量和安装<code>pip</code>模块</strong></p><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20251229133226623.png" alt="image-20251229133226623"></p></li></ul><h3 id="2-zip格式安装"><a href="#2-zip格式安装" class="headerlink" title="2. zip格式安装"></a>2. zip格式安装</h3><ul><li><p>将下载下来的zip包解压，例如解压到 <code>D:/python-3.14.2-embed-amd64</code> 目录，具体路径和命名可以根据个人喜好设置</p></li><li><p>配置环境变量，将上一步的<code>D:/python-3.14.2-embed-amd64(包含python.exe)</code>的路径添加到<code>Path</code>环境变量上，<strong>添加路径：系统-&gt;系统信息-&gt;高级系统设置-&gt;环境变量-&gt;系统变量-&gt;Path-&gt;新建</strong> </p><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20251229131944926.png" alt="image-20251229131944926"></p></li><li><p>检查配置正确性</p><p>打开<code>cmd</code>窗口，输入 <code>python -V</code> 查看<code>python</code>版本，如果显示正确表明安装成功</p><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20251229132200244.png" alt="image-20251229132200244"></p></li></ul><p>使用<code>zip</code>包安装存在的问题：</p><ul><li>无法使用<code>pip</code>安装第三方模块</li></ul><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20251229132345358.png" alt="image-20251229132345358"></p><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20251229132351852.png" alt="image-20251229132351852"></p><p><strong>通过get-pip.py手动安装pip</strong></p><ul><li><p>获取get-pip.py文件</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py<br></code></pre></td></tr></table></figure></li><li><p>运行get-pip.py文件安装pip</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">python get-pip.py<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20251229132545972.png" alt="image-20251229132545972"></p></li></ul><h2 id="二、安装编码客户端"><a href="#二、安装编码客户端" class="headerlink" title="二、安装编码客户端"></a>二、安装编码客户端</h2><p><code>Python</code>解释器安装好以后，我们开始进入编码阶段，编码不要工具，此处介绍免费的<code>VS Code</code>的安装和配置，用于后续的学习。</p><h3 id="1-安装-VS-Code"><a href="#1-安装-VS-Code" class="headerlink" title="1. 安装 VS Code"></a>1. 安装 VS Code</h3><p>访问：<a href="https://code.visualstudio.com/download">https://code.visualstudio.com/download</a> 根据系统选择下载</p><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20251229152859065.png" alt="image-20251229152859065"></p><h3 id="2-安装Python插件"><a href="#2-安装Python插件" class="headerlink" title="2. 安装Python插件"></a>2. 安装Python插件</h3><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20251229153320867.png" alt="image-20251229153320867"></p><h2 id="三、Hello-World"><a href="#三、Hello-World" class="headerlink" title="三、Hello World"></a>三、Hello World</h2><p>使用VS Code打开一个目录用于后续代码开发</p><p><img src="https://raw.githubusercontent.com/duwei0227/picbed/main/blogs/image-20251229171859046.png" alt="image-20251229171859046"></p><p>新建一个 <code>test.py</code> 文件并写入以下内容打印<code>Hello World</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello World&quot;</span>)<br><br><span class="hljs-comment"># 或 </span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello World&quot;</span>)<br></code></pre></td></tr></table></figure><ul><li><code>Python</code> 是从上到下解释执行代码</li><li><code>__name__</code>是一个内置变量，表示当前模块的名称，当使用<code>python xx.py</code>时，<code>__name__</code> 被设置为<code>__main__</code>， 当文件作为模块被其他文件引用时，<code>__name__</code>被设置为文件名（不含扩展名）</li></ul>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Fedora系统自动删除历史kernel</title>
    <link href="/linux/fedora/removal_old_kernel.html"/>
    <url>/linux/fedora/removal_old_kernel.html</url>
    
    <content type="html"><![CDATA[<h3 id="一、编辑-dnf-conf-文件"><a href="#一、编辑-dnf-conf-文件" class="headerlink" title="一、编辑 dnf.conf 文件"></a>一、编辑 dnf.conf 文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> vi /etc/dnf/dnf.conf<br></code></pre></td></tr></table></figure><h3 id="二、在-main-下边添加-installonly-limit"><a href="#二、在-main-下边添加-installonly-limit" class="headerlink" title="二、在[main]下边添加 installonly_limit"></a>二、在[main]下边添加 installonly_limit</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">installonly_limit=2<br></code></pre></td></tr></table></figure><p>数字 <strong>2</strong>表示需要保留的内核数量，包含当前在使用的最新内核</p><h3 id="三、执行-sudo-dnf-update-删除旧内核"><a href="#三、执行-sudo-dnf-update-删除旧内核" class="headerlink" title="三、执行 sudo dnf update 删除旧内核"></a>三、执行 sudo dnf update 删除旧内核</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">duwei@probiecoder:~$ <span class="hljs-built_in">sudo</span> dnf update<br>Updating and loading repositories:<br>dRepositories loaded.<br>Package                  Arch    Version                  Repository        Size<br>Removing:<br> kernel                  x86_64  6.17.4-200.fc42          &lt;unknown&gt;      0.0   B<br> kernel-core             x86_64  6.17.4-200.fc42          &lt;unknown&gt;     98.8 MiB<br> kernel-modules          x86_64  6.17.4-200.fc42          &lt;unknown&gt;     95.6 MiB<br> kernel-modules-core     x86_64  6.17.4-200.fc42          &lt;unknown&gt;     68.3 MiB<br> kernel-modules-extra    x86_64  6.17.4-200.fc42          &lt;unknown&gt;      4.2 MiB<br><br>Transaction Summary:<br> Removing:           5 packages<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Fedora</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
